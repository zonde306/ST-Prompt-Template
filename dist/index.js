import*as __WEBPACK_EXTERNAL_MODULE_https_esm_sh_faker_js_faker_9_7_0_b1cbf658__ from"https://esm.sh/@faker-js/faker@9.7.0";import*as __WEBPACK_EXTERNAL_MODULE__script_js_588e7203__ from"../../../../../script.js";import*as __WEBPACK_EXTERNAL_MODULE__slash_commands_js_f5742a84__ from"../../../../slash-commands.js";import*as __WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__ from"../../../../world-info.js";import*as __WEBPACK_EXTERNAL_MODULE__power_user_js_3c7cfb8b__ from"../../../../power-user.js";import*as __WEBPACK_EXTERNAL_MODULE__utils_js_d605cabe__ from"../../../../utils.js";import*as __WEBPACK_EXTERNAL_MODULE__group_chats_js_678c16bd__ from"../../../../group-chats.js";import*as __WEBPACK_EXTERNAL_MODULE__extensions_js_e625da88__ from"../../../../extensions.js";import*as __WEBPACK_EXTERNAL_MODULE__openai_js_bf183548__ from"../../../../openai.js";import*as __WEBPACK_EXTERNAL_MODULE__regex_engine_js_683beba0__ from"../../../regex/engine.js";import*as __WEBPACK_EXTERNAL_MODULE__tokenizers_js_d5863f55__ from"../../../../tokenizers.js";import*as __WEBPACK_EXTERNAL_MODULE__slash_commands_SlashCommand_js_1b0d5616__ from"../../../../slash-commands/SlashCommand.js";import*as __WEBPACK_EXTERNAL_MODULE__slash_commands_SlashCommandArgument_js_a42b9371__ from"../../../../slash-commands/SlashCommandArgument.js";import*as __WEBPACK_EXTERNAL_MODULE__slash_commands_SlashCommandParser_js_42c8b851__ from"../../../../slash-commands/SlashCommandParser.js";var __webpack_modules__={7921:(t,e,i)=>{var r=i(3270),s=i(7510),n=r.Parser.extend(i(3181)).extend(i(9164)).extend(i(3511)).extend(i(9067)).extend(i(439).Ay),a=n.extend(i(4671)).extend(i(5679));function o(t){return t||(t={}),s({ecmaVersion:2020,allowHashBang:!0,allowReturnOutsideFunction:!0},t)}function c(t){return t||(t={}),"module"===t.sourceType?a:n}t.exports=s(r,{parse:function(t,e){return c(e).parse(t,o(e))},parseExpressionAt:function(t,e,i){return c(i).parseExpressionAt(t,e,o(i))},tokenizer:function(t,e){return c(e).tokenizer(t,o(e))}})},3181:(t,e,i)=>{var r=i(3270),s=r.tokTypes,n=r.isIdentifierStart;t.exports=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseLiteral=function(e){var i=t.prototype.parseLiteral.call(this,e);return 110==i.raw.charCodeAt(i.raw.length-1)&&(i.bigint=this.getNumberInput(i.start,i.end)),i},e.prototype.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var i=this.readInt(t);if(null===i&&this.raise(this.start+2,"Expected number in radix "+t),110==this.input.charCodeAt(this.pos)){var r=this.getNumberInput(e,this.pos);i="undefined"!=typeof BigInt?BigInt(r):null,++this.pos}else n(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");return this.finishToken(s.num,i)},e.prototype.readNumber=function(e){var i=this.pos;if(e)return t.prototype.readNumber.call(this,e);if(48===this.input.charCodeAt(i)&&110!==this.input.charCodeAt(i+1))return t.prototype.readNumber.call(this,e);if(null===this.readInt(10)&&this.raise(i,"Invalid number"),110!=this.input.charCodeAt(this.pos))return this.pos=i,t.prototype.readNumber.call(this,e);var r=this.getNumberInput(i,this.pos),n="undefined"!=typeof BigInt?BigInt(r):null;return++this.pos,this.finishToken(s.num,n)},e.prototype.getNumberInput=function(e,i){return t.prototype.getNumberInput?t.prototype.getNumberInput.call(this,e,i):this.input.slice(e,i)},e}(t)}},9164:(t,e,i)=>{var r=i(3270).tokTypes,s=i(4078);function n(t){if(this.eat(r.eq)){var e=this._inFieldValue;this._inFieldValue=!0,t.value=this.parseExpression(),this._inFieldValue=e}else t.value=null}t.exports=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseClassElement=function(e){if(this.options.ecmaVersion>=8&&(this.type==r.name||this.type==this.privateNameToken||this.type==r.bracketL||this.type==r.string)){var i=this._branch();if(i.type==r.bracketL){var s=0;do{i.eat(r.bracketL)?++s:i.eat(r.bracketR)?--s:i.next()}while(s>0)}else i.next();if(i.type==r.eq||i.canInsertSemicolon()||i.type==r.semi){var a=this.startNode();return this.type==this.privateNameToken?this.parsePrivateClassElementName(a):this.parsePropertyName(a),("Identifier"===a.key.type&&"constructor"===a.key.name||"Literal"===a.key.type&&"constructor"===a.key.value)&&this.raise(a.key.start,"Classes may not have a field called constructor"),n.call(this,a),this.finishNode(a,"FieldDefinition"),this.semicolon(),a}}return t.prototype.parseClassElement.apply(this,arguments)},e.prototype.parseIdent=function(e,i){var r=t.prototype.parseIdent.call(this,e,i);return this._inFieldValue&&"arguments"==r.name&&this.raise(r.start,"A class field initializer may not contain arguments"),r},e}(t=s(t))}},439:(t,e,i)=>{var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function t(e,i,r){null===e&&(e=Function.prototype);var s=Object.getOwnPropertyDescriptor(e,i);if(void 0===s){var n=Object.getPrototypeOf(e);return null===n?void 0:t(n,i,r)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(r):void 0};e.Ay=function(t){return function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"parseStatement",value:function(t,i,r){return this.type===n.tokTypes._import&&c.call(this)?this.parseExpressionStatement(this.startNode(),this.parseExpression()):s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parseStatement",this).call(this,t,i,r)}},{key:"parseExprAtom",value:function(t){return this.type===n.tokTypes._import?o.call(this):s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parseExprAtom",this).call(this,t)}}]),e}(t)};var n=i(3270);var a="Import";function o(){var t=this.startNode();return this.next(),this.type!==n.tokTypes.parenL&&this.unexpected(),this.finishNode(t,a)}function c(){return/^(\s|\/\/.*|\/\*[^]*?\*\/)*\(/.test(this.input.slice(this.pos))}n.tokTypes._import.startsExpr=!0},4671:(t,e,i)=>{var r=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,s=i(3270).tokTypes;t.exports=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseExport=function(e,i){r.lastIndex=this.pos;var n=r.exec(this.input);if("*"!==this.input.charAt(this.pos+n[0].length))return t.prototype.parseExport.call(this,e,i);this.next();var a=this.startNode();return this.expect(s.star),this.eatContextual("as")&&(e.declaration=null,a.exported=this.parseIdent(!0),this.checkExport(i,a.exported.name,this.lastTokStart),e.specifiers=[this.finishNode(a,"ExportNamespaceSpecifier")]),this.expectContextual("from"),this.type!==s.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,e.specifiers?"ExportNamedDeclaration":"ExportAllDeclaration")},e}(t)}},5679:(t,e,i)=>{var r=i(3270).tokTypes,s=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,n=function(t){s.lastIndex=t.pos;var e=s.exec(t.input),i=t.pos+e[0].length;return"."===t.input.slice(i,i+1)};t.exports=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseExprAtom=function(e){if(this.type!==r._import||!n(this))return t.prototype.parseExprAtom.call(this,e);this.options.allowImportExportEverywhere||this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'");var i=this.startNode();return i.meta=this.parseIdent(!0),this.expect(r.dot),i.property=this.parseIdent(!0),"meta"!==i.property.name&&this.raiseRecoverable(i.property.start,"The only valid meta property for import is import.meta"),this.finishNode(i,"MetaProperty")},e.prototype.parseStatement=function(e,i,s){if(this.type!==r._import||!n(this))return t.prototype.parseStatement.call(this,e,i,s);var a=this.startNode(),o=this.parseExpression();return this.parseExpressionStatement(a,o)},e}(t)}},9067:t=>{t.exports=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readInt=function(e,i){if(null!=i)return t.prototype.readInt.call(this,e,i);for(var r=this.pos,s=0,n=!1;;){var a=this.input.charCodeAt(this.pos),o=void 0;if(a>=97)o=a-97+10;else{if(95==a){n||this.raise(this.pos,"Invalid numeric separator"),++this.pos,n=!1;continue}o=a>=65?a-65+10:a>=48&&a<=57?a-48:1/0}if(o>=e)break;++this.pos,s=s*e+o,n=!0}return this.pos===r?null:(n||this.raise(this.pos-1,"Invalid numeric separator"),s)},e.prototype.readNumber=function(e){var i=t.prototype.readNumber.call(this,e),r=this.end-this.start>=2&&48===this.input.charCodeAt(this.start),s=this.getNumberInput(this.start,this.end);return s.length<this.end-this.start&&(r&&this.raise(this.start,"Invalid number"),this.value=parseFloat(s)),i},e.prototype.getNumberInput=function(t,e){return this.input.slice(t,e).replace(/_/g,"")},e}(t)}},4078:(t,e,i)=>{var r=i(3270);var s=r.tokTypes,n=r.TokenType;t.exports=function(t){if(t.prototype.parsePrivateName)return t;for(var e=t;e&&e!==r.Parser;)e=e.__proto__;if(e!==r.Parser)throw new Error("acorn-private-class-elements does not support mixing different acorn copies");return t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._branch=function(){return this.__branch=this.__branch||new t({ecmaVersion:this.options.ecmaVersion},this.input),this.__branch.end=this.end,this.__branch.pos=this.pos,this.__branch.type=this.type,this.__branch.value=this.value,this.__branch.containsEsc=this.containsEsc,this.__branch},e.prototype.parsePrivateClassElementName=function(t){t.computed=!1,t.key=this.parsePrivateName(),"constructor"==t.key.name&&this.raise(t.key.start,"Classes may not have a private element named constructor");var e={get:"set",set:"get"}[t.kind],i=this._privateBoundNamesStack[this._privateBoundNamesStack.length-1];return Object.prototype.hasOwnProperty.call(i,t.key.name)&&i[t.key.name]!==e&&this.raise(t.start,"Duplicate private element"),i[t.key.name]=t.kind||!0,delete this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1][t.key.name],t.key},e.prototype.parsePrivateName=function(){var t=this.startNode();return t.name=this.value,this.next(),this.finishNode(t,"PrivateName"),"never"==this.options.allowReserved&&this.checkUnreserved(t),t},e.prototype.getTokenFromCode=function(e){if(35===e){++this.pos;var i=this.readWord1();return this.finishToken(this.privateNameToken,i)}return t.prototype.getTokenFromCode.call(this,e)},e.prototype.parseClass=function(e,i){this._privateBoundNamesStack=this._privateBoundNamesStack||[];var r=Object.create(this._privateBoundNamesStack[this._privateBoundNamesStack.length-1]||null);this._privateBoundNamesStack.push(r),this._unresolvedPrivateNamesStack=this._unresolvedPrivateNamesStack||[];var s=Object.create(null);this._unresolvedPrivateNamesStack.push(s);var n=t.prototype.parseClass.call(this,e,i);if(this._privateBoundNamesStack.pop(),this._unresolvedPrivateNamesStack.pop(),this._unresolvedPrivateNamesStack.length)Object.assign(this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1],s);else{var a=Object.keys(s);a.length&&(a.sort((function(t,e){return s[t]-s[e]})),this.raise(s[a[0]],"Usage of undeclared private name"))}return n},e.prototype.parseSubscript=function(e,i,r,n,a){if(!this.eat(s.dot))return t.prototype.parseSubscript.call(this,e,i,r,n,a);var o=this.startNodeAt(i,r);return o.object=e,o.computed=!1,this.type==this.privateNameToken?(o.property=this.parsePrivateName(),this._privateBoundNamesStack.length&&this._privateBoundNamesStack[this._privateBoundNamesStack.length-1][o.property.name]||(this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1][o.property.name]=o.property.start)):o.property=this.parseIdent(!0),this.finishNode(o,"MemberExpression")},e.prototype.parseMaybeUnary=function(e,i){var r=t.prototype.parseMaybeUnary.call(this,e,i);return"delete"==r.operator&&"MemberExpression"==r.argument.type&&"PrivateName"==r.argument.property.type&&this.raise(r.start,"Private elements may not be deleted"),r},e}(t),t.prototype.privateNameToken=new n("privateName"),t}},3511:(t,e,i)=>{var r=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,s=i(3270).tokTypes;function n(t){if(this.eat(s.eq)){var e=this._inStaticFieldValue;this._inStaticFieldValue=!0,t.value=this.parseExpression(),this._inStaticFieldValue=e}else t.value=null}var a=i(4078);t.exports=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseClassElement=function(e){var i=this;if(this.eat(s.semi))return null;var a=this.startNode(),o=function(t,e){void 0===e&&(e=!1);var r=i.start,n=i.startLoc;return!!i.eatContextual(t)&&(!(i.type===s.parenL||e&&i.canInsertSemicolon())||(a.key&&i.unexpected(),a.computed=!1,a.key=i.startNodeAt(r,n),a.key.name=t,i.finishNode(a.key,"Identifier"),!1))};if(a.static=o("static"),!a.static)return t.prototype.parseClassElement.apply(this,arguments);var c=this.eat(s.star),h=!1;if(!c)if(this.options.ecmaVersion>=8&&this.isContextual("async")){r.lastIndex=this.pos;var l=r.exec(this.input),p=this.input.charAt(this.pos+l[0].length);if(";"===p||"="===p)return a.key=this.parseIdent(!0),a.computed=!1,n.call(this,a),this.finishNode(a,"FieldDefinition"),this.semicolon(),a;this.options.ecmaVersion>=8&&o("async",!0)&&(h=!0,c=this.options.ecmaVersion>=9&&this.eat(s.star))}else o("get")?a.kind="get":o("set")&&(a.kind="set");if(this.type===this.privateNameToken){if(this.parsePrivateClassElementName(a),this.type!==s.parenL)return"prototype"===a.key.name&&this.raise(a.key.start,"Classes may not have a private static property named prototype"),n.call(this,a),this.finishNode(a,"FieldDefinition"),this.semicolon(),a}else a.key||(this.parsePropertyName(a),"prototype"!==(a.key.name||a.key.value)||a.computed||this.raise(a.key.start,"Classes may not have a static property named prototype"));return a.kind||(a.kind="method"),this.parseClassMethod(a,c,h),a.kind||"constructor"!==(a.key.name||a.key.value)||a.computed||this.raise(a.key.start,"Classes may not have a static field named constructor"),"get"===a.kind&&0!==a.value.params.length&&this.raiseRecoverable(a.value.start,"getter should have no params"),"set"===a.kind&&1!==a.value.params.length&&this.raiseRecoverable(a.value.start,"setter should have exactly one param"),"set"===a.kind&&"RestElement"===a.value.params[0].type&&this.raiseRecoverable(a.value.params[0].start,"Setter cannot use rest params"),a},e.prototype.parseClassMethod=function(e,i,r,a){return i||r||"method"!=e.kind||!e.static||this.options.ecmaVersion<8||this.type==s.parenL?t.prototype.parseClassMethod.apply(this,arguments):(n.call(this,e),delete e.kind,e=this.finishNode(e,"FieldDefinition"),this.semicolon(),e)},e.prototype.parseIdent=function(e,i){var r=t.prototype.parseIdent.call(this,e,i);return this._inStaticFieldValue&&"arguments"==r.name&&this.raise(r.start,"A static class field initializer may not contain arguments"),r},e}(a(t))}},5134:t=>{t.exports=function(){function t(e,i,r){function s(a,o){if(!i[a]){if(!e[a]){if(n)return n(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[a]={exports:{}};e[a][0].call(h.exports,(function(t){return s(e[a][1][t]||t)}),h,h.exports,t,e,i,r)}return i[a].exports}for(var n=void 0,a=0;a<r.length;a++)s(r[a]);return s}return t}()({1:[function(t,e,i){var r=t("fs"),s=t("path"),n=t("./utils"),a=!1,o=t("../package.json").version,c="<",h=">",l="%",p="locals",u="ejs",d="(<%%|%%>|<%=|<%-|<%_|<%#|<%|%>|-%>|_%>)",f=["delimiter","scope","context","debug","compileDebug","client","_with","rmWhitespace","strict","filename","async"],_=f.concat("cache"),m=/^\uFEFF/,g=/^[a-zA-Z_$][0-9a-zA-Z_$]*$/;function v(t,e){var s;if(e.some((function(e){return s=i.resolveInclude(t,e,!0),r.existsSync(s)})))return s}function y(t,e){var s,n,a=e.views,o=/^[A-Za-z]+:\\|^\//.exec(t);if(o&&o.length)t=t.replace(/^\/*/,""),s=Array.isArray(e.root)?v(t,e.root):i.resolveInclude(t,e.root||"/",!0);else if(e.filename&&(n=i.resolveInclude(t,e.filename),r.existsSync(n)&&(s=n)),!s&&Array.isArray(a)&&(s=v(t,a)),!s&&"function"!=typeof e.includer)throw new Error('Could not find the include file "'+e.escapeFunction(t)+'"');return s}function x(t,e){var r,s=t.filename,n=arguments.length>1;if(t.cache){if(!s)throw new Error("cache option requires a filename");if(r=i.cache.get(s))return r;n||(e=w(s).toString().replace(m,""))}else if(!n){if(!s)throw new Error("Internal EJS error: no file name or template provided");e=w(s).toString().replace(m,"")}return r=i.compile(e,t),t.cache&&i.cache.set(s,r),r}function b(t,e,r){var s;if(!r){if("function"==typeof i.promiseImpl)return new i.promiseImpl((function(i,r){try{i(s=x(t)(e))}catch(t){r(t)}}));throw new Error("Please provide a callback function")}try{s=x(t)(e)}catch(t){return r(t)}r(null,s)}function w(t){return i.fileLoader(t)}function E(t,e){var i=n.shallowCopy(n.createNullProtoObjWherePossible(),e);if(i.filename=y(t,i),"function"==typeof e.includer){var r=e.includer(t,i.filename);if(r&&(r.filename&&(i.filename=r.filename),r.template))return x(i,r.template)}return x(i)}function A(t,e,i,r,s){var n=e.split("\n"),a=Math.max(r-3,0),o=Math.min(n.length,r+3),c=s(i),h=n.slice(a,o).map((function(t,e){var i=e+a+1;return(i==r?" >> ":"    ")+i+"| "+t})).join("\n");throw t.path=c,t.message=(c||"ejs")+":"+r+"\n"+h+"\n\n"+t.message,t}function k(t){return t.replace(/;(\s*$)/,"$1")}function S(t,e){var r=n.hasOwnOnlyObject(e),s=n.createNullProtoObjWherePossible();this.templateText=t,this.mode=null,this.truncate=!1,this.currentLine=1,this.source="",s.client=r.client||!1,s.escapeFunction=r.escape||r.escapeFunction||n.escapeXML,s.compileDebug=!1!==r.compileDebug,s.debug=!!r.debug,s.filename=r.filename,s.openDelimiter=r.openDelimiter||i.openDelimiter||c,s.closeDelimiter=r.closeDelimiter||i.closeDelimiter||h,s.delimiter=r.delimiter||i.delimiter||l,s.strict=r.strict||!1,s.context=r.context,s.cache=r.cache||!1,s.rmWhitespace=r.rmWhitespace,s.root=r.root,s.includer=r.includer,s.outputFunctionName=r.outputFunctionName,s.localsName=r.localsName||i.localsName||p,s.views=r.views,s.async=r.async,s.destructuredLocals=r.destructuredLocals,s.legacyInclude=void 0===r.legacyInclude||!!r.legacyInclude,s.strict?s._with=!1:s._with=void 0===r._with||r._with,this.opts=s,this.regex=this.createRegex()}i.cache=n.cache,i.fileLoader=r.readFileSync,i.localsName=p,i.promiseImpl=new Function("return this;")().Promise,i.resolveInclude=function(t,e,i){var r=s.dirname,n=s.extname,a=(0,s.resolve)(i?e:r(e),t);return n(t)||(a+=".ejs"),a},i.compile=function(t,e){return e&&e.scope&&(a||(console.warn("`scope` option is deprecated and will be removed in EJS 3"),a=!0),e.context||(e.context=e.scope),delete e.scope),new S(t,e).compile()},i.render=function(t,e,i){var r=e||n.createNullProtoObjWherePossible(),s=i||n.createNullProtoObjWherePossible();return 2==arguments.length&&n.shallowCopyFromList(s,r,f),x(s,t)(r)},i.renderFile=function(){var t,e,i,r=Array.prototype.slice.call(arguments),s=r.shift(),a={filename:s};return"function"==typeof arguments[arguments.length-1]&&(t=r.pop()),r.length?(e=r.shift(),r.length?n.shallowCopy(a,r.pop()):(e.settings&&(e.settings.views&&(a.views=e.settings.views),e.settings["view cache"]&&(a.cache=!0),(i=e.settings["view options"])&&n.shallowCopy(a,i)),n.shallowCopyFromList(a,e,_)),a.filename=s):e=n.createNullProtoObjWherePossible(),b(a,e,t)},i.Template=S,i.clearCache=function(){i.cache.reset()},S.modes={EVAL:"eval",ESCAPED:"escaped",RAW:"raw",COMMENT:"comment",LITERAL:"literal"},S.prototype={createRegex:function(){var t=d,e=n.escapeRegExpChars(this.opts.delimiter),i=n.escapeRegExpChars(this.opts.openDelimiter),r=n.escapeRegExpChars(this.opts.closeDelimiter);return t=t.replace(/%/g,e).replace(/</g,i).replace(/>/g,r),new RegExp(t)},compile:function(){var t,e,i,r=this.opts,a="",o="",c=r.escapeFunction,h=r.filename?JSON.stringify(r.filename):"undefined";if(!this.source){if(this.generateSource(),a+='  var __output = "";\n  function __append(...args) { args.filter(x => x !== undefined && x !== null).forEach(s => __output += s) }\n',r.outputFunctionName){if(!g.test(r.outputFunctionName))throw new Error("outputFunctionName is not a valid JS identifier.");a+="  const "+r.outputFunctionName+" = __append;\n"}if(r.localsName&&!g.test(r.localsName))throw new Error("localsName is not a valid JS identifier.");if(r.destructuredLocals&&r.destructuredLocals.length){for(var l=" const __locals = ("+r.localsName+" || {}),\n",p=0;p<r.destructuredLocals.length;p++){var u=r.destructuredLocals[p];if(!g.test(u))throw new Error("destructuredLocals["+p+"] is not a valid JS identifier.");p>0&&(l+=",\n  "),l+=u+" = __locals."+u}a+=l+";\n"}!1!==r._with&&(a+="  with ("+r.localsName+" || {}) {\n",o+="  }\n"),o+="  return __output;\n",this.source=a+this.source+o}t=r.compileDebug?"var __line = 1\n  , __lines = "+JSON.stringify(this.templateText)+"\n  , __filename = "+h+";\ntry {\n"+this.source+"} catch (e) {\n  rethrow(e, __lines, __filename, __line, escapeFn);\n}\n":this.source,r.client&&(t="escapeFn = escapeFn || "+c.toString()+";\n"+t,r.compileDebug&&(t="rethrow = rethrow || "+A.toString()+";\n"+t)),r.strict&&(t='"use strict";\n'+t),r.debug&&console.log(t),r.compileDebug&&r.filename&&(t=t+"\n//# sourceURL="+h+"\n");try{if(r.async)try{i=new Function("return (async function(){}).constructor;")()}catch(t){throw t instanceof SyntaxError?new Error("This environment does not support async/await"):t}else i=Function;e=new i(r.localsName+", escapeFn, include, rethrow",t)}catch(t){throw t instanceof SyntaxError&&(r.filename&&(t.message+=" in "+r.filename),t.message+=" while compiling ejs\n\n"),t}var d=r.client?e:function(t){var i=function(e,i){var s=n.shallowCopy(n.createNullProtoObjWherePossible(),t);return i&&(s=n.shallowCopy(s,i)),E(e,r)(s)};return e.apply(r.context,[t||n.createNullProtoObjWherePossible(),c,i,A])};if(r.filename&&"function"==typeof Object.defineProperty){var f=r.filename,_=s.basename(f,s.extname(f));try{Object.defineProperty(d,"name",{value:_,writable:!1,enumerable:!1,configurable:!0})}catch(t){}}return d},generateSource:function(){this.opts.rmWhitespace&&(this.templateText=this.templateText.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),this.templateText=this.templateText.replace(/[ \t]*<%_/gm,"<%_").replace(/_%>[ \t]*/gm,"_%>");var t=this,e=this.parseTemplateText(),i=this.opts.delimiter,r=this.opts.openDelimiter,s=this.opts.closeDelimiter;e&&e.length&&e.forEach((function(n,a){var o;if(0===n.indexOf(r+i)&&0!==n.indexOf(r+i+i)&&(o=e[a+2])!=i+s&&o!="-"+i+s&&o!="_"+i+s)throw new Error('Could not find matching close tag for "'+n+'".');t.scanLine(n)}))},parseTemplateText:function(){for(var t,e=this.templateText,i=this.regex,r=i.exec(e),s=[];r;)0!==(t=r.index)&&(s.push(e.substring(0,t)),e=e.slice(t)),s.push(r[0]),e=e.slice(r[0].length),r=i.exec(e);return e&&s.push(e),s},_addOutput:function(t){if(this.truncate&&(t=t.replace(/^(?:\r\n|\r|\n)/,""),this.truncate=!1),!t)return t;t=(t=(t=(t=t.replace(/\\/g,"\\\\")).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/"/g,'\\"'),this.source+='    ; __append("'+t+'")\n'},scanLine:function(t){var e=this,i=this.opts.delimiter,r=this.opts.openDelimiter,s=this.opts.closeDelimiter,n=0;switch(n=t.split("\n").length-1,t){case r+i:case r+i+"_":this.mode=S.modes.EVAL;break;case r+i+"=":this.mode=S.modes.ESCAPED;break;case r+i+"-":this.mode=S.modes.RAW;break;case r+i+"#":this.mode=S.modes.COMMENT;break;case r+i+i:this.mode=S.modes.LITERAL,this.source+='    ; __append("'+t.replace(r+i+i,r+i)+'")\n';break;case i+i+s:this.mode=S.modes.LITERAL,this.source+='    ; __append("'+t.replace(i+i+s,i+s)+'")\n';break;case i+s:case"-"+i+s:case"_"+i+s:this.mode==S.modes.LITERAL&&this._addOutput(t),this.mode=null,this.truncate=0===t.indexOf("-")||0===t.indexOf("_");break;default:if(this.mode){switch(this.mode){case S.modes.EVAL:case S.modes.ESCAPED:case S.modes.RAW:t.lastIndexOf("//")>t.lastIndexOf("\n")&&(t+="\n")}switch(this.mode){case S.modes.EVAL:this.source+="    ; "+t+"\n";break;case S.modes.ESCAPED:this.source+="    ; __append(escapeFn("+k(t)+"))\n";break;case S.modes.RAW:this.source+="    ; __append("+k(t)+")\n";break;case S.modes.COMMENT:break;case S.modes.LITERAL:this._addOutput(t)}}else this._addOutput(t)}e.opts.compileDebug&&n&&(this.currentLine+=n,this.source+="    ; __line = "+this.currentLine+"\n")}},i.escapeXML=n.escapeXML,i.__express=i.renderFile,i.VERSION=o,i.name=u,"undefined"!=typeof window&&(window.ejs=i)},{"../package.json":6,"./utils":2,fs:3,path:4}],2:[function(t,e,i){var r=/[|\\{}()[\]^$+*?.]/g,s=Object.prototype.hasOwnProperty,n=function(t,e){return s.apply(t,[e])};i.escapeRegExpChars=function(t){return t?String(t).replace(r,"\\$&"):""};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},o=/[&<>'"]/g;function c(t){return a[t]||t}var h='var _ENCODE_HTML_RULES = {\n      "&": "&amp;"\n    , "<": "&lt;"\n    , ">": "&gt;"\n    , \'"\': "&#34;"\n    , "\'": "&#39;"\n    }\n  , _MATCH_HTML = /[&<>\'"]/g;\nfunction encode_char(c) {\n  return _ENCODE_HTML_RULES[c] || c;\n};\n';function l(){return Function.prototype.toString.call(this)+";\n"+h}i.escapeXML=function(t){return null==t?"":String(t).replace(o,c)};try{"function"==typeof Object.defineProperty?Object.defineProperty(i.escapeXML,"toString",{value:l}):i.escapeXML.toString=l}catch(t){console.warn("Unable to set escapeXML.toString (is the Function prototype frozen?)")}i.shallowCopy=function(t,e){if(e=e||{},null!=t)for(var i in e)n(e,i)&&"__proto__"!==i&&"constructor"!==i&&(t[i]=e[i]);return t},i.shallowCopyFromList=function(t,e,i){if(i=i||[],e=e||{},null!=t)for(var r=0;r<i.length;r++){var s=i[r];if(void 0!==e[s]){if(!n(e,s))continue;if("__proto__"===s||"constructor"===s)continue;t[s]=e[s]}}return t},i.cache={_data:new Map,_capacity:64,set:function(t,e){if(this._data.has(t)&&this._data.delete(t),this._data.set(t,e),this._data.size>this._capacity){const t=this._data.keys().next().value;this._data.delete(t)}},get:function(t){if(!this._data.has(t))return;const e=this._data.get(t);return this._data.delete(t),this._data.set(t,e),e},remove:function(t){this._data.delete(t)},reset:function(){this._data.clear()}},i.hyphenToCamel=function(t){return t.replace(/-[a-z]/g,(function(t){return t[1].toUpperCase()}))},i.createNullProtoObjWherePossible="function"==typeof Object.create?function(){return Object.create(null)}:{__proto__:null}instanceof Object?function(){return{}}:function(){return{__proto__:null}},i.hasOwnOnlyObject=function(t){var e=i.createNullProtoObjWherePossible();for(var r in t)n(t,r)&&(e[r]=t[r]);return e}},{}],3:[function(t,e,i){},{}],4:[function(t,e,i){(function(t){function e(t,e){for(var i=0,r=t.length-1;r>=0;r--){var s=t[r];"."===s?t.splice(r,1):".."===s?(t.splice(r,1),i++):i&&(t.splice(r,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function r(t){"string"!=typeof t&&(t+="");var e,i=0,r=-1,s=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!s){i=e+1;break}}else-1===r&&(s=!1,r=e+1);return-1===r?"":t.slice(i,r)}function s(t,e){if(t.filter)return t.filter(e);for(var i=[],r=0;r<t.length;r++)e(t[r],r,t)&&i.push(t[r]);return i}i.resolve=function(){for(var i="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var a=n>=0?arguments[n]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(i=a+"/"+i,r="/"===a.charAt(0))}return(r?"/":"")+(i=e(s(i.split("/"),(function(t){return!!t})),!r).join("/"))||"."},i.normalize=function(t){var r=i.isAbsolute(t),a="/"===n(t,-1);return(t=e(s(t.split("/"),(function(t){return!!t})),!r).join("/"))||r||(t="."),t&&a&&(t+="/"),(r?"/":"")+t},i.isAbsolute=function(t){return"/"===t.charAt(0)},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(s(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},i.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=i.resolve(t).substr(1),e=i.resolve(e).substr(1);for(var s=r(t.split("/")),n=r(e.split("/")),a=Math.min(s.length,n.length),o=a,c=0;c<a;c++)if(s[c]!==n[c]){o=c;break}var h=[];for(c=o;c<s.length;c++)h.push("..");return(h=h.concat(n.slice(o))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),i=47===e,r=-1,s=!0,n=t.length-1;n>=1;--n)if(47===(e=t.charCodeAt(n))){if(!s){r=n;break}}else s=!1;return-1===r?i?"/":".":i&&1===r?"/":t.slice(0,r)},i.basename=function(t,e){var i=r(t);return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,i=0,r=-1,s=!0,n=0,a=t.length-1;a>=0;--a){var o=t.charCodeAt(a);if(47!==o)-1===r&&(s=!1,r=a+1),46===o?-1===e?e=a:1!==n&&(n=1):-1!==e&&(n=-1);else if(!s){i=a+1;break}}return-1===e||-1===r||0===n||1===n&&e===r-1&&e===i+1?"":t.slice(e,r)};var n=function(t,e,i){return t.substr(e,i)}}).call(this,t("_process"))},{_process:5}],5:[function(t,e,i){var r,s,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}function h(t){if(s===clearTimeout)return clearTimeout(t);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(t);try{return s(t)}catch(e){try{return s.call(null,t)}catch(e){return s.call(this,t)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{s="function"==typeof clearTimeout?clearTimeout:o}catch(t){s=o}}();var l,p=[],u=!1,d=-1;function f(){u&&l&&(u=!1,l.length?p=l.concat(p):d=-1,p.length&&_())}function _(){if(!u){var t=c(f);u=!0;for(var e=p.length;e;){for(l=p,p=[];++d<e;)l&&l[d].run();d=-1,e=p.length}l=null,u=!1,h(t)}}function m(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];p.push(new m(t,e)),1!==p.length||u||c(_)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],6:[function(t,e,i){e.exports={name:"ejs",description:"Embedded JavaScript templates",keywords:["template","engine","ejs"],version:"3.1.9",author:"Matthew Eernisse <mde@fleegix.org> (http://fleegix.org)",license:"Apache-2.0",bin:{ejs:"./bin/cli.js"},main:"./lib/ejs.js",jsdelivr:"ejs.min.js",unpkg:"ejs.min.js",repository:{type:"git",url:"git://github.com/mde/ejs.git"},bugs:"https://github.com/mde/ejs/issues",homepage:"https://github.com/mde/ejs",dependencies:{jake:"^10.8.5"},devDependencies:{browserify:"^16.5.1",eslint:"^6.8.0","git-directory-deploy":"^1.5.1",jsdoc:"^4.0.2","lru-cache":"^4.0.1",mocha:"^10.2.0","uglify-js":"^3.3.16"},engines:{node:">=0.10.0"},scripts:{test:"npx jake test"}}},{}]},{},[1])(1)},7898:(t,e,i)=>{e.UINT32=i(3122),e.UINT64=i(174)},3122:function(t,e){var i;!function(r){s(Math.pow(36,5)),s(Math.pow(16,7)),s(Math.pow(10,9)),s(Math.pow(2,30)),s(36),s(16),s(10),s(2);function s(t,e){return this instanceof s?(this._low=0,this._high=0,this.remainder=null,void 0===e?a.call(this,t):"string"==typeof t?o.call(this,t,e):void n.call(this,t,e)):new s(t,e)}function n(t,e){return this._low=0|t,this._high=0|e,this}function a(t){return this._low=65535&t,this._high=t>>>16,this}function o(t,e){var i=parseInt(t,e||10);return this._low=65535&i,this._high=i>>>16,this}s.prototype.fromBits=n,s.prototype.fromNumber=a,s.prototype.fromString=o,s.prototype.toNumber=function(){return 65536*this._high+this._low},s.prototype.toString=function(t){return this.toNumber().toString(t||10)},s.prototype.add=function(t){var e=this._low+t._low,i=e>>>16;return i+=this._high+t._high,this._low=65535&e,this._high=65535&i,this},s.prototype.subtract=function(t){return this.add(t.clone().negate())},s.prototype.multiply=function(t){var e,i,r=this._high,s=this._low,n=t._high,a=t._low;return e=(i=s*a)>>>16,e+=r*a,e&=65535,e+=s*n,this._low=65535&i,this._high=65535&e,this},s.prototype.div=function(t){if(0==t._low&&0==t._high)throw Error("division by zero");if(0==t._high&&1==t._low)return this.remainder=new s(0),this;if(t.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(t))return this.remainder=new s(0),this._low=1,this._high=0,this;for(var e=t.clone(),i=-1;!this.lt(e);)e.shiftLeft(1,!0),i++;for(this.remainder=this.clone(),this._low=0,this._high=0;i>=0;i--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),i>=16?this._high|=1<<i-16:this._low|=1<<i);return this},s.prototype.negate=function(){var t=1+(65535&~this._low);return this._low=65535&t,this._high=~this._high+(t>>>16)&65535,this},s.prototype.equals=s.prototype.eq=function(t){return this._low==t._low&&this._high==t._high},s.prototype.greaterThan=s.prototype.gt=function(t){return this._high>t._high||!(this._high<t._high)&&this._low>t._low},s.prototype.lessThan=s.prototype.lt=function(t){return this._high<t._high||!(this._high>t._high)&&this._low<t._low},s.prototype.or=function(t){return this._low|=t._low,this._high|=t._high,this},s.prototype.and=function(t){return this._low&=t._low,this._high&=t._high,this},s.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},s.prototype.xor=function(t){return this._low^=t._low,this._high^=t._high,this},s.prototype.shiftRight=s.prototype.shiftr=function(t){return t>16?(this._low=this._high>>t-16,this._high=0):16==t?(this._low=this._high,this._high=0):(this._low=this._low>>t|this._high<<16-t&65535,this._high>>=t),this},s.prototype.shiftLeft=s.prototype.shiftl=function(t,e){return t>16?(this._high=this._low<<t-16,this._low=0,e||(this._high&=65535)):16==t?(this._high=this._low,this._low=0):(this._high=this._high<<t|this._low>>16-t,this._low=this._low<<t&65535,e||(this._high&=65535)),this},s.prototype.rotateLeft=s.prototype.rotl=function(t){var e=this._high<<16|this._low;return e=e<<t|e>>>32-t,this._low=65535&e,this._high=e>>>16,this},s.prototype.rotateRight=s.prototype.rotr=function(t){var e=this._high<<16|this._low;return e=e>>>t|e<<32-t,this._low=65535&e,this._high=e>>>16,this},s.prototype.clone=function(){return new s(this._low,this._high)},void 0===(i=function(){return s}.apply(e,[]))||(t.exports=i)}()},174:function(t,e){var i;!function(r){var s={16:a(Math.pow(16,5)),10:a(Math.pow(10,5)),2:a(Math.pow(2,5))},n={16:a(16),10:a(10),2:a(2)};function a(t,e,i,r){return this instanceof a?(this.remainder=null,"string"==typeof t?h.call(this,t,e):void 0===e?c.call(this,t):void o.apply(this,arguments)):new a(t,e,i,r)}function o(t,e,i,r){return void 0===i?(this._a00=65535&t,this._a16=t>>>16,this._a32=65535&e,this._a48=e>>>16,this):(this._a00=0|t,this._a16=0|e,this._a32=0|i,this._a48=0|r,this)}function c(t){return this._a00=65535&t,this._a16=t>>>16,this._a32=0,this._a48=0,this}function h(t,e){e=e||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var i=s[e]||new a(Math.pow(e,5)),r=0,n=t.length;r<n;r+=5){var o=Math.min(5,n-r),c=parseInt(t.slice(r,r+o),e);this.multiply(o<5?new a(Math.pow(e,o)):i).add(new a(c))}return this}a.prototype.fromBits=o,a.prototype.fromNumber=c,a.prototype.fromString=h,a.prototype.toNumber=function(){return 65536*this._a16+this._a00},a.prototype.toString=function(t){var e=n[t=t||10]||new a(t);if(!this.gt(e))return this.toNumber().toString(t);for(var i=this.clone(),r=new Array(64),s=63;s>=0&&(i.div(e),r[s]=i.remainder.toNumber().toString(t),i.gt(e));s--);return r[s-1]=i.toNumber().toString(t),r.join("")},a.prototype.add=function(t){var e=this._a00+t._a00,i=e>>>16,r=(i+=this._a16+t._a16)>>>16,s=(r+=this._a32+t._a32)>>>16;return s+=this._a48+t._a48,this._a00=65535&e,this._a16=65535&i,this._a32=65535&r,this._a48=65535&s,this},a.prototype.subtract=function(t){return this.add(t.clone().negate())},a.prototype.multiply=function(t){var e=this._a00,i=this._a16,r=this._a32,s=this._a48,n=t._a00,a=t._a16,o=t._a32,c=e*n,h=c>>>16,l=(h+=e*a)>>>16;h&=65535,l+=(h+=i*n)>>>16;var p=(l+=e*o)>>>16;return l&=65535,p+=(l+=i*a)>>>16,l&=65535,p+=(l+=r*n)>>>16,p+=e*t._a48,p&=65535,p+=i*o,p&=65535,p+=r*a,p&=65535,p+=s*n,this._a00=65535&c,this._a16=65535&h,this._a32=65535&l,this._a48=65535&p,this},a.prototype.div=function(t){if(0==t._a16&&0==t._a32&&0==t._a48){if(0==t._a00)throw Error("division by zero");if(1==t._a00)return this.remainder=new a(0),this}if(t.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(t))return this.remainder=new a(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var e=t.clone(),i=-1;!this.lt(e);)e.shiftLeft(1,!0),i++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;i>=0;i--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),i>=48?this._a48|=1<<i-48:i>=32?this._a32|=1<<i-32:i>=16?this._a16|=1<<i-16:this._a00|=1<<i);return this},a.prototype.negate=function(){var t=1+(65535&~this._a00);return this._a00=65535&t,t=(65535&~this._a16)+(t>>>16),this._a16=65535&t,t=(65535&~this._a32)+(t>>>16),this._a32=65535&t,this._a48=~this._a48+(t>>>16)&65535,this},a.prototype.equals=a.prototype.eq=function(t){return this._a48==t._a48&&this._a00==t._a00&&this._a32==t._a32&&this._a16==t._a16},a.prototype.greaterThan=a.prototype.gt=function(t){return this._a48>t._a48||!(this._a48<t._a48)&&(this._a32>t._a32||!(this._a32<t._a32)&&(this._a16>t._a16||!(this._a16<t._a16)&&this._a00>t._a00))},a.prototype.lessThan=a.prototype.lt=function(t){return this._a48<t._a48||!(this._a48>t._a48)&&(this._a32<t._a32||!(this._a32>t._a32)&&(this._a16<t._a16||!(this._a16>t._a16)&&this._a00<t._a00))},a.prototype.or=function(t){return this._a00|=t._a00,this._a16|=t._a16,this._a32|=t._a32,this._a48|=t._a48,this},a.prototype.and=function(t){return this._a00&=t._a00,this._a16&=t._a16,this._a32&=t._a32,this._a48&=t._a48,this},a.prototype.xor=function(t){return this._a00^=t._a00,this._a16^=t._a16,this._a32^=t._a32,this._a48^=t._a48,this},a.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},a.prototype.shiftRight=a.prototype.shiftr=function(t){return(t%=64)>=48?(this._a00=this._a48>>t-48,this._a16=0,this._a32=0,this._a48=0):t>=32?(t-=32,this._a00=65535&(this._a32>>t|this._a48<<16-t),this._a16=this._a48>>t&65535,this._a32=0,this._a48=0):t>=16?(t-=16,this._a00=65535&(this._a16>>t|this._a32<<16-t),this._a16=65535&(this._a32>>t|this._a48<<16-t),this._a32=this._a48>>t&65535,this._a48=0):(this._a00=65535&(this._a00>>t|this._a16<<16-t),this._a16=65535&(this._a16>>t|this._a32<<16-t),this._a32=65535&(this._a32>>t|this._a48<<16-t),this._a48=this._a48>>t&65535),this},a.prototype.shiftLeft=a.prototype.shiftl=function(t,e){return(t%=64)>=48?(this._a48=this._a00<<t-48,this._a32=0,this._a16=0,this._a00=0):t>=32?(t-=32,this._a48=this._a16<<t|this._a00>>16-t,this._a32=this._a00<<t&65535,this._a16=0,this._a00=0):t>=16?(t-=16,this._a48=this._a32<<t|this._a16>>16-t,this._a32=65535&(this._a16<<t|this._a00>>16-t),this._a16=this._a00<<t&65535,this._a00=0):(this._a48=this._a48<<t|this._a32>>16-t,this._a32=65535&(this._a32<<t|this._a16>>16-t),this._a16=65535&(this._a16<<t|this._a00>>16-t),this._a00=this._a00<<t&65535),e||(this._a48&=65535),this},a.prototype.rotateLeft=a.prototype.rotl=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var i=this._a48<<16|this._a32,r=this._a16<<16|this._a00,s=i<<t|r>>>32-t,n=r<<t|i>>>32-t;return this._a00=65535&n,this._a16=n>>>16,this._a32=65535&s,this._a48=s>>>16,this},a.prototype.rotateRight=a.prototype.rotr=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var i=this._a48<<16|this._a32,r=this._a16<<16|this._a00,s=i>>>t|r<<32-t,n=r>>>t|i<<32-t;return this._a00=65535&n,this._a16=n>>>16,this._a32=65535&s,this._a48=s>>>16,this},a.prototype.clone=function(){return new a(this._a00,this._a16,this._a32,this._a48)},void 0===(i=function(){return a}.apply(e,[]))||(t.exports=i)}()},5233:(module,__unused_webpack_exports,__webpack_require__)=>{var aparse=__webpack_require__(7921).parse;function parse(t,e){return e||(e={}),aparse(t,e)}function errorInfo(t,e,i){try{parse(t,i)}catch(i){return new ParseError(i,t,e)}}function ParseError(t,e,i){SyntaxError.call(this),this.message=t.message.replace(/\s+\(\d+:\d+\)$/,""),this.line=t.loc.line,this.column=t.loc.column+1,this.annotated="\n"+(i||"(anonymous file)")+":"+this.line+"\n"+e.split("\n")[this.line-1]+"\n"+Array(this.column).join(" ")+"^\nParseError: "+this.message}module.exports=function(src,file,opts){"string"!=typeof src&&(src=String(src));try{return void eval('throw "STOP"; (function () { '+src+"\n})()")}catch(t){if("STOP"===t)return;return"SyntaxError"!==t.constructor.name?t:errorInfo(src,file,opts)}},ParseError.prototype=Object.create(SyntaxError.prototype),ParseError.prototype.toString=function(){return this.annotated},ParseError.prototype.inspect=function(){return this.annotated}},8961:(__unused_webpack_module,exports)=>{var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)e.push(i);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var i=0;i<t.length;i++)e(t[i],i,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,i){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:i})}}catch(t){return function(t,e,i){t[e]=i}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var i=e.contentWindow,r=i.eval,s=i.execScript;!r&&s&&(s.call(i,"null"),r=i.eval),forEach(Object_keys(t),(function(e){i[e]=t[e]})),forEach(globals,(function(e){t[e]&&(i[e]=t[e])}));var n=Object_keys(i),a=r.call(i,this.code);return forEach(Object_keys(i),(function(e){(e in t||-1===indexOf(n,e))&&(t[e]=i[e])})),forEach(globals,(function(e){e in t||defineProp(t,e,i[e])})),document.body.removeChild(e),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),i=this.runInContext(e);return t&&forEach(Object_keys(e),(function(i){t[i]=e[i]})),i},forEach(Object_keys(Script.prototype),(function(t){exports[t]=Script[t]=function(e){var i=Script(e);return i[t].apply(i,[].slice.call(arguments,1))}})),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),(function(i){e[i]=t[i]})),e}},7510:t=>{t.exports=function(){for(var t={},i=0;i<arguments.length;i++){var r=arguments[i];for(var s in r)e.call(r,s)&&(t[s]=r[s])}return t};var e=Object.prototype.hasOwnProperty},9134:(t,e,i)=>{t.exports={h32:i(2492),h64:i(7470)}},2492:(t,e,i)=>{var r=i(7898).UINT32;r.prototype.xxh_update=function(t,e){var i,r,a=n._low,o=n._high;i=(r=t*a)>>>16,i+=e*a,i&=65535,i+=t*o;var c=this._low+(65535&r),h=c>>>16,l=(h+=this._high+(65535&i))<<16|65535&c;h=(l=l<<13|l>>>19)>>>16,i=(r=(c=65535&l)*(a=s._low))>>>16,i+=h*a,i&=65535,i+=c*(o=s._high),this._low=65535&r,this._high=65535&i};var s=r("2654435761"),n=r("2246822519"),a=r("3266489917"),o=r("668265263"),c=r("374761393");function h(){return 2==arguments.length?new h(arguments[1]).update(arguments[0]).digest():this instanceof h?void l.call(this,arguments[0]):new h(arguments[0])}function l(t){return this.seed=t instanceof r?t.clone():r(t),this.v1=this.seed.clone().add(s).add(n),this.v2=this.seed.clone().add(n),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(s),this.total_len=0,this.memsize=0,this.memory=null,this}h.prototype.init=l,h.prototype.update=function(t){var e,i="string"==typeof t;i&&(t=function(t){for(var e=[],i=0,r=t.length;i<r;i++){var s=t.charCodeAt(i);s<128?e.push(s):s<2048?e.push(192|s>>6,128|63&s):s<55296||s>=57344?e.push(224|s>>12,128|s>>6&63,128|63&s):(i++,s=65536+((1023&s)<<10|1023&t.charCodeAt(i)),e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s))}return new Uint8Array(e)}(t),i=!1,e=!0),"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&(e=!0,t=new Uint8Array(t));var r=0,s=t.length,n=r+s;if(0==s)return this;if(this.total_len+=s,0==this.memsize&&(this.memory=i?"":e?new Uint8Array(16):new Buffer(16)),this.memsize+s<16)return i?this.memory+=t:e?this.memory.set(t.subarray(0,s),this.memsize):t.copy(this.memory,this.memsize,0,s),this.memsize+=s,this;if(this.memsize>0){i?this.memory+=t.slice(0,16-this.memsize):e?this.memory.set(t.subarray(0,16-this.memsize),this.memsize):t.copy(this.memory,this.memsize,0,16-this.memsize);var a=0;i?(this.v1.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v2.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v3.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v4.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2))):(this.v1.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v2.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v3.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v4.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2])),r+=16-this.memsize,this.memsize=0,i&&(this.memory="")}if(r<=n-16){var o=n-16;do{i?(this.v1.xxh_update(t.charCodeAt(r+1)<<8|t.charCodeAt(r),t.charCodeAt(r+3)<<8|t.charCodeAt(r+2)),r+=4,this.v2.xxh_update(t.charCodeAt(r+1)<<8|t.charCodeAt(r),t.charCodeAt(r+3)<<8|t.charCodeAt(r+2)),r+=4,this.v3.xxh_update(t.charCodeAt(r+1)<<8|t.charCodeAt(r),t.charCodeAt(r+3)<<8|t.charCodeAt(r+2)),r+=4,this.v4.xxh_update(t.charCodeAt(r+1)<<8|t.charCodeAt(r),t.charCodeAt(r+3)<<8|t.charCodeAt(r+2))):(this.v1.xxh_update(t[r+1]<<8|t[r],t[r+3]<<8|t[r+2]),r+=4,this.v2.xxh_update(t[r+1]<<8|t[r],t[r+3]<<8|t[r+2]),r+=4,this.v3.xxh_update(t[r+1]<<8|t[r],t[r+3]<<8|t[r+2]),r+=4,this.v4.xxh_update(t[r+1]<<8|t[r],t[r+3]<<8|t[r+2])),r+=4}while(r<=o)}return r<n&&(i?this.memory+=t.slice(r):e?this.memory.set(t.subarray(r,n),this.memsize):t.copy(this.memory,this.memsize,r,n),this.memsize=n-r),this},h.prototype.digest=function(){var t,e,i=this.memory,h="string"==typeof i,l=0,p=this.memsize,u=new r;for((t=this.total_len>=16?this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):this.seed.clone().add(c)).add(u.fromNumber(this.total_len));l<=p-4;)h?u.fromBits(i.charCodeAt(l+1)<<8|i.charCodeAt(l),i.charCodeAt(l+3)<<8|i.charCodeAt(l+2)):u.fromBits(i[l+1]<<8|i[l],i[l+3]<<8|i[l+2]),t.add(u.multiply(a)).rotl(17).multiply(o),l+=4;for(;l<p;)u.fromBits(h?i.charCodeAt(l++):i[l++],0),t.add(u.multiply(c)).rotl(11).multiply(s);return e=t.clone().shiftRight(15),t.xor(e).multiply(n),e=t.clone().shiftRight(13),t.xor(e).multiply(a),e=t.clone().shiftRight(16),t.xor(e),this.init(this.seed),t},t.exports=h},7470:(t,e,i)=>{var r=i(7898).UINT64,s=r("11400714785074694791"),n=r("14029467366897019727"),a=r("1609587929392839161"),o=r("9650029242287828579"),c=r("2870177450012600261");function h(){return 2==arguments.length?new h(arguments[1]).update(arguments[0]).digest():this instanceof h?void l.call(this,arguments[0]):new h(arguments[0])}function l(t){return this.seed=t instanceof r?t.clone():r(t),this.v1=this.seed.clone().add(s).add(n),this.v2=this.seed.clone().add(n),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(s),this.total_len=0,this.memsize=0,this.memory=null,this}h.prototype.init=l,h.prototype.update=function(t){var e,i="string"==typeof t;i&&(t=function(t){for(var e=[],i=0,r=t.length;i<r;i++){var s=t.charCodeAt(i);s<128?e.push(s):s<2048?e.push(192|s>>6,128|63&s):s<55296||s>=57344?e.push(224|s>>12,128|s>>6&63,128|63&s):(i++,s=65536+((1023&s)<<10|1023&t.charCodeAt(i)),e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s))}return new Uint8Array(e)}(t),i=!1,e=!0),"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&(e=!0,t=new Uint8Array(t));var a=0,o=t.length,c=a+o;if(0==o)return this;if(this.total_len+=o,0==this.memsize&&(this.memory=i?"":e?new Uint8Array(32):new Buffer(32)),this.memsize+o<32)return i?this.memory+=t:e?this.memory.set(t.subarray(0,o),this.memsize):t.copy(this.memory,this.memsize,0,o),this.memsize+=o,this;if(this.memsize>0){i?this.memory+=t.slice(0,32-this.memsize):e?this.memory.set(t.subarray(0,32-this.memsize),this.memsize):t.copy(this.memory,this.memsize,0,32-this.memsize);var h=0;if(i)p=r(this.memory.charCodeAt(h+1)<<8|this.memory.charCodeAt(h),this.memory.charCodeAt(h+3)<<8|this.memory.charCodeAt(h+2),this.memory.charCodeAt(h+5)<<8|this.memory.charCodeAt(h+4),this.memory.charCodeAt(h+7)<<8|this.memory.charCodeAt(h+6)),this.v1.add(p.multiply(n)).rotl(31).multiply(s),h+=8,p=r(this.memory.charCodeAt(h+1)<<8|this.memory.charCodeAt(h),this.memory.charCodeAt(h+3)<<8|this.memory.charCodeAt(h+2),this.memory.charCodeAt(h+5)<<8|this.memory.charCodeAt(h+4),this.memory.charCodeAt(h+7)<<8|this.memory.charCodeAt(h+6)),this.v2.add(p.multiply(n)).rotl(31).multiply(s),h+=8,p=r(this.memory.charCodeAt(h+1)<<8|this.memory.charCodeAt(h),this.memory.charCodeAt(h+3)<<8|this.memory.charCodeAt(h+2),this.memory.charCodeAt(h+5)<<8|this.memory.charCodeAt(h+4),this.memory.charCodeAt(h+7)<<8|this.memory.charCodeAt(h+6)),this.v3.add(p.multiply(n)).rotl(31).multiply(s),h+=8,p=r(this.memory.charCodeAt(h+1)<<8|this.memory.charCodeAt(h),this.memory.charCodeAt(h+3)<<8|this.memory.charCodeAt(h+2),this.memory.charCodeAt(h+5)<<8|this.memory.charCodeAt(h+4),this.memory.charCodeAt(h+7)<<8|this.memory.charCodeAt(h+6)),this.v4.add(p.multiply(n)).rotl(31).multiply(s);else p=r(this.memory[h+1]<<8|this.memory[h],this.memory[h+3]<<8|this.memory[h+2],this.memory[h+5]<<8|this.memory[h+4],this.memory[h+7]<<8|this.memory[h+6]),this.v1.add(p.multiply(n)).rotl(31).multiply(s),h+=8,p=r(this.memory[h+1]<<8|this.memory[h],this.memory[h+3]<<8|this.memory[h+2],this.memory[h+5]<<8|this.memory[h+4],this.memory[h+7]<<8|this.memory[h+6]),this.v2.add(p.multiply(n)).rotl(31).multiply(s),h+=8,p=r(this.memory[h+1]<<8|this.memory[h],this.memory[h+3]<<8|this.memory[h+2],this.memory[h+5]<<8|this.memory[h+4],this.memory[h+7]<<8|this.memory[h+6]),this.v3.add(p.multiply(n)).rotl(31).multiply(s),h+=8,p=r(this.memory[h+1]<<8|this.memory[h],this.memory[h+3]<<8|this.memory[h+2],this.memory[h+5]<<8|this.memory[h+4],this.memory[h+7]<<8|this.memory[h+6]),this.v4.add(p.multiply(n)).rotl(31).multiply(s);a+=32-this.memsize,this.memsize=0,i&&(this.memory="")}if(a<=c-32){var l=c-32;do{var p;if(i)p=r(t.charCodeAt(a+1)<<8|t.charCodeAt(a),t.charCodeAt(a+3)<<8|t.charCodeAt(a+2),t.charCodeAt(a+5)<<8|t.charCodeAt(a+4),t.charCodeAt(a+7)<<8|t.charCodeAt(a+6)),this.v1.add(p.multiply(n)).rotl(31).multiply(s),a+=8,p=r(t.charCodeAt(a+1)<<8|t.charCodeAt(a),t.charCodeAt(a+3)<<8|t.charCodeAt(a+2),t.charCodeAt(a+5)<<8|t.charCodeAt(a+4),t.charCodeAt(a+7)<<8|t.charCodeAt(a+6)),this.v2.add(p.multiply(n)).rotl(31).multiply(s),a+=8,p=r(t.charCodeAt(a+1)<<8|t.charCodeAt(a),t.charCodeAt(a+3)<<8|t.charCodeAt(a+2),t.charCodeAt(a+5)<<8|t.charCodeAt(a+4),t.charCodeAt(a+7)<<8|t.charCodeAt(a+6)),this.v3.add(p.multiply(n)).rotl(31).multiply(s),a+=8,p=r(t.charCodeAt(a+1)<<8|t.charCodeAt(a),t.charCodeAt(a+3)<<8|t.charCodeAt(a+2),t.charCodeAt(a+5)<<8|t.charCodeAt(a+4),t.charCodeAt(a+7)<<8|t.charCodeAt(a+6)),this.v4.add(p.multiply(n)).rotl(31).multiply(s);else p=r(t[a+1]<<8|t[a],t[a+3]<<8|t[a+2],t[a+5]<<8|t[a+4],t[a+7]<<8|t[a+6]),this.v1.add(p.multiply(n)).rotl(31).multiply(s),p=r(t[(a+=8)+1]<<8|t[a],t[a+3]<<8|t[a+2],t[a+5]<<8|t[a+4],t[a+7]<<8|t[a+6]),this.v2.add(p.multiply(n)).rotl(31).multiply(s),p=r(t[(a+=8)+1]<<8|t[a],t[a+3]<<8|t[a+2],t[a+5]<<8|t[a+4],t[a+7]<<8|t[a+6]),this.v3.add(p.multiply(n)).rotl(31).multiply(s),p=r(t[(a+=8)+1]<<8|t[a],t[a+3]<<8|t[a+2],t[a+5]<<8|t[a+4],t[a+7]<<8|t[a+6]),this.v4.add(p.multiply(n)).rotl(31).multiply(s);a+=8}while(a<=l)}return a<c&&(i?this.memory+=t.slice(a):e?this.memory.set(t.subarray(a,c),this.memsize):t.copy(this.memory,this.memsize,a,c),this.memsize=c-a),this},h.prototype.digest=function(){var t,e,i=this.memory,h="string"==typeof i,l=0,p=this.memsize,u=new r;for(this.total_len>=32?((t=this.v1.clone().rotl(1)).add(this.v2.clone().rotl(7)),t.add(this.v3.clone().rotl(12)),t.add(this.v4.clone().rotl(18)),t.xor(this.v1.multiply(n).rotl(31).multiply(s)),t.multiply(s).add(o),t.xor(this.v2.multiply(n).rotl(31).multiply(s)),t.multiply(s).add(o),t.xor(this.v3.multiply(n).rotl(31).multiply(s)),t.multiply(s).add(o),t.xor(this.v4.multiply(n).rotl(31).multiply(s)),t.multiply(s).add(o)):t=this.seed.clone().add(c),t.add(u.fromNumber(this.total_len));l<=p-8;)h?u.fromBits(i.charCodeAt(l+1)<<8|i.charCodeAt(l),i.charCodeAt(l+3)<<8|i.charCodeAt(l+2),i.charCodeAt(l+5)<<8|i.charCodeAt(l+4),i.charCodeAt(l+7)<<8|i.charCodeAt(l+6)):u.fromBits(i[l+1]<<8|i[l],i[l+3]<<8|i[l+2],i[l+5]<<8|i[l+4],i[l+7]<<8|i[l+6]),u.multiply(n).rotl(31).multiply(s),t.xor(u).rotl(27).multiply(s).add(o),l+=8;for(l+4<=p&&(h?u.fromBits(i.charCodeAt(l+1)<<8|i.charCodeAt(l),i.charCodeAt(l+3)<<8|i.charCodeAt(l+2),0,0):u.fromBits(i[l+1]<<8|i[l],i[l+3]<<8|i[l+2],0,0),t.xor(u.multiply(s)).rotl(23).multiply(n).add(a),l+=4);l<p;)u.fromBits(h?i.charCodeAt(l++):i[l++],0,0,0),t.xor(u.multiply(c)).rotl(11).multiply(s);return e=t.clone().shiftRight(33),t.xor(e).multiply(n),e=t.clone().shiftRight(29),t.xor(e).multiply(a),e=t.clone().shiftRight(32),t.xor(e),this.init(this.seed),t},t.exports=h},3949:t=>{t.exports=__WEBPACK_EXTERNAL_MODULE_https_esm_sh_faker_js_faker_9_7_0_b1cbf658__},9306:(t,e,i)=>{var r=i(4901),s=i(6823),n=TypeError;t.exports=function(t){if(r(t))return t;throw new n(s(t)+" is not a function")}},3506:(t,e,i)=>{var r=i(3925),s=String,n=TypeError;t.exports=function(t){if(r(t))return t;throw new n("Can't set "+s(t)+" as a prototype")}},6469:(t,e,i)=>{var r=i(8227),s=i(2360),n=i(4913).f,a=r("unscopables"),o=Array.prototype;void 0===o[a]&&n(o,a,{configurable:!0,value:s(null)}),t.exports=function(t){o[a][t]=!0}},7829:(t,e,i)=>{var r=i(8183).charAt;t.exports=function(t,e,i){return e+(i?r(t,e).length:1)}},8551:(t,e,i)=>{var r=i(34),s=String,n=TypeError;t.exports=function(t){if(r(t))return t;throw new n(s(t)+" is not an object")}},9617:(t,e,i)=>{var r=i(5397),s=i(5610),n=i(6198),a=function(t){return function(e,i,a){var o=r(e),c=n(o);if(0===c)return!t&&-1;var h,l=s(a,c);if(t&&i!=i){for(;c>l;)if((h=o[l++])!=h)return!0}else for(;c>l;l++)if((t||l in o)&&o[l]===i)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},4598:(t,e,i)=>{var r=i(9039);t.exports=function(t,e){var i=[][t];return!!i&&r((function(){i.call(null,e||function(){return 1},1)}))}},7680:(t,e,i)=>{var r=i(9504);t.exports=r([].slice)},4488:(t,e,i)=>{var r=i(7680),s=Math.floor,n=function(t,e){var i=t.length;if(i<8)for(var a,o,c=1;c<i;){for(o=c,a=t[c];o&&e(t[o-1],a)>0;)t[o]=t[--o];o!==c++&&(t[o]=a)}else for(var h=s(i/2),l=n(r(t,0,h),e),p=n(r(t,h),e),u=l.length,d=p.length,f=0,_=0;f<u||_<d;)t[f+_]=f<u&&_<d?e(l[f],p[_])<=0?l[f++]:p[_++]:f<u?l[f++]:p[_++];return t};t.exports=n},2195:(t,e,i)=>{var r=i(9504),s=r({}.toString),n=r("".slice);t.exports=function(t){return n(s(t),8,-1)}},6955:(t,e,i)=>{var r=i(2140),s=i(4901),n=i(2195),a=i(8227)("toStringTag"),o=Object,c="Arguments"===n(function(){return arguments}());t.exports=r?n:function(t){var e,i,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=o(t),a))?i:c?n(e):"Object"===(r=n(e))&&s(e.callee)?"Arguments":r}},7740:(t,e,i)=>{var r=i(9297),s=i(5031),n=i(7347),a=i(4913);t.exports=function(t,e,i){for(var o=s(e),c=a.f,h=n.f,l=0;l<o.length;l++){var p=o[l];r(t,p)||i&&r(i,p)||c(t,p,h(e,p))}}},2211:(t,e,i)=>{var r=i(9039);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},2529:t=>{t.exports=function(t,e){return{value:t,done:e}}},6699:(t,e,i)=>{var r=i(3724),s=i(4913),n=i(6980);t.exports=r?function(t,e,i){return s.f(t,e,n(1,i))}:function(t,e,i){return t[e]=i,t}},6980:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2106:(t,e,i)=>{var r=i(283),s=i(4913);t.exports=function(t,e,i){return i.get&&r(i.get,e,{getter:!0}),i.set&&r(i.set,e,{setter:!0}),s.f(t,e,i)}},6840:(t,e,i)=>{var r=i(4901),s=i(4913),n=i(283),a=i(9433);t.exports=function(t,e,i,o){o||(o={});var c=o.enumerable,h=void 0!==o.name?o.name:e;if(r(i)&&n(i,h,o),o.global)c?t[e]=i:a(e,i);else{try{o.unsafe?t[e]&&(c=!0):delete t[e]}catch(t){}c?t[e]=i:s.f(t,e,{value:i,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return t}},9433:(t,e,i)=>{var r=i(4576),s=Object.defineProperty;t.exports=function(t,e){try{s(r,t,{value:e,configurable:!0,writable:!0})}catch(i){r[t]=e}return e}},4606:(t,e,i)=>{var r=i(6823),s=TypeError;t.exports=function(t,e){if(!delete t[e])throw new s("Cannot delete property "+r(e)+" of "+r(t))}},3724:(t,e,i)=>{var r=i(9039);t.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4055:(t,e,i)=>{var r=i(4576),s=i(34),n=r.document,a=s(n)&&s(n.createElement);t.exports=function(t){return a?n.createElement(t):{}}},7400:t=>{t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9296:(t,e,i)=>{var r=i(4055)("span").classList,s=r&&r.constructor&&r.constructor.prototype;t.exports=s===Object.prototype?void 0:s},8727:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3709:(t,e,i)=>{var r=i(2839).match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},3763:(t,e,i)=>{var r=i(2839);t.exports=/MSIE|Trident/.test(r)},2839:(t,e,i)=>{var r=i(4576).navigator,s=r&&r.userAgent;t.exports=s?String(s):""},9519:(t,e,i)=>{var r,s,n=i(4576),a=i(2839),o=n.process,c=n.Deno,h=o&&o.versions||c&&c.version,l=h&&h.v8;l&&(s=(r=l.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!s&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(s=+r[1]),t.exports=s},3607:(t,e,i)=>{var r=i(2839).match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},6518:(t,e,i)=>{var r=i(4576),s=i(7347).f,n=i(6699),a=i(6840),o=i(9433),c=i(7740),h=i(2796);t.exports=function(t,e){var i,l,p,u,d,f=t.target,_=t.global,m=t.stat;if(i=_?r:m?r[f]||o(f,{}):r[f]&&r[f].prototype)for(l in e){if(u=e[l],p=t.dontCallGetSet?(d=s(i,l))&&d.value:i[l],!h(_?l:f+(m?".":"#")+l,t.forced)&&void 0!==p){if(typeof u==typeof p)continue;c(u,p)}(t.sham||p&&p.sham)&&n(u,"sham",!0),a(i,l,u,t)}}},9039:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},9228:(t,e,i)=>{i(7495);var r=i(9565),s=i(6840),n=i(7323),a=i(9039),o=i(8227),c=i(6699),h=o("species"),l=RegExp.prototype;t.exports=function(t,e,i,p){var u=o(t),d=!a((function(){var e={};return e[u]=function(){return 7},7!==""[t](e)})),f=d&&!a((function(){var e=!1,i=/a/;return"split"===t&&((i={}).constructor={},i.constructor[h]=function(){return i},i.flags="",i[u]=/./[u]),i.exec=function(){return e=!0,null},i[u](""),!e}));if(!d||!f||i){var _=/./[u],m=e(u,""[t],(function(t,e,i,s,a){var o=e.exec;return o===n||o===l.exec?d&&!a?{done:!0,value:r(_,e,i,s)}:{done:!0,value:r(t,i,e,s)}:{done:!1}}));s(String.prototype,t,m[0]),s(l,u,m[1])}p&&c(l[u],"sham",!0)}},8745:(t,e,i)=>{var r=i(616),s=Function.prototype,n=s.apply,a=s.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(n):function(){return a.apply(n,arguments)})},616:(t,e,i)=>{var r=i(9039);t.exports=!r((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},9565:(t,e,i)=>{var r=i(616),s=Function.prototype.call;t.exports=r?s.bind(s):function(){return s.apply(s,arguments)}},350:(t,e,i)=>{var r=i(3724),s=i(9297),n=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,o=s(n,"name"),c=o&&"something"===function(){}.name,h=o&&(!r||r&&a(n,"name").configurable);t.exports={EXISTS:o,PROPER:c,CONFIGURABLE:h}},6706:(t,e,i)=>{var r=i(9504),s=i(9306);t.exports=function(t,e,i){try{return r(s(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(t){}}},9504:(t,e,i)=>{var r=i(616),s=Function.prototype,n=s.call,a=r&&s.bind.bind(n,n);t.exports=r?a:function(t){return function(){return n.apply(t,arguments)}}},7751:(t,e,i)=>{var r=i(4576),s=i(4901);t.exports=function(t,e){return arguments.length<2?(i=r[t],s(i)?i:void 0):r[t]&&r[t][e];var i}},5966:(t,e,i)=>{var r=i(9306),s=i(4117);t.exports=function(t,e){var i=t[e];return s(i)?void 0:r(i)}},2478:(t,e,i)=>{var r=i(9504),s=i(8981),n=Math.floor,a=r("".charAt),o=r("".replace),c=r("".slice),h=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,i,r,p,u){var d=i+t.length,f=r.length,_=l;return void 0!==p&&(p=s(p),_=h),o(u,_,(function(s,o){var h;switch(a(o,0)){case"$":return"$";case"&":return t;case"`":return c(e,0,i);case"'":return c(e,d);case"<":h=p[c(o,1,-1)];break;default:var l=+o;if(0===l)return s;if(l>f){var u=n(l/10);return 0===u?s:u<=f?void 0===r[u-1]?a(o,1):r[u-1]+a(o,1):s}h=r[l-1]}return void 0===h?"":h}))}},4576:function(t,e,i){var r=function(t){return t&&t.Math===Math&&t};t.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof i.g&&i.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:(t,e,i)=>{var r=i(9504),s=i(8981),n=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return n(s(t),e)}},421:t=>{t.exports={}},397:(t,e,i)=>{var r=i(7751);t.exports=r("document","documentElement")},5917:(t,e,i)=>{var r=i(3724),s=i(9039),n=i(4055);t.exports=!r&&!s((function(){return 7!==Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}))},7055:(t,e,i)=>{var r=i(9504),s=i(9039),n=i(2195),a=Object,o=r("".split);t.exports=s((function(){return!a("z").propertyIsEnumerable(0)}))?function(t){return"String"===n(t)?o(t,""):a(t)}:a},3167:(t,e,i)=>{var r=i(4901),s=i(34),n=i(2967);t.exports=function(t,e,i){var a,o;return n&&r(a=e.constructor)&&a!==i&&s(o=a.prototype)&&o!==i.prototype&&n(t,o),t}},3706:(t,e,i)=>{var r=i(9504),s=i(4901),n=i(7629),a=r(Function.toString);s(n.inspectSource)||(n.inspectSource=function(t){return a(t)}),t.exports=n.inspectSource},1181:(t,e,i)=>{var r,s,n,a=i(8622),o=i(4576),c=i(34),h=i(6699),l=i(9297),p=i(7629),u=i(6119),d=i(421),f="Object already initialized",_=o.TypeError,m=o.WeakMap;if(a||p.state){var g=p.state||(p.state=new m);g.get=g.get,g.has=g.has,g.set=g.set,r=function(t,e){if(g.has(t))throw new _(f);return e.facade=t,g.set(t,e),e},s=function(t){return g.get(t)||{}},n=function(t){return g.has(t)}}else{var v=u("state");d[v]=!0,r=function(t,e){if(l(t,v))throw new _(f);return e.facade=t,h(t,v,e),e},s=function(t){return l(t,v)?t[v]:{}},n=function(t){return l(t,v)}}t.exports={set:r,get:s,has:n,enforce:function(t){return n(t)?s(t):r(t,{})},getterFor:function(t){return function(e){var i;if(!c(e)||(i=s(e)).type!==t)throw new _("Incompatible receiver, "+t+" required");return i}}}},4901:t=>{var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},2796:(t,e,i)=>{var r=i(9039),s=i(4901),n=/#|\.prototype\./,a=function(t,e){var i=c[o(t)];return i===l||i!==h&&(s(e)?r(e):!!e)},o=a.normalize=function(t){return String(t).replace(n,".").toLowerCase()},c=a.data={},h=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},4117:t=>{t.exports=function(t){return null==t}},34:(t,e,i)=>{var r=i(4901);t.exports=function(t){return"object"==typeof t?null!==t:r(t)}},3925:(t,e,i)=>{var r=i(34);t.exports=function(t){return r(t)||null===t}},6395:t=>{t.exports=!1},788:(t,e,i)=>{var r=i(34),s=i(2195),n=i(8227)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[n])?!!e:"RegExp"===s(t))}},757:(t,e,i)=>{var r=i(7751),s=i(4901),n=i(1625),a=i(7040),o=Object;t.exports=a?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return s(e)&&n(e.prototype,o(t))}},3994:(t,e,i)=>{var r=i(7657).IteratorPrototype,s=i(2360),n=i(6980),a=i(687),o=i(6269),c=function(){return this};t.exports=function(t,e,i,h){var l=e+" Iterator";return t.prototype=s(r,{next:n(+!h,i)}),a(t,l,!1,!0),o[l]=c,t}},1088:(t,e,i)=>{var r=i(6518),s=i(9565),n=i(6395),a=i(350),o=i(4901),c=i(3994),h=i(2787),l=i(2967),p=i(687),u=i(6699),d=i(6840),f=i(8227),_=i(6269),m=i(7657),g=a.PROPER,v=a.CONFIGURABLE,y=m.IteratorPrototype,x=m.BUGGY_SAFARI_ITERATORS,b=f("iterator"),w="keys",E="values",A="entries",k=function(){return this};t.exports=function(t,e,i,a,f,m,S){c(i,e,a);var C,T,P,N=function(t){if(t===f&&D)return D;if(!x&&t&&t in I)return I[t];switch(t){case w:case E:case A:return function(){return new i(this,t)}}return function(){return new i(this)}},O=e+" Iterator",L=!1,I=t.prototype,R=I[b]||I["@@iterator"]||f&&I[f],D=!x&&R||N(f),j="Array"===e&&I.entries||R;if(j&&(C=h(j.call(new t)))!==Object.prototype&&C.next&&(n||h(C)===y||(l?l(C,y):o(C[b])||d(C,b,k)),p(C,O,!0,!0),n&&(_[O]=k)),g&&f===E&&R&&R.name!==E&&(!n&&v?u(I,"name",E):(L=!0,D=function(){return s(R,this)})),f)if(T={values:N(E),keys:m?D:N(w),entries:N(A)},S)for(P in T)(x||L||!(P in I))&&d(I,P,T[P]);else r({target:e,proto:!0,forced:x||L},T);return n&&!S||I[b]===D||d(I,b,D,{name:f}),_[e]=D,T}},7657:(t,e,i)=>{var r,s,n,a=i(9039),o=i(4901),c=i(34),h=i(2360),l=i(2787),p=i(6840),u=i(8227),d=i(6395),f=u("iterator"),_=!1;[].keys&&("next"in(n=[].keys())?(s=l(l(n)))!==Object.prototype&&(r=s):_=!0),!c(r)||a((function(){var t={};return r[f].call(t)!==t}))?r={}:d&&(r=h(r)),o(r[f])||p(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:_}},6269:t=>{t.exports={}},6198:(t,e,i)=>{var r=i(8014);t.exports=function(t){return r(t.length)}},283:(t,e,i)=>{var r=i(9504),s=i(9039),n=i(4901),a=i(9297),o=i(3724),c=i(350).CONFIGURABLE,h=i(3706),l=i(1181),p=l.enforce,u=l.get,d=String,f=Object.defineProperty,_=r("".slice),m=r("".replace),g=r([].join),v=o&&!s((function(){return 8!==f((function(){}),"length",{value:8}).length})),y=String(String).split("String"),x=t.exports=function(t,e,i){"Symbol("===_(d(e),0,7)&&(e="["+m(d(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!a(t,"name")||c&&t.name!==e)&&(o?f(t,"name",{value:e,configurable:!0}):t.name=e),v&&i&&a(i,"arity")&&t.length!==i.arity&&f(t,"length",{value:i.arity});try{i&&a(i,"constructor")&&i.constructor?o&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=p(t);return a(r,"source")||(r.source=g(y,"string"==typeof e?e:"")),t};Function.prototype.toString=x((function(){return n(this)&&u(this).source||h(this)}),"toString")},741:t=>{var e=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?i:e)(r)}},2360:(t,e,i)=>{var r,s=i(8551),n=i(6801),a=i(8727),o=i(421),c=i(397),h=i(4055),l=i(6119),p="prototype",u="script",d=l("IE_PROTO"),f=function(){},_=function(t){return"<"+u+">"+t+"</"+u+">"},m=function(t){t.write(_("")),t.close();var e=t.parentWindow.Object;return t=null,e},g=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}var t,e,i;g="undefined"!=typeof document?document.domain&&r?m(r):(e=h("iframe"),i="java"+u+":",e.style.display="none",c.appendChild(e),e.src=String(i),(t=e.contentWindow.document).open(),t.write(_("document.F=Object")),t.close(),t.F):m(r);for(var s=a.length;s--;)delete g[p][a[s]];return g()};o[d]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(f[p]=s(t),i=new f,f[p]=null,i[d]=t):i=g(),void 0===e?i:n.f(i,e)}},6801:(t,e,i)=>{var r=i(3724),s=i(8686),n=i(4913),a=i(8551),o=i(5397),c=i(1072);e.f=r&&!s?Object.defineProperties:function(t,e){a(t);for(var i,r=o(e),s=c(e),h=s.length,l=0;h>l;)n.f(t,i=s[l++],r[i]);return t}},4913:(t,e,i)=>{var r=i(3724),s=i(5917),n=i(8686),a=i(8551),o=i(6969),c=TypeError,h=Object.defineProperty,l=Object.getOwnPropertyDescriptor,p="enumerable",u="configurable",d="writable";e.f=r?n?function(t,e,i){if(a(t),e=o(e),a(i),"function"==typeof t&&"prototype"===e&&"value"in i&&d in i&&!i[d]){var r=l(t,e);r&&r[d]&&(t[e]=i.value,i={configurable:u in i?i[u]:r[u],enumerable:p in i?i[p]:r[p],writable:!1})}return h(t,e,i)}:h:function(t,e,i){if(a(t),e=o(e),a(i),s)try{return h(t,e,i)}catch(t){}if("get"in i||"set"in i)throw new c("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},7347:(t,e,i)=>{var r=i(3724),s=i(9565),n=i(8773),a=i(6980),o=i(5397),c=i(6969),h=i(9297),l=i(5917),p=Object.getOwnPropertyDescriptor;e.f=r?p:function(t,e){if(t=o(t),e=c(e),l)try{return p(t,e)}catch(t){}if(h(t,e))return a(!s(n.f,t,e),t[e])}},8480:(t,e,i)=>{var r=i(1828),s=i(8727).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,s)}},3717:(t,e)=>{e.f=Object.getOwnPropertySymbols},2787:(t,e,i)=>{var r=i(9297),s=i(4901),n=i(8981),a=i(6119),o=i(2211),c=a("IE_PROTO"),h=Object,l=h.prototype;t.exports=o?h.getPrototypeOf:function(t){var e=n(t);if(r(e,c))return e[c];var i=e.constructor;return s(i)&&e instanceof i?i.prototype:e instanceof h?l:null}},1625:(t,e,i)=>{var r=i(9504);t.exports=r({}.isPrototypeOf)},1828:(t,e,i)=>{var r=i(9504),s=i(9297),n=i(5397),a=i(9617).indexOf,o=i(421),c=r([].push);t.exports=function(t,e){var i,r=n(t),h=0,l=[];for(i in r)!s(o,i)&&s(r,i)&&c(l,i);for(;e.length>h;)s(r,i=e[h++])&&(~a(l,i)||c(l,i));return l}},1072:(t,e,i)=>{var r=i(1828),s=i(8727);t.exports=Object.keys||function(t){return r(t,s)}},8773:(t,e)=>{var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,s=r&&!i.call({1:2},1);e.f=s?function(t){var e=r(this,t);return!!e&&e.enumerable}:i},2967:(t,e,i)=>{var r=i(6706),s=i(34),n=i(7750),a=i(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=r(Object.prototype,"__proto__","set"))(i,[]),e=i instanceof Array}catch(t){}return function(i,r){return n(i),a(r),s(i)?(e?t(i,r):i.__proto__=r,i):i}}():void 0)},4270:(t,e,i)=>{var r=i(9565),s=i(4901),n=i(34),a=TypeError;t.exports=function(t,e){var i,o;if("string"===e&&s(i=t.toString)&&!n(o=r(i,t)))return o;if(s(i=t.valueOf)&&!n(o=r(i,t)))return o;if("string"!==e&&s(i=t.toString)&&!n(o=r(i,t)))return o;throw new a("Can't convert object to primitive value")}},5031:(t,e,i)=>{var r=i(7751),s=i(9504),n=i(8480),a=i(3717),o=i(8551),c=s([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=n.f(o(t)),i=a.f;return i?c(e,i(t)):e}},1056:(t,e,i)=>{var r=i(4913).f;t.exports=function(t,e,i){i in t||r(t,i,{configurable:!0,get:function(){return e[i]},set:function(t){e[i]=t}})}},6682:(t,e,i)=>{var r=i(9565),s=i(8551),n=i(4901),a=i(2195),o=i(7323),c=TypeError;t.exports=function(t,e){var i=t.exec;if(n(i)){var h=r(i,t,e);return null!==h&&s(h),h}if("RegExp"===a(t))return r(o,t,e);throw new c("RegExp#exec called on incompatible receiver")}},7323:(t,e,i)=>{var r,s,n=i(9565),a=i(9504),o=i(655),c=i(7979),h=i(8429),l=i(5745),p=i(2360),u=i(1181).get,d=i(3635),f=i(8814),_=l("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,g=m,v=a("".charAt),y=a("".indexOf),x=a("".replace),b=a("".slice),w=(s=/b*/g,n(m,r=/a/,"a"),n(m,s,"a"),0!==r.lastIndex||0!==s.lastIndex),E=h.BROKEN_CARET,A=void 0!==/()??/.exec("")[1];(w||A||E||d||f)&&(g=function(t){var e,i,r,s,a,h,l,d=this,f=u(d),k=o(t),S=f.raw;if(S)return S.lastIndex=d.lastIndex,e=n(g,S,k),d.lastIndex=S.lastIndex,e;var C=f.groups,T=E&&d.sticky,P=n(c,d),N=d.source,O=0,L=k;if(T&&(P=x(P,"y",""),-1===y(P,"g")&&(P+="g"),L=b(k,d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==v(k,d.lastIndex-1))&&(N="(?: "+N+")",L=" "+L,O++),i=new RegExp("^(?:"+N+")",P)),A&&(i=new RegExp("^"+N+"$(?!\\s)",P)),w&&(r=d.lastIndex),s=n(m,T?i:d,L),T?s?(s.input=b(s.input,O),s[0]=b(s[0],O),s.index=d.lastIndex,d.lastIndex+=s[0].length):d.lastIndex=0:w&&s&&(d.lastIndex=d.global?s.index+s[0].length:r),A&&s&&s.length>1&&n(_,s[0],i,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(s[a]=void 0)})),s&&C)for(s.groups=h=p(null),a=0;a<C.length;a++)h[(l=C[a])[0]]=s[l[1]];return s}),t.exports=g},7979:(t,e,i)=>{var r=i(8551);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},1034:(t,e,i)=>{var r=i(9565),s=i(9297),n=i(1625),a=i(7979),o=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in o||s(t,"flags")||!n(o,t)?e:r(a,t)}},8429:(t,e,i)=>{var r=i(9039),s=i(4576).RegExp,n=r((function(){var t=s("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),a=n||r((function(){return!s("a","y").sticky})),o=n||r((function(){var t=s("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:o,MISSED_STICKY:a,UNSUPPORTED_Y:n}},3635:(t,e,i)=>{var r=i(9039),s=i(4576).RegExp;t.exports=r((function(){var t=s(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))},8814:(t,e,i)=>{var r=i(9039),s=i(4576).RegExp;t.exports=r((function(){var t=s("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},7750:(t,e,i)=>{var r=i(4117),s=TypeError;t.exports=function(t){if(r(t))throw new s("Can't call method on "+t);return t}},7633:(t,e,i)=>{var r=i(7751),s=i(2106),n=i(8227),a=i(3724),o=n("species");t.exports=function(t){var e=r(t);a&&e&&!e[o]&&s(e,o,{configurable:!0,get:function(){return this}})}},687:(t,e,i)=>{var r=i(4913).f,s=i(9297),n=i(8227)("toStringTag");t.exports=function(t,e,i){t&&!i&&(t=t.prototype),t&&!s(t,n)&&r(t,n,{configurable:!0,value:e})}},6119:(t,e,i)=>{var r=i(5745),s=i(3392),n=r("keys");t.exports=function(t){return n[t]||(n[t]=s(t))}},7629:(t,e,i)=>{var r=i(6395),s=i(4576),n=i(9433),a="__core-js_shared__",o=t.exports=s[a]||n(a,{});(o.versions||(o.versions=[])).push({version:"3.40.0",mode:r?"pure":"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.40.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:(t,e,i)=>{var r=i(7629);t.exports=function(t,e){return r[t]||(r[t]=e||{})}},8183:(t,e,i)=>{var r=i(9504),s=i(1291),n=i(655),a=i(7750),o=r("".charAt),c=r("".charCodeAt),h=r("".slice),l=function(t){return function(e,i){var r,l,p=n(a(e)),u=s(i),d=p.length;return u<0||u>=d?t?"":void 0:(r=c(p,u))<55296||r>56319||u+1===d||(l=c(p,u+1))<56320||l>57343?t?o(p,u):r:t?h(p,u,u+2):l-56320+(r-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},706:(t,e,i)=>{var r=i(350).PROPER,s=i(9039),n=i(7452);t.exports=function(t){return s((function(){return!!n[t]()||""!==""[t]()||r&&n[t].name!==t}))}},3802:(t,e,i)=>{var r=i(9504),s=i(7750),n=i(655),a=i(7452),o=r("".replace),c=RegExp("^["+a+"]+"),h=RegExp("(^|[^"+a+"])["+a+"]+$"),l=function(t){return function(e){var i=n(s(e));return 1&t&&(i=o(i,c,"")),2&t&&(i=o(i,h,"$1")),i}};t.exports={start:l(1),end:l(2),trim:l(3)}},4495:(t,e,i)=>{var r=i(9519),s=i(9039),n=i(4576).String;t.exports=!!Object.getOwnPropertySymbols&&!s((function(){var t=Symbol("symbol detection");return!n(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},5610:(t,e,i)=>{var r=i(1291),s=Math.max,n=Math.min;t.exports=function(t,e){var i=r(t);return i<0?s(i+e,0):n(i,e)}},5397:(t,e,i)=>{var r=i(7055),s=i(7750);t.exports=function(t){return r(s(t))}},1291:(t,e,i)=>{var r=i(741);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},8014:(t,e,i)=>{var r=i(1291),s=Math.min;t.exports=function(t){var e=r(t);return e>0?s(e,9007199254740991):0}},8981:(t,e,i)=>{var r=i(7750),s=Object;t.exports=function(t){return s(r(t))}},2777:(t,e,i)=>{var r=i(9565),s=i(34),n=i(757),a=i(5966),o=i(4270),c=i(8227),h=TypeError,l=c("toPrimitive");t.exports=function(t,e){if(!s(t)||n(t))return t;var i,c=a(t,l);if(c){if(void 0===e&&(e="default"),i=r(c,t,e),!s(i)||n(i))return i;throw new h("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},6969:(t,e,i)=>{var r=i(2777),s=i(757);t.exports=function(t){var e=r(t,"string");return s(e)?e:e+""}},2140:(t,e,i)=>{var r={};r[i(8227)("toStringTag")]="z",t.exports="[object z]"===String(r)},655:(t,e,i)=>{var r=i(6955),s=String;t.exports=function(t){if("Symbol"===r(t))throw new TypeError("Cannot convert a Symbol value to a string");return s(t)}},6823:t=>{var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},3392:(t,e,i)=>{var r=i(9504),s=0,n=Math.random(),a=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++s+n,36)}},7040:(t,e,i)=>{var r=i(4495);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:(t,e,i)=>{var r=i(3724),s=i(9039);t.exports=r&&s((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8622:(t,e,i)=>{var r=i(4576),s=i(4901),n=r.WeakMap;t.exports=s(n)&&/native code/.test(String(n))},8227:(t,e,i)=>{var r=i(4576),s=i(5745),n=i(9297),a=i(3392),o=i(4495),c=i(7040),h=r.Symbol,l=s("wks"),p=c?h.for||h:h&&h.withoutSetter||a;t.exports=function(t){return n(l,t)||(l[t]=o&&n(h,t)?h[t]:p("Symbol."+t)),l[t]}},7452:t=>{t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},3792:(t,e,i)=>{var r=i(5397),s=i(6469),n=i(6269),a=i(1181),o=i(4913).f,c=i(1088),h=i(2529),l=i(6395),p=i(3724),u="Array Iterator",d=a.set,f=a.getterFor(u);t.exports=c(Array,"Array",(function(t,e){d(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=f(this),e=t.target,i=t.index++;if(!e||i>=e.length)return t.target=null,h(void 0,!0);switch(t.kind){case"keys":return h(i,!1);case"values":return h(e[i],!1)}return h([i,e[i]],!1)}),"values");var _=n.Arguments=n.Array;if(s("keys"),s("values"),s("entries"),!l&&p&&"values"!==_.name)try{o(_,"name",{value:"values"})}catch(t){}},6910:(t,e,i)=>{var r=i(6518),s=i(9504),n=i(9306),a=i(8981),o=i(6198),c=i(4606),h=i(655),l=i(9039),p=i(4488),u=i(4598),d=i(3709),f=i(3763),_=i(9519),m=i(3607),g=[],v=s(g.sort),y=s(g.push),x=l((function(){g.sort(void 0)})),b=l((function(){g.sort(null)})),w=u("sort"),E=!l((function(){if(_)return _<70;if(!(d&&d>3)){if(f)return!0;if(m)return m<603;var t,e,i,r,s="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(r=0;r<47;r++)g.push({k:e+r,v:i})}for(g.sort((function(t,e){return e.v-t.v})),r=0;r<g.length;r++)e=g[r].k.charAt(0),s.charAt(s.length-1)!==e&&(s+=e);return"DGBEFHACIJK"!==s}}));r({target:"Array",proto:!0,forced:x||!b||!w||!E},{sort:function(t){void 0!==t&&n(t);var e=a(this);if(E)return void 0===t?v(e):v(e,t);var i,r,s=[],l=o(e);for(r=0;r<l;r++)r in e&&y(s,e[r]);for(p(s,function(t){return function(e,i){return void 0===i?-1:void 0===e?1:void 0!==t?+t(e,i)||0:h(e)>h(i)?1:-1}}(t)),i=o(s),r=0;r<i;)e[r]=s[r++];for(;r<l;)c(e,r++);return e}})},5081:(t,e,i)=>{var r=i(6518),s=i(4576);r({global:!0,forced:s.globalThis!==s},{globalThis:s})},4864:(t,e,i)=>{var r=i(3724),s=i(4576),n=i(9504),a=i(2796),o=i(3167),c=i(6699),h=i(2360),l=i(8480).f,p=i(1625),u=i(788),d=i(655),f=i(1034),_=i(8429),m=i(1056),g=i(6840),v=i(9039),y=i(9297),x=i(1181).enforce,b=i(7633),w=i(8227),E=i(3635),A=i(8814),k=w("match"),S=s.RegExp,C=S.prototype,T=s.SyntaxError,P=n(C.exec),N=n("".charAt),O=n("".replace),L=n("".indexOf),I=n("".slice),R=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,D=/a/g,j=/a/g,M=new S(D)!==D,V=_.MISSED_STICKY,B=_.UNSUPPORTED_Y,U=r&&(!M||V||E||A||v((function(){return j[k]=!1,S(D)!==D||S(j)===j||"/a/i"!==String(S(D,"i"))})));if(a("RegExp",U)){for(var F=function(t,e){var i,r,s,n,a,l,_=p(C,this),m=u(t),g=void 0===e,v=[],b=t;if(!_&&m&&g&&t.constructor===F)return t;if((m||p(C,t))&&(t=t.source,g&&(e=f(b))),t=void 0===t?"":d(t),e=void 0===e?"":d(e),b=t,E&&"dotAll"in D&&(r=!!e&&L(e,"s")>-1)&&(e=O(e,/s/g,"")),i=e,V&&"sticky"in D&&(s=!!e&&L(e,"y")>-1)&&B&&(e=O(e,/y/g,"")),A&&(n=function(t){for(var e,i=t.length,r=0,s="",n=[],a=h(null),o=!1,c=!1,l=0,p="";r<=i;r++){if("\\"===(e=N(t,r)))e+=N(t,++r);else if("]"===e)o=!1;else if(!o)switch(!0){case"["===e:o=!0;break;case"("===e:if(s+=e,"?:"===I(t,r+1,r+3))continue;P(R,I(t,r+1))&&(r+=2,c=!0),l++;continue;case">"===e&&c:if(""===p||y(a,p))throw new T("Invalid capture group name");a[p]=!0,n[n.length]=[p,l],c=!1,p="";continue}c?p+=e:s+=e}return[s,n]}(t),t=n[0],v=n[1]),a=o(S(t,e),_?this:C,F),(r||s||v.length)&&(l=x(a),r&&(l.dotAll=!0,l.raw=F(function(t){for(var e,i=t.length,r=0,s="",n=!1;r<=i;r++)"\\"!==(e=N(t,r))?n||"."!==e?("["===e?n=!0:"]"===e&&(n=!1),s+=e):s+="[\\s\\S]":s+=e+N(t,++r);return s}(t),i)),s&&(l.sticky=!0),v.length&&(l.groups=v)),t!==b)try{c(a,"source",""===b?"(?:)":b)}catch(t){}return a},W=l(S),q=0;W.length>q;)m(F,S,W[q++]);C.constructor=F,F.prototype=C,g(s,"RegExp",F,{constructor:!0})}b("RegExp")},7495:(t,e,i)=>{var r=i(6518),s=i(7323);r({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},9479:(t,e,i)=>{var r=i(4576),s=i(3724),n=i(2106),a=i(7979),o=i(9039),c=r.RegExp,h=c.prototype;s&&o((function(){var t=!0;try{c(".","d")}catch(e){t=!1}var e={},i="",r=t?"dgimsy":"gimsy",s=function(t,r){Object.defineProperty(e,t,{get:function(){return i+=r,!0}})},n={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var a in t&&(n.hasIndices="d"),n)s(a,n[a]);return Object.getOwnPropertyDescriptor(h,"flags").get.call(e)!==r||i!==r}))&&n(h,"flags",{configurable:!0,get:a})},9978:(t,e,i)=>{var r=i(6518),s=i(9565),n=i(9504),a=i(7750),o=i(4901),c=i(4117),h=i(788),l=i(655),p=i(5966),u=i(1034),d=i(2478),f=i(8227),_=i(6395),m=f("replace"),g=TypeError,v=n("".indexOf),y=n("".replace),x=n("".slice),b=Math.max;r({target:"String",proto:!0},{replaceAll:function(t,e){var i,r,n,f,w,E,A,k,S,C,T=a(this),P=0,N="";if(!c(t)){if((i=h(t))&&(r=l(a(u(t))),!~v(r,"g")))throw new g("`.replaceAll` does not allow non-global regexes");if(n=p(t,m))return s(n,t,T,e);if(_&&i)return y(l(T),t,e)}for(f=l(T),w=l(t),(E=o(e))||(e=l(e)),A=w.length,k=b(1,A),S=v(f,w);-1!==S;)C=E?l(e(w,S,f)):d(w,f,S,[],void 0,e),N+=x(f,P,S)+C,P=S+A,S=S+k>f.length?-1:v(f,w,S+k);return P<f.length&&(N+=x(f,P)),N}})},5440:(t,e,i)=>{var r=i(8745),s=i(9565),n=i(9504),a=i(9228),o=i(9039),c=i(8551),h=i(4901),l=i(4117),p=i(1291),u=i(8014),d=i(655),f=i(7750),_=i(7829),m=i(5966),g=i(2478),v=i(6682),y=i(8227)("replace"),x=Math.max,b=Math.min,w=n([].concat),E=n([].push),A=n("".indexOf),k=n("".slice),S="$0"==="a".replace(/./,"$0"),C=!!/./[y]&&""===/./[y]("a","$0");a("replace",(function(t,e,i){var n=C?"$":"$0";return[function(t,i){var r=f(this),n=l(t)?void 0:m(t,y);return n?s(n,t,r,i):s(e,d(r),t,i)},function(t,s){var a=c(this),o=d(t);if("string"==typeof s&&-1===A(s,n)&&-1===A(s,"$<")){var l=i(e,a,o,s);if(l.done)return l.value}var f=h(s);f||(s=d(s));var m,y=a.global;y&&(m=a.unicode,a.lastIndex=0);for(var S,C=[];null!==(S=v(a,o))&&(E(C,S),y);){""===d(S[0])&&(a.lastIndex=_(o,u(a.lastIndex),m))}for(var T,P="",N=0,O=0;O<C.length;O++){for(var L,I=d((S=C[O])[0]),R=x(b(p(S.index),o.length),0),D=[],j=1;j<S.length;j++)E(D,void 0===(T=S[j])?T:String(T));var M=S.groups;if(f){var V=w([I],D,R,o);void 0!==M&&E(V,M),L=d(r(s,void 0,V))}else L=g(I,o,R,D,M,s);R>=N&&(P+=k(o,N,R)+L,N=R+I.length)}return P+k(o,N)}]}),!!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!S||C)},2762:(t,e,i)=>{var r=i(6518),s=i(3802).trim;r({target:"String",proto:!0,forced:i(706)("trim")},{trim:function(){return s(this)}})},9463:(t,e,i)=>{var r=i(6518),s=i(3724),n=i(4576),a=i(9504),o=i(9297),c=i(4901),h=i(1625),l=i(655),p=i(2106),u=i(7740),d=n.Symbol,f=d&&d.prototype;if(s&&c(d)&&(!("description"in f)||void 0!==d().description)){var _={},m=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=h(f,this)?new d(t):void 0===t?d():d(t);return""===t&&(_[e]=!0),e};u(m,d),m.prototype=f,f.constructor=m;var g="Symbol(description detection)"===String(d("description detection")),v=a(f.valueOf),y=a(f.toString),x=/^Symbol\((.*)\)[^)]+$/,b=a("".replace),w=a("".slice);p(f,"description",{configurable:!0,get:function(){var t=v(this);if(o(_,t))return"";var e=y(t),i=g?w(e,7,-1):b(e,x,"$1");return""===i?void 0:i}}),r({global:!0,constructor:!0,forced:!0},{Symbol:m})}},2480:(t,e,i)=>{i(5081)},2041:(t,e,i)=>{i(9978)},2953:(t,e,i)=>{var r=i(4576),s=i(7400),n=i(9296),a=i(3792),o=i(6699),c=i(687),h=i(8227)("iterator"),l=a.values,p=function(t,e){if(t){if(t[h]!==l)try{o(t,h,l)}catch(e){t[h]=l}if(c(t,e,!0),s[e])for(var i in a)if(t[i]!==a[i])try{o(t,i,a[i])}catch(e){t[i]=a[i]}}};for(var u in s)p(r[u]&&r[u].prototype,u);p(n,"DOMTokenList")},3270:(t,e,i)=>{i.r(e),i.d(e,{Node:()=>rt,Parser:()=>U,Position:()=>R,SourceLocation:()=>D,TokContext:()=>at,Token:()=>Pt,TokenType:()=>m,defaultOptions:()=>M,getLineInfo:()=>j,isIdentifierChar:()=>_,isIdentifierStart:()=>f,isNewLine:()=>k,keywordTypes:()=>x,lineBreak:()=>E,lineBreakG:()=>A,nonASCIIwhitespace:()=>S,parse:()=>Dt,parseExpressionAt:()=>jt,tokContexts:()=>ot,tokTypes:()=>w,tokenizer:()=>Mt,version:()=>Rt});var r={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},s="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",n={5:s,"5module":s+" export import",6:s+" const class extends export import super"},a=/^in(stanceof)?$/,o="---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",c="----------------------------------------------------------------------------------------------------------------------------------------------------",h=new RegExp("["+o+"]"),l=new RegExp("["+o+c+"]");o=c=null;var p=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],u=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function d(t,e){for(var i=65536,r=0;r<e.length;r+=2){if((i+=e[r])>t)return!1;if((i+=e[r+1])>=t)return!0}}function f(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&h.test(String.fromCharCode(t)):!1!==e&&d(t,p)))}function _(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&l.test(String.fromCharCode(t)):!1!==e&&(d(t,p)||d(t,u)))))}var m=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function g(t,e){return new m(t,{beforeExpr:!0,binop:e})}var v={beforeExpr:!0},y={startsExpr:!0},x={};function b(t,e){return void 0===e&&(e={}),e.keyword=t,x[t]=new m(t,e)}var w={num:new m("num",y),regexp:new m("regexp",y),string:new m("string",y),name:new m("name",y),eof:new m("eof"),bracketL:new m("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new m("]"),braceL:new m("{",{beforeExpr:!0,startsExpr:!0}),braceR:new m("}"),parenL:new m("(",{beforeExpr:!0,startsExpr:!0}),parenR:new m(")"),comma:new m(",",v),semi:new m(";",v),colon:new m(":",v),dot:new m("."),question:new m("?",v),questionDot:new m("?."),arrow:new m("=>",v),template:new m("template"),invalidTemplate:new m("invalidTemplate"),ellipsis:new m("...",v),backQuote:new m("`",y),dollarBraceL:new m("${",{beforeExpr:!0,startsExpr:!0}),eq:new m("=",{beforeExpr:!0,isAssign:!0}),assign:new m("_=",{beforeExpr:!0,isAssign:!0}),incDec:new m("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new m("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:g("||",1),logicalAND:g("&&",2),bitwiseOR:g("|",3),bitwiseXOR:g("^",4),bitwiseAND:g("&",5),equality:g("==/!=/===/!==",6),relational:g("</>/<=/>=",7),bitShift:g("<</>>/>>>",8),plusMin:new m("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:g("%",10),star:g("*",10),slash:g("/",10),starstar:new m("**",{beforeExpr:!0}),coalesce:g("??",1),_break:b("break"),_case:b("case",v),_catch:b("catch"),_continue:b("continue"),_debugger:b("debugger"),_default:b("default",v),_do:b("do",{isLoop:!0,beforeExpr:!0}),_else:b("else",v),_finally:b("finally"),_for:b("for",{isLoop:!0}),_function:b("function",y),_if:b("if"),_return:b("return",v),_switch:b("switch"),_throw:b("throw",v),_try:b("try"),_var:b("var"),_const:b("const"),_while:b("while",{isLoop:!0}),_with:b("with"),_new:b("new",{beforeExpr:!0,startsExpr:!0}),_this:b("this",y),_super:b("super",y),_class:b("class",y),_extends:b("extends",v),_export:b("export"),_import:b("import",y),_null:b("null",y),_true:b("true",y),_false:b("false",y),_in:b("in",{beforeExpr:!0,binop:7}),_instanceof:b("instanceof",{beforeExpr:!0,binop:7}),_typeof:b("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:b("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:b("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},E=/\r\n?|\n|\u2028|\u2029/,A=new RegExp(E.source,"g");function k(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var S=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,C=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,T=Object.prototype,P=T.hasOwnProperty,N=T.toString;function O(t,e){return P.call(t,e)}var L=Array.isArray||function(t){return"[object Array]"===N.call(t)};function I(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var R=function(t,e){this.line=t,this.column=e};R.prototype.offset=function(t){return new R(this.line,this.column+t)};var D=function(t,e,i){this.start=e,this.end=i,null!==t.sourceFile&&(this.source=t.sourceFile)};function j(t,e){for(var i=1,r=0;;){A.lastIndex=r;var s=A.exec(t);if(!(s&&s.index<e))return new R(i,e-r);++i,r=s.index+s[0].length}}var M={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function V(t){var e={};for(var i in M)e[i]=t&&O(t,i)?t[i]:M[i];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),L(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return L(e.onComment)&&(e.onComment=function(t,e){return function(i,r,s,n,a,o){var c={type:i?"Block":"Line",value:r,start:s,end:n};t.locations&&(c.loc=new D(this,a,o)),t.ranges&&(c.range=[s,n]),e.push(c)}}(e,e.onComment)),e}function B(t,e){return 2|(t?4:0)|(e?8:0)}var U=function(t,e,i){this.options=t=V(t),this.sourceFile=t.sourceFile,this.keywords=I(n[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var s="";if(!0!==t.allowReserved){for(var a=t.ecmaVersion;!(s=r[a]);a--);"module"===t.sourceType&&(s+=" await")}this.reservedWords=I(s);var o=(s?s+" ":"")+r.strict;this.reservedWordsStrict=I(o),this.reservedWordsStrictBind=I(o+" "+r.strictBind),this.input=String(e),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(E).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},F={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};U.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},F.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},F.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},F.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},F.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},F.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},F.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},U.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},U.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var i=this,r=0;r<t.length;r++)i=t[r](i);return i},U.parse=function(t,e){return new this(e,t).parse()},U.parseExpressionAt=function(t,e,i){var r=new this(i,t,e);return r.nextToken(),r.parseExpression()},U.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(U.prototype,F);var W=U.prototype,q=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;function G(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}W.strictDirective=function(t){for(;;){C.lastIndex=t,t+=C.exec(this.input)[0].length;var e=q.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){C.lastIndex=t+e[0].length;var i=C.exec(this.input),r=i.index+i[0].length,s=this.input.charAt(r);return";"===s||"}"===s||E.test(i[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(s)||"!"===s&&"="===this.input.charAt(r+1))}t+=e[0].length,C.lastIndex=t,t+=C.exec(this.input)[0].length,";"===this.input[t]&&t++}},W.eat=function(t){return this.type===t&&(this.next(),!0)},W.isContextual=function(t){return this.type===w.name&&this.value===t&&!this.containsEsc},W.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},W.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},W.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||E.test(this.input.slice(this.lastTokEnd,this.start))},W.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},W.semicolon=function(){this.eat(w.semi)||this.insertSemicolon()||this.unexpected()},W.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},W.expect=function(t){this.eat(t)||this.unexpected()},W.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},W.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,"Parenthesized pattern")}},W.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,r=t.doubleProto;if(!e)return i>=0||r>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},W.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},W.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var z=U.prototype;z.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==w.eof;){var i=this.parseStatement(null,!0,e);t.body.push(i)}if(this.inModule)for(var r=0,s=Object.keys(this.undefinedExports);r<s.length;r+=1){var n=s[r];this.raiseRecoverable(this.undefinedExports[n].start,"Export '"+n+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var K={kind:"loop"},X={kind:"switch"};z.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;C.lastIndex=this.pos;var e=C.exec(this.input),i=this.pos+e[0].length,r=this.input.charCodeAt(i);if(91===r)return!0;if(t)return!1;if(123===r)return!0;if(f(r,!0)){for(var s=i+1;_(this.input.charCodeAt(s),!0);)++s;var n=this.input.slice(i,s);if(!a.test(n))return!0}return!1},z.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;C.lastIndex=this.pos;var t=C.exec(this.input),e=this.pos+t[0].length;return!(E.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&_(this.input.charAt(e+8)))},z.parseStatement=function(t,e,i){var r,s=this.type,n=this.startNode();switch(this.isLet(t)&&(s=w._var,r="let"),s){case w._break:case w._continue:return this.parseBreakContinueStatement(n,s.keyword);case w._debugger:return this.parseDebuggerStatement(n);case w._do:return this.parseDoStatement(n);case w._for:return this.parseForStatement(n);case w._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(n,!1,!t);case w._class:return t&&this.unexpected(),this.parseClass(n,!0);case w._if:return this.parseIfStatement(n);case w._return:return this.parseReturnStatement(n);case w._switch:return this.parseSwitchStatement(n);case w._throw:return this.parseThrowStatement(n);case w._try:return this.parseTryStatement(n);case w._const:case w._var:return r=r||this.value,t&&"var"!==r&&this.unexpected(),this.parseVarStatement(n,r);case w._while:return this.parseWhileStatement(n);case w._with:return this.parseWithStatement(n);case w.braceL:return this.parseBlock(!0,n);case w.semi:return this.parseEmptyStatement(n);case w._export:case w._import:if(this.options.ecmaVersion>10&&s===w._import){C.lastIndex=this.pos;var a=C.exec(this.input),o=this.pos+a[0].length,c=this.input.charCodeAt(o);if(40===c||46===c)return this.parseExpressionStatement(n,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),s===w._import?this.parseImport(n):this.parseExport(n,i);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(n,!0,!t);var h=this.value,l=this.parseExpression();return s===w.name&&"Identifier"===l.type&&this.eat(w.colon)?this.parseLabeledStatement(n,h,l,t):this.parseExpressionStatement(n,l)}},z.parseBreakContinueStatement=function(t,e){var i="break"===e;this.next(),this.eat(w.semi)||this.insertSemicolon()?t.label=null:this.type!==w.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var s=this.labels[r];if(null==t.label||s.name===t.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(t.label&&i)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")},z.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},z.parseDoStatement=function(t){return this.next(),this.labels.push(K),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(w._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},z.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(K),this.enterScope(0),this.expect(w.parenL),this.type===w.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===w._var||this.type===w._const||i){var r=this.startNode(),s=i?"let":this.value;return this.next(),this.parseVar(r,!0,s),this.finishNode(r,"VariableDeclaration"),(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===r.declarations.length?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r)):(e>-1&&this.unexpected(e),this.parseFor(t,r))}var n=new G,a=this.parseExpression(!0,n);return this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(a,!1,n),this.checkLVal(a),this.parseForIn(t,a)):(this.checkExpressionErrors(n,!0),e>-1&&this.unexpected(e),this.parseFor(t,a))},z.parseFunctionStatement=function(t,e,i){return this.next(),this.parseFunction(t,$|(i?0:Y),!1,e)},z.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(w._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},z.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(w.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},z.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(w.braceL),this.labels.push(X),this.enterScope(0);for(var i=!1;this.type!==w.braceR;)if(this.type===w._case||this.type===w._default){var r=this.type===w._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,e.test=null),this.expect(w.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},z.parseThrowStatement=function(t){return this.next(),E.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var H=[];z.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===w._catch){var e=this.startNode();if(this.next(),this.eat(w.parenL)){e.param=this.parseBindingAtom();var i="Identifier"===e.param.type;this.enterScope(i?32:0),this.checkLVal(e.param,i?4:2),this.expect(w.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(w._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},z.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},z.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(K),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},z.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},z.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},z.parseLabeledStatement=function(t,e,i,r){for(var s=0,n=this.labels;s<n.length;s+=1){n[s].name===e&&this.raise(i.start,"Label '"+e+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===w._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var c=this.labels[o];if(c.statementStart!==t.start)break;c.statementStart=this.start,c.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(r?-1===r.indexOf("label")?r+"label":r:"label"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")},z.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},z.parseBlock=function(t,e,i){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(w.braceL),t&&this.enterScope(0);this.type!==w.braceR;){var r=this.parseStatement(null);e.body.push(r)}return i&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},z.parseFor=function(t,e){return t.init=e,this.expect(w.semi),t.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),t.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},z.parseForIn=function(t,e){var i=this.type===w._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!i||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)?this.raise(e.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"):"AssignmentPattern"===e.type&&this.raise(e.start,"Invalid left-hand side in for-loop"),t.left=e,t.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,i?"ForInStatement":"ForOfStatement")},z.parseVar=function(t,e,i){for(t.declarations=[],t.kind=i;;){var r=this.startNode();if(this.parseVarId(r,i),this.eat(w.eq)?r.init=this.parseMaybeAssign(e):"const"!==i||this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===r.id.type||e&&(this.type===w._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(w.comma))break}return t},z.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?1:2,!1)};var $=1,Y=2;z.parseFunction=function(t,e,i,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===w.star&&e&Y&&this.unexpected(),t.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&$&&(t.id=4&e&&this.type!==w.name?null:this.parseIdent(),!t.id||e&Y||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var s=this.yieldPos,n=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(B(t.async,t.generator)),e&$||(t.id=this.type===w.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i,!1),this.yieldPos=s,this.awaitPos=n,this.awaitIdentPos=a,this.finishNode(t,e&$?"FunctionDeclaration":"FunctionExpression")},z.parseFunctionParams=function(t){this.expect(w.parenL),t.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},z.parseClass=function(t,e){this.next();var i=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var r=this.startNode(),s=!1;for(r.body=[],this.expect(w.braceL);this.type!==w.braceR;){var n=this.parseClassElement(null!==t.superClass);n&&(r.body.push(n),"MethodDefinition"===n.type&&"constructor"===n.kind&&(s&&this.raise(n.start,"Duplicate constructor in the same class"),s=!0))}return this.strict=i,this.next(),t.body=this.finishNode(r,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},z.parseClassElement=function(t){var e=this;if(this.eat(w.semi))return null;var i=this.startNode(),r=function(t,r){void 0===r&&(r=!1);var s=e.start,n=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===w.parenL||r&&e.canInsertSemicolon())||(i.key&&e.unexpected(),i.computed=!1,i.key=e.startNodeAt(s,n),i.key.name=t,e.finishNode(i.key,"Identifier"),!1))};i.kind="method",i.static=r("static");var s=this.eat(w.star),n=!1;s||(this.options.ecmaVersion>=8&&r("async",!0)?(n=!0,s=this.options.ecmaVersion>=9&&this.eat(w.star)):r("get")?i.kind="get":r("set")&&(i.kind="set")),i.key||this.parsePropertyName(i);var a=i.key,o=!1;return i.computed||i.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?i.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==i.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),s&&this.raise(a.start,"Constructor can't be a generator"),n&&this.raise(a.start,"Constructor can't be an async method"),i.kind="constructor",o=t),this.parseClassMethod(i,s,n,o),"get"===i.kind&&0!==i.value.params.length&&this.raiseRecoverable(i.value.start,"getter should have no params"),"set"===i.kind&&1!==i.value.params.length&&this.raiseRecoverable(i.value.start,"setter should have exactly one param"),"set"===i.kind&&"RestElement"===i.value.params[0].type&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params"),i},z.parseClassMethod=function(t,e,i,r){return t.value=this.parseMethod(e,i,r),this.finishNode(t,"MethodDefinition")},z.parseClassId=function(t,e){this.type===w.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},z.parseClassSuper=function(t){t.superClass=this.eat(w._extends)?this.parseExprSubscripts():null},z.parseExport=function(t,e){if(this.next(),this.eat(w.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseIdent(!0),this.checkExport(e,t.exported.name,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(w._default)){var i;if(this.checkExport(e,"default",this.lastTokStart),this.type===w._function||(i=this.isAsyncFunction())){var r=this.startNode();this.next(),i&&this.next(),t.declaration=this.parseFunction(r,4|$,!1,i)}else if(this.type===w._class){var s=this.startNode();t.declaration=this.parseClass(s,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var n=0,a=t.specifiers;n<a.length;n+=1){var o=a[n];this.checkUnreserved(o.local),this.checkLocalExport(o.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},z.checkExport=function(t,e,i){t&&(O(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)},z.checkPatternExport=function(t,e){var i=e.type;if("Identifier"===i)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===i)for(var r=0,s=e.properties;r<s.length;r+=1){var n=s[r];this.checkPatternExport(t,n)}else if("ArrayPattern"===i)for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(t,c)}else"Property"===i?this.checkPatternExport(t,e.value):"AssignmentPattern"===i?this.checkPatternExport(t,e.left):"RestElement"===i?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===i&&this.checkPatternExport(t,e.expression)},z.checkVariableExport=function(t,e){if(t)for(var i=0,r=e;i<r.length;i+=1){var s=r[i];this.checkPatternExport(t,s.id)}},z.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},z.parseExportSpecifiers=function(t){var e=[],i=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(i)i=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,"ExportSpecifier"))}return e},z.parseImport=function(t){return this.next(),this.type===w.string?(t.specifiers=H,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},z.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===w.name){var i=this.startNode();if(i.local=this.parseIdent(),this.checkLVal(i.local,2),t.push(this.finishNode(i,"ImportDefaultSpecifier")),!this.eat(w.comma))return t}if(this.type===w.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,2),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}for(this.expect(w.braceL);!this.eat(w.braceR);){if(e)e=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var s=this.startNode();s.imported=this.parseIdent(!0),this.eatContextual("as")?s.local=this.parseIdent():(this.checkUnreserved(s.imported),s.local=s.imported),this.checkLVal(s.local,2),t.push(this.finishNode(s,"ImportSpecifier"))}return t},z.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},z.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var Q=U.prototype;Q.toAssignable=function(t,e,i){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var r=0,s=t.properties;r<s.length;r+=1){var n=s[r];this.toAssignable(n,e),"RestElement"!==n.type||"ArrayPattern"!==n.argument.type&&"ObjectPattern"!==n.argument.type||this.raise(n.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,i);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t},Q.toAssignableList=function(t,e){for(var i=t.length,r=0;r<i;r++){var s=t[r];s&&this.toAssignable(s,e)}if(i){var n=t[i-1];6===this.options.ecmaVersion&&e&&n&&"RestElement"===n.type&&"Identifier"!==n.argument.type&&this.unexpected(n.argument.start)}return t},Q.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},Q.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==w.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},Q.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},Q.parseBindingList=function(t,e,i){for(var r=[],s=!0;!this.eat(t);)if(s?s=!1:this.expect(w.comma),e&&this.type===w.comma)r.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===w.ellipsis){var n=this.parseRestBinding();this.parseBindingListItem(n),r.push(n),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},Q.parseBindingListItem=function(t){return t},Q.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return i;var r=this.startNodeAt(t,e);return r.left=i,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},Q.checkLVal=function(t,e,i){switch(void 0===e&&(e=0),t.type){case"Identifier":2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(O(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),0!==e&&5!==e&&this.declareName(t.name,e,t.start);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,s=t.properties;r<s.length;r+=1){var n=s[r];this.checkLVal(n,e,i)}break;case"Property":this.checkLVal(t.value,e,i);break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLVal(c,e,i)}break;case"AssignmentPattern":this.checkLVal(t.left,e,i);break;case"RestElement":this.checkLVal(t.argument,e,i);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,i);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var J=U.prototype;J.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,s=t.key;switch(s.type){case"Identifier":r=s.name;break;case"Literal":r=String(s.value);break;default:return}var n=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===n&&(e.proto&&(i?i.doubleProto<0&&(i.doubleProto=s.start):this.raiseRecoverable(s.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[r="$"+r];if(a)("init"===n?this.strict&&a.init||a.get||a.set:a.init||a[n])&&this.raiseRecoverable(s.start,"Redefinition of property");else a=e[r]={init:!1,get:!1,set:!1};a[n]=!0}}},J.parseExpression=function(t,e){var i=this.start,r=this.startLoc,s=this.parseMaybeAssign(t,e);if(this.type===w.comma){var n=this.startNodeAt(i,r);for(n.expressions=[s];this.eat(w.comma);)n.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(n,"SequenceExpression")}return s},J.parseMaybeAssign=function(t,e,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var r=!1,s=-1,n=-1;e?(s=e.parenthesizedAssign,n=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new G,r=!0);var a=this.start,o=this.startLoc;this.type!==w.parenL&&this.type!==w.name||(this.potentialArrowAt=this.start);var c=this.parseMaybeConditional(t,e);if(i&&(c=i.call(this,c,a,o)),this.type.isAssign){var h=this.startNodeAt(a,o);return h.operator=this.value,h.left=this.type===w.eq?this.toAssignable(c,!1,e):c,r||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=h.left.start&&(e.shorthandAssign=-1),this.checkLVal(c),this.next(),h.right=this.parseMaybeAssign(t),this.finishNode(h,"AssignmentExpression")}return r&&this.checkExpressionErrors(e,!0),s>-1&&(e.parenthesizedAssign=s),n>-1&&(e.trailingComma=n),c},J.parseMaybeConditional=function(t,e){var i=this.start,r=this.startLoc,s=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return s;if(this.eat(w.question)){var n=this.startNodeAt(i,r);return n.test=s,n.consequent=this.parseMaybeAssign(),this.expect(w.colon),n.alternate=this.parseMaybeAssign(t),this.finishNode(n,"ConditionalExpression")}return s},J.parseExprOps=function(t,e){var i=this.start,r=this.startLoc,s=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||s.start===i&&"ArrowFunctionExpression"===s.type?s:this.parseExprOp(s,i,r,-1,t)},J.parseExprOp=function(t,e,i,r,s){var n=this.type.binop;if(null!=n&&(!s||this.type!==w._in)&&n>r){var a=this.type===w.logicalOR||this.type===w.logicalAND,o=this.type===w.coalesce;o&&(n=w.logicalAND.binop);var c=this.value;this.next();var h=this.start,l=this.startLoc,p=this.parseExprOp(this.parseMaybeUnary(null,!1),h,l,n,s),u=this.buildBinary(e,i,t,p,c,a||o);return(a&&this.type===w.coalesce||o&&(this.type===w.logicalOR||this.type===w.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(u,e,i,r,s)}return t},J.buildBinary=function(t,e,i,r,s,n){var a=this.startNodeAt(t,e);return a.left=i,a.operator=s,a.right=r,this.finishNode(a,n?"LogicalExpression":"BinaryExpression")},J.parseMaybeUnary=function(t,e){var i,r=this.start,s=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))i=this.parseAwait(),e=!0;else if(this.type.prefix){var n=this.startNode(),a=this.type===w.incDec;n.operator=this.value,n.prefix=!0,this.next(),n.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),a?this.checkLVal(n.argument):this.strict&&"delete"===n.operator&&"Identifier"===n.argument.type?this.raiseRecoverable(n.start,"Deleting local variable in strict mode"):e=!0,i=this.finishNode(n,a?"UpdateExpression":"UnaryExpression")}else{if(i=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,s);o.operator=this.value,o.prefix=!1,o.argument=i,this.checkLVal(i),this.next(),i=this.finishNode(o,"UpdateExpression")}}return!e&&this.eat(w.starstar)?this.buildBinary(r,s,i,this.parseMaybeUnary(null,!1),"**",!1):i},J.parseExprSubscripts=function(t){var e=this.start,i=this.startLoc,r=this.parseExprAtom(t);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var s=this.parseSubscripts(r,e,i);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1)),s},J.parseSubscripts=function(t,e,i,r){for(var s=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,n=!1;;){var a=this.parseSubscript(t,e,i,r,s,n);if(a.optional&&(n=!0),a===t||"ArrowFunctionExpression"===a.type){if(n){var o=this.startNodeAt(e,i);o.expression=a,a=this.finishNode(o,"ChainExpression")}return a}t=a}},J.parseSubscript=function(t,e,i,r,s,n){var a=this.options.ecmaVersion>=11,o=a&&this.eat(w.questionDot);r&&o&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(w.bracketL);if(c||o&&this.type!==w.parenL&&this.type!==w.backQuote||this.eat(w.dot)){var h=this.startNodeAt(e,i);h.object=t,h.property=c?this.parseExpression():this.parseIdent("never"!==this.options.allowReserved),h.computed=!!c,c&&this.expect(w.bracketR),a&&(h.optional=o),t=this.finishNode(h,"MemberExpression")}else if(!r&&this.eat(w.parenL)){var l=new G,p=this.yieldPos,u=this.awaitPos,d=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var f=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1,l);if(s&&!o&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(l,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=p,this.awaitPos=u,this.awaitIdentPos=d,this.parseArrowExpression(this.startNodeAt(e,i),f,!0);this.checkExpressionErrors(l,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=u||this.awaitPos,this.awaitIdentPos=d||this.awaitIdentPos;var _=this.startNodeAt(e,i);_.callee=t,_.arguments=f,a&&(_.optional=o),t=this.finishNode(_,"CallExpression")}else if(this.type===w.backQuote){(o||n)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var m=this.startNodeAt(e,i);m.tag=t,m.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(m,"TaggedTemplateExpression")}return t},J.parseExprAtom=function(t){this.type===w.slash&&this.readRegexp();var e,i=this.potentialArrowAt===this.start;switch(this.type){case w._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==w.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(e,"Super");case w._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case w.name:var r=this.start,s=this.startLoc,n=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!n&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(w._function))return this.parseFunction(this.startNodeAt(r,s),0,!1,!0);if(i&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===w.name&&!n)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(w.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[a],!0)}return a;case w.regexp:var o=this.value;return(e=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},e;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return(e=this.startNode()).value=this.type===w._null?null:this.type===w._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case w.parenL:var c=this.start,h=this.parseParenAndDistinguishExpression(i);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(t.parenthesizedAssign=c),t.parenthesizedBind<0&&(t.parenthesizedBind=c)),h;case w.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(w.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case w.braceL:return this.parseObj(!1,t);case w._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();case w._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},J.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case w.parenL:return this.parseDynamicImport(t);case w.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}},J.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(w.parenR)){var e=this.start;this.eat(w.comma)&&this.eat(w.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},J.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"!==this.options.sourceType&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},J.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},J.parseParenExpression=function(){this.expect(w.parenL);var t=this.parseExpression();return this.expect(w.parenR),t},J.parseParenAndDistinguishExpression=function(t){var e,i=this.start,r=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var n,a=this.start,o=this.startLoc,c=[],h=!0,l=!1,p=new G,u=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;){if(h?h=!1:this.expect(w.comma),s&&this.afterTrailingComma(w.parenR,!0)){l=!0;break}if(this.type===w.ellipsis){n=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}c.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var f=this.start,_=this.startLoc;if(this.expect(w.parenR),t&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=u,this.awaitPos=d,this.parseParenArrowList(i,r,c);c.length&&!l||this.unexpected(this.lastTokStart),n&&this.unexpected(n),this.checkExpressionErrors(p,!0),this.yieldPos=u||this.yieldPos,this.awaitPos=d||this.awaitPos,c.length>1?((e=this.startNodeAt(a,o)).expressions=c,this.finishNodeAt(e,"SequenceExpression",f,_)):e=c[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(i,r);return m.expression=e,this.finishNode(m,"ParenthesizedExpression")}return e},J.parseParenItem=function(t){return t},J.parseParenArrowList=function(t,e,i){return this.parseArrowExpression(this.startNodeAt(t,e),i)};var Z=[];J.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(w.dot)){t.meta=e;var i=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),i&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"'new.target' can only be used in functions"),this.finishNode(t,"MetaProperty")}var r=this.start,s=this.startLoc,n=this.type===w._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,s,!0),n&&"ImportExpression"===t.callee.type&&this.raise(r,"Cannot use new with import()"),this.eat(w.parenL)?t.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1):t.arguments=Z,this.finishNode(t,"NewExpression")},J.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===w.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),i.tail=this.type===w.backQuote,this.finishNode(i,"TemplateElement")},J.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var i=this.startNode();this.next(),i.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(i.quasis=[r];!r.tail;)this.type===w.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(w.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(w.braceR),i.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(i,"TemplateLiteral")},J.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!E.test(this.input.slice(this.lastTokEnd,this.start))},J.parseObj=function(t,e){var i=this.startNode(),r=!0,s={};for(i.properties=[],this.next();!this.eat(w.braceR);){if(r)r=!1;else if(this.expect(w.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(w.braceR))break;var n=this.parseProperty(t,e);t||this.checkPropClash(n,s,e),i.properties.push(n)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")},J.parseProperty=function(t,e){var i,r,s,n,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===w.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,e),this.type===w.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(s=this.start,n=this.startLoc),t||(i=this.eat(w.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(a)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(a,e)):r=!1,this.parsePropertyValue(a,t,i,r,s,n,e,o),this.finishNode(a,"Property")},J.parsePropertyValue=function(t,e,i,r,s,n,a,o){if((i||r)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===w.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,r);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===w.comma||this.type===w.braceR||this.type===w.eq)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((i||r)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=s),t.kind="init",e?t.value=this.parseMaybeDefault(s,n,t.key):this.type===w.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(s,n,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(i||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var c="get"===t.kind?0:1;if(t.value.params.length!==c){var h=t.value.start;"get"===t.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},J.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(w.bracketR),t.key;t.computed=!1}return t.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},J.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},J.parseMethod=function(t,e,i){var r=this.startNode(),s=this.yieldPos,n=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=t),this.options.ecmaVersion>=8&&(r.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|B(e,r.generator)|(i?128:0)),this.expect(w.parenL),r.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=s,this.awaitPos=n,this.awaitIdentPos=a,this.finishNode(r,"FunctionExpression")},J.parseArrowExpression=function(t,e,i){var r=this.yieldPos,s=this.awaitPos,n=this.awaitIdentPos;return this.enterScope(16|B(i,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=n,this.finishNode(t,"ArrowFunctionExpression")},J.parseFunctionBody=function(t,e,i){var r=e&&this.type!==w.braceL,s=this.strict,n=!1;if(r)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);s&&!a||(n=this.strictDirective(this.end))&&a&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],n&&(this.strict=!0),this.checkParams(t,!s&&!n&&!e&&!i&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLVal(t.id,5),t.body=this.parseBlock(!1,void 0,n&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=o}this.exitScope()},J.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1){if("Identifier"!==i[e].type)return!1}return!0},J.checkParams=function(t,e){for(var i={},r=0,s=t.params;r<s.length;r+=1){var n=s[r];this.checkLVal(n,1,e?null:i)}},J.parseExprList=function(t,e,i,r){for(var s=[],n=!0;!this.eat(t);){if(n)n=!1;else if(this.expect(w.comma),e&&this.afterTrailingComma(t))break;var a=void 0;i&&this.type===w.comma?a=null:this.type===w.ellipsis?(a=this.parseSpread(r),r&&this.type===w.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),s.push(a)}return s},J.checkUnreserved=function(t){var e=t.start,i=t.end,r=t.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,i).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))},J.parseIdent=function(t,e){var i=this.startNode();return this.type===w.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,"class"!==i.name&&"function"!==i.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(i,"Identifier"),t||(this.checkUnreserved(i),"await"!==i.name||this.awaitIdentPos||(this.awaitIdentPos=i.start)),i},J.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===w.semi||this.canInsertSemicolon()||this.type!==w.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(w.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},J.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!1),this.finishNode(t,"AwaitExpression")};var tt=U.prototype;tt.raise=function(t,e){var i=j(this.input,t);e+=" ("+i.line+":"+i.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=i,r.raisedAt=this.pos,r},tt.raiseRecoverable=tt.raise,tt.curPosition=function(){if(this.options.locations)return new R(this.curLine,this.pos-this.lineStart)};var et=U.prototype,it=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};et.enterScope=function(t){this.scopeStack.push(new it(t))},et.exitScope=function(){this.scopeStack.pop()},et.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},et.declareName=function(t,e,i){var r=!1;if(2===e){var s=this.currentScope();r=s.lexical.indexOf(t)>-1||s.functions.indexOf(t)>-1||s.var.indexOf(t)>-1,s.lexical.push(t),this.inModule&&1&s.flags&&delete this.undefinedExports[t]}else if(4===e){this.currentScope().lexical.push(t)}else if(3===e){var n=this.currentScope();r=this.treatFunctionsAsVar?n.lexical.indexOf(t)>-1:n.lexical.indexOf(t)>-1||n.var.indexOf(t)>-1,n.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(t)>-1&&!(32&o.flags&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){r=!0;break}if(o.var.push(t),this.inModule&&1&o.flags&&delete this.undefinedExports[t],3&o.flags)break}r&&this.raiseRecoverable(i,"Identifier '"+t+"' has already been declared")},et.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},et.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},et.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags)return e}},et.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags&&!(16&e.flags))return e}};var rt=function(t,e,i){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new D(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},st=U.prototype;function nt(t,e,i,r){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=i),t}st.startNode=function(){return new rt(this,this.start,this.startLoc)},st.startNodeAt=function(t,e){return new rt(this,t,e)},st.finishNode=function(t,e){return nt.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},st.finishNodeAt=function(t,e,i,r){return nt.call(this,t,e,i,r)};var at=function(t,e,i,r,s){this.token=t,this.isExpr=!!e,this.preserveSpace=!!i,this.override=r,this.generator=!!s},ot={b_stat:new at("{",!1),b_expr:new at("{",!0),b_tmpl:new at("${",!1),p_stat:new at("(",!1),p_expr:new at("(",!0),q_tmpl:new at("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new at("function",!1),f_expr:new at("function",!0),f_expr_gen:new at("function",!0,!1,null,!0),f_gen:new at("function",!1,!1,null,!0)},ct=U.prototype;ct.initialContext=function(){return[ot.b_stat]},ct.braceIsBlock=function(t){var e=this.curContext();return e===ot.f_expr||e===ot.f_stat||(t!==w.colon||e!==ot.b_stat&&e!==ot.b_expr?t===w._return||t===w.name&&this.exprAllowed?E.test(this.input.slice(this.lastTokEnd,this.start)):t===w._else||t===w.semi||t===w.eof||t===w.parenR||t===w.arrow||(t===w.braceL?e===ot.b_stat:t!==w._var&&t!==w._const&&t!==w.name&&!this.exprAllowed):!e.isExpr)},ct.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},ct.updateContext=function(t){var e,i=this.type;i.keyword&&t===w.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr},w.parenR.updateContext=w.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===ot.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},w.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?ot.b_stat:ot.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(ot.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(t){var e=t===w._if||t===w._for||t===w._with||t===w._while;this.context.push(e?ot.p_stat:ot.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(t){!t.beforeExpr||t===w.semi||t===w._else||t===w._return&&E.test(this.input.slice(this.lastTokEnd,this.start))||(t===w.colon||t===w.braceL)&&this.curContext()===ot.b_stat?this.context.push(ot.f_stat):this.context.push(ot.f_expr),this.exprAllowed=!1},w.backQuote.updateContext=function(){this.curContext()===ot.q_tmpl?this.context.pop():this.context.push(ot.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(t){if(t===w._function){var e=this.context.length-1;this.context[e]===ot.f_expr?this.context[e]=ot.f_expr_gen:this.context[e]=ot.f_gen}this.exprAllowed=!0},w.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==w.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var ht="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",lt=ht+" Extended_Pictographic",pt={9:ht,10:lt,11:lt},ut="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",dt="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",ft=dt+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",_t={9:dt,10:ft,11:ft+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho"},mt={};function gt(t){var e=mt[t]={binary:I(pt[t]+" "+ut),nonBinary:{General_Category:I(ut),Script:I(_t[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}gt(9),gt(10),gt(11);var vt=U.prototype,yt=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=mt[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function xt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function bt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function wt(t){return t>=65&&t<=90||t>=97&&t<=122}function Et(t){return wt(t)||95===t}function At(t){return Et(t)||kt(t)}function kt(t){return t>=48&&t<=57}function St(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Ct(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Tt(t){return t>=48&&t<=55}yt.prototype.reset=function(t,e,i){var r=-1!==i.indexOf("u");this.start=0|t,this.source=e+"",this.flags=i,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},yt.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},yt.prototype.at=function(t,e){void 0===e&&(e=!1);var i=this.source,r=i.length;if(t>=r)return-1;var s=i.charCodeAt(t);if(!e&&!this.switchU||s<=55295||s>=57344||t+1>=r)return s;var n=i.charCodeAt(t+1);return n>=56320&&n<=57343?(s<<10)+n-56613888:s},yt.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var i=this.source,r=i.length;if(t>=r)return r;var s,n=i.charCodeAt(t);return!e&&!this.switchU||n<=55295||n>=57344||t+1>=r||(s=i.charCodeAt(t+1))<56320||s>57343?t+1:t+2},yt.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},yt.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},yt.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},yt.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},vt.validateRegExpFlags=function(t){for(var e=t.validFlags,i=t.flags,r=0;r<i.length;r++){var s=i.charAt(r);-1===e.indexOf(s)&&this.raise(t.start,"Invalid regular expression flag"),i.indexOf(s,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},vt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},vt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1){var r=i[e];-1===t.groupNames.indexOf(r)&&t.raise("Invalid named capture referenced")}},vt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},vt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},vt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},vt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1},vt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},vt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},vt.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var r=0,s=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(s=t.lastIntValue),t.eat(125)))return-1!==s&&s<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1},vt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},vt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},vt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},vt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},vt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},vt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},vt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!bt(e)&&(t.lastIntValue=e,t.advance(),!0)},vt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,i=0;-1!==(i=t.current())&&!bt(i);)t.advance();return t.pos!==e},vt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},vt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},vt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},vt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=xt(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=xt(t.lastIntValue);return!0}return!1},vt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,r=t.current(i);return t.advance(i),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(r=t.lastIntValue),function(t){return f(t,!0)||36===t||95===t}(r)?(t.lastIntValue=r,!0):(t.pos=e,!1)},vt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,r=t.current(i);return t.advance(i),92===r&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(r=t.lastIntValue),function(t){return _(t,!0)||36===t||95===t||8204===t||8205===t}(r)?(t.lastIntValue=r,!0):(t.pos=e,!1)},vt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},vt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1},vt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},vt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},vt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},vt.regexp_eatZero=function(t){return 48===t.current()&&!kt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},vt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},vt.regexp_eatControlLetter=function(t){var e=t.current();return!!wt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},vt.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var i,r=t.pos,s=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var n=t.lastIntValue;if(s&&n>=55296&&n<=56319){var a=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var o=t.lastIntValue;if(o>=56320&&o<=57343)return t.lastIntValue=1024*(n-55296)+(o-56320)+65536,!0}t.pos=a,t.lastIntValue=n}return!0}if(s&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((i=t.lastIntValue)>=0&&i<=1114111))return!0;s&&t.raise("Invalid unicode escape"),t.pos=r}return!1},vt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},vt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},vt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},vt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,i,r),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var s=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,s),!0}return!1},vt.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){O(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(i)||t.raise("Invalid property value")},vt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},vt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Et(e=t.current());)t.lastStringValue+=xt(e),t.advance();return""!==t.lastStringValue},vt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";At(e=t.current());)t.lastStringValue+=xt(e),t.advance();return""!==t.lastStringValue},vt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},vt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},vt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var i=t.lastIntValue;!t.switchU||-1!==e&&-1!==i||t.raise("Invalid character class"),-1!==e&&-1!==i&&e>i&&t.raise("Range out of order in character class")}}},vt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(99===i||Tt(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},vt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},vt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!kt(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},vt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},vt.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;kt(i=t.current());)t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e},vt.regexp_eatHexDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;St(i=t.current());)t.lastIntValue=16*t.lastIntValue+Ct(i),t.advance();return t.pos!==e},vt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*i+t.lastIntValue:t.lastIntValue=8*e+i}else t.lastIntValue=e;return!0}return!1},vt.regexp_eatOctalDigit=function(t){var e=t.current();return Tt(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},vt.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var s=t.current();if(!St(s))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+Ct(s),t.advance()}return!0};var Pt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new D(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Nt=U.prototype;function Ot(t){return"function"!=typeof BigInt?null:BigInt(t.replace(/_/g,""))}function Lt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}Nt.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Pt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Nt.getToken=function(){return this.next(),new Pt(this)},"undefined"!=typeof Symbol&&(Nt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===w.eof,value:e}}}}),Nt.curContext=function(){return this.context[this.context.length-1]},Nt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(w.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Nt.readToken=function(t){return f(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Nt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},Nt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),i=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(A.lastIndex=i;(t=A.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(i+2,r),i,this.pos,e,this.curPosition())},Nt.skipLineComment=function(t){for(var e=this.pos,i=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!k(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,i,this.curPosition())},Nt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&S.test(String.fromCharCode(t))))break t;++this.pos}}},Nt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)},Nt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},Nt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},Nt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,r=42===t?w.star:w.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++i,r=w.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(w.assign,i+1):this.finishOp(r,i)},Nt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(w.assign,3);return this.finishOp(124===t?w.logicalOR:w.logicalAND,2)}return 61===e?this.finishOp(w.assign,2):this.finishOp(124===t?w.bitwiseOR:w.bitwiseAND,1)},Nt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},Nt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!E.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(w.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},Nt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(w.assign,i+1):this.finishOp(w.bitShift,i)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(i=2),this.finishOp(w.relational,i)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Nt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(w.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(61===t?w.eq:w.prefix,1)},Nt.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var i=this.input.charCodeAt(this.pos+2);if(i<48||i>57)return this.finishOp(w.questionDot,2)}if(63===e){if(t>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(w.assign,3);return this.finishOp(w.coalesce,2)}}return this.finishOp(w.question,1)},Nt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(w.prefix,1)}this.raise(this.pos,"Unexpected character '"+Lt(t)+"'")},Nt.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)},Nt.readRegexp=function(){for(var t,e,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(E.test(r)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++this.pos}var s=this.input.slice(i,this.pos);++this.pos;var n=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(n);var o=this.regexpState||(this.regexpState=new yt(this));o.reset(i,s,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var c=null;try{c=new RegExp(s,a)}catch(t){}return this.finishToken(w.regexp,{pattern:s,flags:a,value:c})},Nt.readInt=function(t,e,i){for(var r=this.options.ecmaVersion>=12&&void 0===e,s=i&&48===this.input.charCodeAt(this.pos),n=this.pos,a=0,o=0,c=0,h=null==e?1/0:e;c<h;++c,++this.pos){var l=this.input.charCodeAt(this.pos),p=void 0;if(r&&95===l)s&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===c&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=l;else{if((p=l>=97?l-97+10:l>=65?l-65+10:l>=48&&l<=57?l-48:1/0)>=t)break;o=l,a=a*t+p}}return r&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===n||null!=e&&this.pos-n!==e?null:a},Nt.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var i=this.readInt(t);return null==i&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(i=Ot(this.input.slice(e,this.pos)),++this.pos):f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,i)},Nt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var i=this.pos-e>=2&&48===this.input.charCodeAt(e);i&&this.strict&&this.raise(e,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!i&&!t&&this.options.ecmaVersion>=11&&110===r){var s=Ot(this.input.slice(e,this.pos));return++this.pos,f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,s)}i&&/[89]/.test(this.input.slice(e,this.pos))&&(i=!1),46!==r||i||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||i||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),f(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var n,a=(n=this.input.slice(e,this.pos),i?parseInt(n,8):parseFloat(n.replace(/_/g,"")));return this.finishToken(w.num,a)},Nt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Nt.readString=function(t){for(var e="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(!1),i=this.pos):(k(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(i,this.pos++),this.finishToken(w.string,e)};var It={};Nt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==It)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Nt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw It;this.raise(t,e)},Nt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(96===i||36===i&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==w.template&&this.type!==w.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(w.template,t)):36===i?(this.pos+=2,this.finishToken(w.dollarBraceL)):(++this.pos,this.finishToken(w.backQuote));if(92===i)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(k(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(i)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Nt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(w.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Nt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Lt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(t){var i=this.pos-1;return this.invalidStringToken(i,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],s=parseInt(r,8);return s>255&&(r=r.slice(0,-1),s=parseInt(r,8)),this.pos+=r.length-1,e=this.input.charCodeAt(this.pos),"0"===r&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-r.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(s)}return k(e)?"":String.fromCharCode(e)}},Nt.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return null===i&&this.invalidStringToken(e,"Bad character escape sequence"),i},Nt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,i=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var s=this.fullCharCodeAtPos();if(_(s,r))this.pos+=s<=65535?1:2;else{if(92!==s)break;this.containsEsc=!0,t+=this.input.slice(i,this.pos);var n=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?f:_)(a,r)||this.invalidStringToken(n,"Invalid Unicode escape"),t+=Lt(a),i=this.pos}e=!1}return t+this.input.slice(i,this.pos)},Nt.readWord=function(){var t=this.readWord1(),e=w.name;return this.keywords.test(t)&&(e=x[t]),this.finishToken(e,t)};var Rt="7.4.1";function Dt(t,e){return U.parse(t,e)}function jt(t,e,i){return U.parseExpressionAt(t,e,i)}function Mt(t,e){return U.tokenizer(t,e)}U.acorn={Parser:U,version:Rt,defaultOptions:M,Position:R,SourceLocation:D,getLineInfo:j,Node:rt,TokenType:m,tokTypes:w,keywordTypes:x,TokContext:at,tokContexts:ot,isIdentifierChar:_,isIdentifierStart:f,Token:Pt,isNewLine:k,lineBreak:E,lineBreakG:A,nonASCIIwhitespace:S}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{__webpack_require__.d(__webpack_exports__,{default:()=>Qt});__webpack_require__(9463),__webpack_require__(7495),__webpack_require__(5440),__webpack_require__(2953);const t=(t=>{var e={};return __webpack_require__.d(e,t),e})({characters:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.characters,chat:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.chat,chat_metadata:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.chat_metadata,eventSource:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.eventSource,event_types:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.event_types,getCurrentChatId:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.getCurrentChatId,messageFormatting:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.messageFormatting,name1:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.name1,name2:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.name2,saveChatConditional:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.saveChatConditional,saveSettingsDebounced:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.saveSettingsDebounced,substituteParams:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.substituteParams,this_chid:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.this_chid,updateMessageBlock:()=>__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.updateMessageBlock});__webpack_require__(4864),__webpack_require__(2041);var e=__webpack_require__(5134),i=__webpack_require__.n(e),r=__webpack_require__(8961),s=__webpack_require__.n(r);const n=(t=>{var e={};return __webpack_require__.d(e,t),e})({executeSlashCommandsWithOptions:()=>__WEBPACK_EXTERNAL_MODULE__slash_commands_js_f5742a84__.executeSlashCommandsWithOptions});__webpack_require__(6910),__webpack_require__(2762);const a=(t=>{var e={};return __webpack_require__.d(e,t),e})({DEFAULT_DEPTH:()=>__WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__.DEFAULT_DEPTH,DEFAULT_WEIGHT:()=>__WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__.DEFAULT_WEIGHT,METADATA_KEY:()=>__WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__.METADATA_KEY,loadWorldInfo:()=>__WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__.loadWorldInfo,parseRegexFromString:()=>__WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__.parseRegexFromString,selected_world_info:()=>__WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__.selected_world_info,world_info:()=>__WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__.world_info,world_info_case_sensitive:()=>__WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__.world_info_case_sensitive,world_info_logic:()=>__WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__.world_info_logic,world_info_match_whole_words:()=>__WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__.world_info_match_whole_words,world_info_position:()=>__WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__.world_info_position,world_info_use_group_scoring:()=>__WEBPACK_EXTERNAL_MODULE__world_info_js_83198f57__.world_info_use_group_scoring});const o=(t=>{var e={};return __webpack_require__.d(e,t),e})({power_user:()=>__WEBPACK_EXTERNAL_MODULE__power_user_js_3c7cfb8b__.power_user});const c=(t=>{var e={};return __webpack_require__.d(e,t),e})({getCharaFilename:()=>__WEBPACK_EXTERNAL_MODULE__utils_js_d605cabe__.getCharaFilename});const h=(t=>{var e={};return __webpack_require__.d(e,t),e})({getGroupMembers:()=>__WEBPACK_EXTERNAL_MODULE__group_chats_js_678c16bd__.getGroupMembers,groups:()=>__WEBPACK_EXTERNAL_MODULE__group_chats_js_678c16bd__.groups,selected_group:()=>__WEBPACK_EXTERNAL_MODULE__group_chats_js_678c16bd__.selected_group}),l=["uid"];function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e,i){var r;return(e="symbol"==typeof(r=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?r:String(r))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(t,e){if(null==t)return{};var i,r,s=function(t,e){if(null==t)return{};var i,r,s={},n=Object.keys(t);for(r=0;r<n.length;r++)i=n[r],e.indexOf(i)>=0||(s[i]=t[i]);return s}(t,e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)i=n[r],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}let m=new Map;async function g(t,e){const i=await x(t,e);return i&&m.set("".concat(t,".").concat(e),i),i}function v(){m.clear()}async function y(e){var i;const r=await(0,a.loadWorldInfo)(e||(null===(i=t.characters[t.this_chid])||void 0===i||null===(i=i.data)||void 0===i||null===(i=i.extensions)||void 0===i?void 0:i.world)||o.power_user.persona_description_lorebook||t.chat_metadata[a.METADATA_KEY]||"");if(!r)return[];const s=Object.values(r.entries).map((t=>{let{uid:i}=t;return u(u({},f(t,l)),{},{uid:Number(i),world:e})}));return s.sort(T(s))}async function x(t,e){for(const i of await y(t))if(i.comment===e||i.uid===e||i.comment.match(e))return i;return null}function b(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{withConstant:s,withDisabled:n,onlyDisabled:o}=r;let c=new Set;i=_.castArray(i).join("\n\n");for(const r of e){var h;if(!s&&r.constant)continue;if(o&&!r.disable)continue;if(!n&&!o&&r.disable)continue;if(r.vectorized)continue;if(r.useProbability&&r.probability<_.random(1,100))continue;if(r.constant){c.add(r);continue}if(!r.key.map((e=>(0,t.substituteParams)(e))).find((t=>E(i,t,r))))continue;if(!(r.selective&&_.isArray(r.keysecondary)&&r.keysecondary.length>0)){c.add(r);continue}const e=null!==(h=r.selectiveLogic)&&void 0!==h?h:0;let l=!1,p=!0;for(const s of r.keysecondary){const n=(0,t.substituteParams)(s),o=n&&E(i,n.trim(),r);if(o&&(l=!0),o||(p=!1),e===a.world_info_logic.AND_ANY&&o){c.add(r);break}if(e===a.world_info_logic.NOT_ALL&&!o){c.add(r);break}}e!==a.world_info_logic.NOT_ANY||l?e===a.world_info_logic.AND_ALL&&p&&c.add(r):c.add(r)}if(0===c.size)return[];const l=_.groupBy(Array.from(c),(t=>t.group)),p=l[""]||[];if(p.length>0&&_.size(l)<=1)return p.sort(T(p));let u=[];for(const[t,e]of _.entries(l)){if(""===t)continue;if(1===e.length){u.push(e[0]);continue}if(e.filter((t=>t.groupOverride)).length>0){const t=e.map((t=>t.order)),i=_.min(t);if(i){u.push(e[Math.max(t.findIndex((t=>t<=i)),0)]);continue}}if(e.filter((t=>{var e;return null!==(e=t.useGroupScoring)&&void 0!==e?e:a.world_info_use_group_scoring})).length>0){const t=e.map((t=>A(i,t))),r=_.max(t);if(r){u.push(e[Math.max(t.findIndex((t=>t>=r)),0)]);continue}}if(e.filter((t=>!t.groupOverride&&!t.useGroupScoring)).length>0){const t=e.map((t=>{var e;return null!==(e=t.groupWeight)&&void 0!==e?e:a.DEFAULT_WEIGHT})),i=_.sum(t);let r=_.random(1,i);const s=t.findIndex((t=>(r-=t)<=0));s>=0&&u.push(e[s])}}const d=_.concat(p,u);return d.sort(T(d))}function w(t,e){var i;return(null!==(i=e.caseSensitive)&&void 0!==i?i:a.world_info_case_sensitive)?t:t.toLowerCase()}function E(t,e,i){var r;const s=(0,a.parseRegexFromString)(e);if(s)return s.test(t);t=w(t,i);const n=w(e,i);if(!(null!==(r=i.matchWholeWords)&&void 0!==r?r:a.world_info_match_whole_words))return t.includes(n);if(n.split(/\s+/).length>1)return t.includes(n);if(new RegExp("(?:^|\\W)(".concat(_.escapeRegExp(n),")(?:$|\\W)")).test(t))return!0;return!1}function A(t,e){const i=t;let r=0,s=0,n=0,o=0;if(Array.isArray(e.key)){r=e.key.length;for(const t of e.key)E(i,t,e)&&n++}if(Array.isArray(e.keysecondary)){s=e.keysecondary.length;for(const t of e.keysecondary)E(i,t,e)&&o++}if(!r)return 0;if(s>0)switch(e.selectiveLogic){case a.world_info_logic.AND_ANY:return n+o;case a.world_info_logic.AND_ALL:return o===s?n+o:n}return n}function k(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=[];if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){var l;const e=null===(l=t.characters[t.this_chid])||void 0===l||null===(l=l.data)||void 0===l||null===(l=l.extensions)||void 0===l?void 0:l.world;e&&!a.selected_world_info.includes(e)&&n.push(e);for(const t of(0,h.getGroupMembers)()){var p;const e=null==t||null===(p=t.data)||void 0===p||null===(p=p.extensions)||void 0===p?void 0:p.world;e&&!a.selected_world_info.includes(e)&&n.push(e)}}if(e)for(const t of a.selected_world_info)n.push(t);if(i){const e=t.chat_metadata[a.METADATA_KEY],i=o.power_user.persona_description_lorebook;i&&i!==e&&!a.selected_world_info.includes(i)&&n.push(i)}if(r){const e=(0,c.getCharaFilename)(t.this_chid);if(e){var u;const i=null===(u=a.world_info.charLore)||void 0===u?void 0:u.find((t=>t.name===e));if(i&&_.isArray(i.extraBooks)){var d;const e=null===(d=t.characters[t.this_chid])||void 0===d||null===(d=d.data)||void 0===d||null===(d=d.extensions)||void 0===d?void 0:d.world;for(const t of i.extraBooks)t===e||a.selected_world_info.includes(t)||n.push(t)}}for(const e of(0,h.getGroupMembers)()){const i=t.characters.findIndex((t=>t.avatar===e.avatar)),r=(0,c.getCharaFilename)(i);if(r){var f;const t=null===(f=a.world_info.charLore)||void 0===f?void 0:f.find((t=>t.name===r));if(t&&_.isArray(t.extraBooks)){var m;const i=null==e||null===(m=e.data)||void 0===m||null===(m=m.extensions)||void 0===m?void 0:m.world;for(const e of t.extraBooks)e===i||a.selected_world_info.includes(e)||n.push(e)}}}}if(s){const e=t.chat_metadata[a.METADATA_KEY];e&&!a.selected_world_info.includes(e)&&n.push(e)}return n}async function S(){let t=[];const e=k(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2],!(arguments.length>3&&void 0!==arguments[3])||arguments[3],!(arguments.length>4&&void 0!==arguments[4])||arguments[4]);for(const i of e){const e=await y(i);(null==e?void 0:e.length)>0&&(t=t.concat(e))}return t.sort(T(t))}const C={[a.world_info_position.before]:4,[a.world_info_position.after]:3,[a.world_info_position.EMTop]:2,[a.world_info_position.EMBottom]:1,[a.world_info_position.ANTop]:1,[a.world_info_position.ANBottom]:-1};function T(e){return(i,r)=>function(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.DEFAULT_DEPTH;function s(e){var i,s,n;const o=C[e.position];if(null==o)return null!==(i=e.depth)&&void 0!==i?i:a.DEFAULT_DEPTH;if(e.position===a.world_info_position.ANTop||e.position===a.world_info_position.ANBottom)switch(t.chat_metadata.note_position){case 0:case 2:return o+r+C[a.world_info_position.before]+2;case 1:return(null!==(s=t.chat_metadata.note_depth)&&void 0!==s?s:a.DEFAULT_DEPTH)+(null!==(n=e.depth)&&void 0!==n?n:a.DEFAULT_DEPTH);default:throw new Error("Unknown note_position: ".concat(t.chat_metadata.note_position))}return o+r}return s(i)-s(e)||e.order-i.order||i.uid-e.uid}(i,r,Math.max(...e.map((t=>t.position===a.world_info_position.atDepth?t.depth:0))))}__webpack_require__(9479);const P=(t=>{var e={};return __webpack_require__.d(e,t),e})({extension_settings:()=>__WEBPACK_EXTERNAL_MODULE__extensions_js_e625da88__.extension_settings,renderExtensionTemplateAsync:()=>__WEBPACK_EXTERNAL_MODULE__extensions_js_e625da88__.renderExtensionTemplateAsync});__webpack_require__(2480);const N={"#pt_enabled":{name:"enabled",value:!0},"#pt_generate_enabled":{name:"generate_enabled",value:!0},"#pt_generate_loader_enabled":{name:"generate_loader_enabled",value:!0},"#pt_render_enabled":{name:"render_enabled",value:!0},"#pt_render_loader_enabled":{name:"render_loader_enabled",value:!0},"#pt_with_context_disabled":{name:"with_context_disabled",value:!1},"#pt_debug_enabled":{name:"debug_enabled",value:!1},"#pt_autosave_enabled":{name:"autosave_enabled",value:!1},"#pt_preload_worldinfo":{name:"preload_worldinfo_enabled",value:!0},"#pt_code_blocks":{name:"code_blocks_enabled",value:!0},"#pt_world_active":{name:"world_active_enabled",value:!0},"#pt_permanent_evaluation":{name:"raw_message_evaluation_enabled",value:!1},"#pt_filter_chat_message":{name:"filter_message_enabled",value:!0},"#pt_cache_enabled":{name:"cache_enabled",value:!1}},O={};function L(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];P.extension_settings.EjsTemplate||(P.extension_settings.EjsTemplate={},e=!0);for(const[t,s]of Object.entries(N)){var i,r;if(e)P.extension_settings.EjsTemplate[s.name]=s.value,O[s.name]=s.value;else P.extension_settings.EjsTemplate[s.name]=null!==(i=$(t).prop("checked"))&&void 0!==i?i:s.value,O[s.name]=null!==(r=$(t).prop("checked"))&&void 0!==r?r:s.value}e&&(I(),(0,t.saveSettingsDebounced)())}function I(){for(const[a,o]of Object.entries(N)){var t,e,i,r,s,n;$(a).prop("checked",null!==(t=null!==(e=null===(i=P.extension_settings.EjsTemplate)||void 0===i?void 0:i[o.name])&&void 0!==e?e:O[o.name])&&void 0!==t?t:o.value),O[o.name]=null!==(r=null!==(s=null===(n=P.extension_settings.EjsTemplate)||void 0===n?void 0:n[o.name])&&void 0!==s?s:O[o.name])&&void 0!==r?r:o.value}}function R(){L()}function D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.this_chid;if(e=e||t.this_chid,null==e)return null;const i=t.characters[e]||t.characters.find((t=>t.name===e||t.name.match(e)));return i||null}const j="<% if (name) { %><<%- name %>>\n<% if (system_prompt) { %>System: <%- system_prompt %>\n<% } %>name: <%- name %>\n<% if (personality) { %>personality: <%- personality %>\n<% } %><% if (description) { %>description: <%- description %>\n<% } %><% if (message_example) { %>example:\n<%- message_example %>\n<% } %><% if (depth_prompt) { %>System: <%- depth_prompt %>\n<% } %></<%- name %>><% } %>";function M(){var e,i;const r=D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.this_chid);if(!r)return null;let s=r.mes_example.trim();return s&&s.startsWith("<START>")&&(s=s.slice(7).trim()),s=s.replace("<START>","```\n```"),s&&s.includes("```")&&(s+="\n```"),{name:r.name,description:r.description,personality:r.personality,scenario:r.scenario,first_message:r.first_mes,message_example:s,creator_notes:r.data.creator_notes,creatorcomment:r.creatorcomment,system_prompt:r.data.system_prompt,post_history_instructions:r.data.post_history_instructions,alternate_greetings:r.data.alternate_greetings,depth_prompt:null==r||null===(e=r.data)||void 0===e?void 0:e.depth_prompt,creator:null==r||null===(i=r.data)||void 0===i?void 0:i.creator}}let V={isDryRun:!1,isUpdated:!1,cache:{},traceId:0};function B(){var e;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:65535;return _.mergeWith({},(null===(e=D())||void 0===e||null===(e=e.data)||void 0===e||null===(e=e.extensions)||void 0===e?void 0:e.variables)||{},P.extension_settings.variables.global,t.chat_metadata.variables||{},...t.chat.slice(0,Math.max(i-1,0)).map((t=>{var e;return(null===(e=t.variables)||void 0===e?void 0:e[t.swipe_id||0])||{}})),{_trace_id:V.traceId++,_modify_id:0},((t,e)=>_.isArray(e)?e:void 0))}function U(e,i,r){var s,n,a;let o=-1;if(o=void 0!==(null==e?void 0:e.id)?e.id>-1?e.id:t.chat.length+e.id:void 0!==(null==e?void 0:e.role)?t.chat.findLastIndex((t=>t.is_system===("system"===e.role)||t.is_user===("user"===e.role)||!t.is_system&&!t.is_user&&"assistant"===e.role||"any"===e.role)):void 0===i?t.chat.findLastIndex((t=>!t.is_user&&!t.is_system)):i,o<0||o>=t.chat.length)return console.warn("No message found for filter: ".concat(e)),[void 0,void 0];let c=0;return c=void 0!==(null==e?void 0:e.swipe_id)?e.swipe_id:void 0!==r?r:(null===(s=t.chat[o])||void 0===s?void 0:s.swipe_id)||0,c<0&&(c=((null===(n=t.chat[o])||void 0===n||null===(n=n.swipes)||void 0===n?void 0:n.length)||0)+c),void 0===(null===(a=t.chat[o])||void 0===a||null===(a=a.swipes)||void 0===a?void 0:a[c])?(console.debug("No swipe found for filter: ".concat(e)),[o,c]):(O.debug_enabled&&console.debug("Found message ".concat(o," with swipe ").concat(c," for filter: ").concat(e)),[o,c])}function F(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{noCache:s}=r;(s||void 0===(null==this?void 0:this.runID))&&(V.cache=B(void 0!==(null==this?void 0:this.message_id)?this.message_id:65535),O.debug_enabled&&(console.debug("[Prompt Template] reload variables cache:"),console.debug(V.cache)));const{index:n,scope:a,flags:o,results:c,withMsg:h,merge:l,dryRun:p}=r;if(!p&&V.isDryRun)return;let u,d=i;if(null!=n){let s=JSON.parse(_.get(V.cache,e,"{}")),p=Number(n);if(p=Number.isNaN(p)?n:p,"nx"===o&&_.has(s,p))return;if("xx"===o&&!_.has(s,p))return;if("nxs"===o&&void 0!==W.call(this,e,r))return;if("xxs"===o&&void 0===W.call(this,e,r))return;switch(("old"===c||l)&&(u=_.get(s,p,void 0)),l&&(d=_.isArray(u)&&_.isArray(i)?_.concat(u,i):_.mergeWith("old"===c?_.cloneDeep(u):u,i,((t,e)=>_.isArray(e)?e:void 0))),void 0===d?_.unset(s,p):_.set(s,p,d),_.set(V.cache,e,JSON.stringify(s)),a||"message"){case"global":s=JSON.parse(_.get(P.extension_settings.variables.global,e,"{}")||"{}"),void 0===d?_.unset(s,p):_.set(s,p,d),_.set(P.extension_settings.variables.global,e,JSON.stringify(s)),O.debug_enabled&&console.debug("Set global variable ".concat(e," to ").concat(d," (index ").concat(p,")")),V.isUpdated=!0;break;case"local":t.chat_metadata.variables||(t.chat_metadata.variables={}),s=JSON.parse(_.get(t.chat_metadata.variables,e,"{}")||"{}"),void 0===d?_.unset(s,p):_.set(s,p,d),_.set(t.chat_metadata.variables,e,JSON.stringify(s)),O.debug_enabled&&console.debug("Set local variable ".concat(e," to ").concat(d," (index ").concat(p,")")),V.isUpdated=!0;break;case"message":const[i,r]=U(h,null==this?void 0:this.message_id,null==this?void 0:this.swipe_id);void 0!==i&&void 0!==r&&(t.chat[i].variables||(t.chat[i].variables={}),t.chat[i].variables[r]||(t.chat[i].variables[r]={}),s=JSON.parse(_.get(t.chat[i].variables[r],e,"{}")||"{}"),void 0===d?_.unset(s,p):_.set(s,p,d),_.set(t.chat[i].variables[r],e,JSON.stringify(s)),O.debug_enabled&&console.debug("Set message #".concat(i,".").concat(r," variable ").concat(e," to ").concat(d," (index ").concat(p,")")),V.isUpdated=!0)}V.cache._modify_id=V.cache._modify_id+1||1}else{if("nx"===o&&_.has(V.cache,e))return;if("xx"===o&&!_.has(V.cache,e))return;if("nxs"===o&&void 0!==W.call(this,e,r))return;if("xxs"===o&&void 0===W.call(this,e,r))return;switch(("old"===c||l)&&(u=_.get(V.cache,e,void 0)),l&&(d=_.isArray(u)&&_.isArray(i)?_.concat(u,i):_.mergeWith("old"===c?_.cloneDeep(u):u,i,((t,e)=>_.isArray(e)?e:void 0))),void 0===d?_.unset(V.cache,e):_.set(V.cache,e,d),a||"message"){case"global":void 0===d?_.unset(P.extension_settings.variables.global,e):_.set(P.extension_settings.variables.global,e,d),O.debug_enabled&&console.debug("Set global variable ".concat(e," to ").concat(d)),V.isUpdated=!0;break;case"local":t.chat_metadata.variables||(t.chat_metadata.variables={}),void 0===d?_.unset(t.chat_metadata.variables,e):_.set(t.chat_metadata.variables,e,d),O.debug_enabled&&console.debug("Set local variable ".concat(e," to ").concat(d)),V.isUpdated=!0;break;case"message":const[i,r]=U(h,null==this?void 0:this.message_id,null==this?void 0:this.swipe_id);void 0!==i&&void 0!==r&&(t.chat[i].variables||(t.chat[i].variables={}),t.chat[i].variables[r]||(t.chat[i].variables[r]={}),void 0===d?_.unset(t.chat[i].variables[r],e):_.set(t.chat[i].variables[r],e,d),O.debug_enabled&&console.debug("Set message #".concat(i,".").concat(r," variable ").concat(e," to ").concat(d)),V.isUpdated=!0)}V.cache._modify_id=V.cache._modify_id+1||1}return"old"===c?u:"fullcache"===c?V.cache:d}function W(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{noCache:r}=i;(r||void 0===(null==this?void 0:this.runID))&&(V.cache=B(void 0!==(null==this?void 0:this.message_id)?this.message_id:65535),O.debug_enabled&&(console.debug("[Prompt Template] reload variables cache:"),console.debug(V.cache)));const{index:s,scope:n,defaults:a,withMsg:o}=i;switch(n||"cache"){case"global":if(null!=s){const t=JSON.parse(_.get(P.extension_settings.variables.global,e,"{}")||"{}"),i=Number(s);return _.get(t,Number.isNaN(i)?s:i,a)}return _.get(P.extension_settings.variables.global,e,a);case"local":if(!t.chat_metadata.variables)return a;if(null!=s){const i=JSON.parse(_.get(t.chat_metadata.variables,e,"{}")||"{}"),r=Number(s);return _.get(i,Number.isNaN(r)?s:r,a)}return _.get(t.chat_metadata.variables,e,a);case"message":const[i,r]=U(o,null==this?void 0:this.message_id,null==this?void 0:this.swipe_id);if(void 0!==i&&void 0!==r){if(!t.chat[i].variables)return a;if(!t.chat[i].variables[r])return a;if(null!=s){const n=JSON.parse(_.get(t.chat[i].variables[r],e,"{}")||"{}"),o=Number(s);return _.get(n,Number.isNaN(o)?s:o,a)}return _.get(t.chat[i].variables[r],e,a)}return a}if(null!=s){const t=JSON.parse(_.get(V.cache,e,"{}")||"{}"),i=Number(s);return _.get(t,i,a)}return _.get(V.cache,e,a)}function q(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{noCache:r}=i;(r||void 0===(null==this?void 0:this.runID))&&(V.cache=B(void 0!==(null==this?void 0:this.message_id)?this.message_id:65535),O.debug_enabled&&(console.debug("[Prompt Template] reload variables cache:"),console.debug(V.cache)));const{index:s,inscope:n,outscope:a,flags:o,defaults:c,results:h,withMsg:l,dryRun:p,min:u,max:d}=i;if("nx"===o&&!_.has(V.cache,t)||"xx"===o&&_.has(V.cache,t)||"nxs"===o&&void 0===W.call(this,t,{index:s,withMsg:l,scope:n})||"xxs"===o&&void 0!==W.call(this,t,{index:s,withMsg:l,scope:n})||"n"===o||void 0===o){let i=W.call(this,t,{index:s,withMsg:l,scope:n,defaults:c||0})+e;return null!=u&&(i=Math.max(i,u)),null!=d&&(i=Math.min(i,d)),F.call(this,t,i,{index:s,results:h,withMsg:l,dryRun:p,scope:a,flags:"n"})}}function G(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return void 0===(null==this?void 0:this.runID)&&console.warn("setVariable called with invalid context ".concat(this)),q.call(this,t,-e,i)}async function z(){(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||V.isUpdated&&!1!==O.autosave_enabled)&&await(0,t.saveChatConditional)(),V.isUpdated=!1}const K=(t=>{var e={};return __webpack_require__.d(e,t),e})({oai_settings:()=>__WEBPACK_EXTERNAL_MODULE__openai_js_bf183548__.oai_settings});const X=(t=>{var e={};return __webpack_require__.d(e,t),e})({getRegexedString:()=>__WEBPACK_EXTERNAL_MODULE__regex_engine_js_683beba0__.getRegexedString,regex_placement:()=>__WEBPACK_EXTERNAL_MODULE__regex_engine_js_683beba0__.regex_placement});function H(e){const i=e.is_user?X.regex_placement.USER_INPUT:X.regex_placement.AI_OUTPUT;return(0,t.substituteParams)((0,X.getRegexedString)(e.mes,i,{characterOverride:e.name,isPrompt:!0}))}let Y={faker:void 0};$((async()=>{window.setTimeout((()=>{Promise.resolve().then(__webpack_require__.bind(__webpack_require__,3949)).then((t=>{Y.faker=t,console.log("Faker loaded"),console.log(t)})).catch((t=>{console.log("cannot load faker"),console.error(t)}))}),100)}));var Q=__webpack_require__(5233),J=__webpack_require__.n(Q);const Z={generateRegex:new Set};function tt(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=i.uuid||"regex-"+Math.random().toString(36).substring(2,9);if(Z.generateRegex.has(r)){const c=P.extension_settings.regex.find((t=>t.id===r));var s,n,a,o;if(c)c.findRegex=t instanceof RegExp?"/".concat(t.source,"/").concat(t.flags):t,c.replaceString=e,c.placement=_.compact([null===(s=i.user)||void 0===s||s?1:0,null===(n=i.assistant)||void 0===n||n?2:0,null===(a=i.worldinfo)||void 0===a||a?5:0,null===(o=i.reasoning)||void 0===o||o?6:0])}else{var c,h,l,p,u,d;P.extension_settings.regex.push({id:r,scriptName:"".concat(r),findRegex:t instanceof RegExp?t.source:t,replaceString:e,trimStrings:[],placement:_.compact([null===(c=i.user)||void 0===c||c?1:0,null===(h=i.assistant)||void 0===h||h?2:0,null!==(l=i.worldinfo)&&void 0!==l&&l?5:0,null===(p=i.reasoning)||void 0===p||p?6:0]),disabled:!1,markdownOnly:!1,promptOnly:!0,runOnEdit:!1,substituteRegex:0,minDepth:null!==(u=i.minDepth)&&void 0!==u?u:NaN,maxDepth:null!==(d=i.minDepth)&&void 0!==d?d:NaN})}Z.generateRegex.add(r)}function et(t){if(t){if(Z.generateRegex.has(t)){const e=P.extension_settings.regex.findLastIndex((e=>e.id===t));e>-1&&P.extension_settings.regex.splice(e,1),Z.generateRegex.delete(t)}}else P.extension_settings.regex=P.extension_settings.regex.filter((t=>!t.scriptName.startsWith(""))),Z.generateRegex.clear()}var it=__webpack_require__(9134);let rt=new Map;function st(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function nt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?st(Object(i),!0).forEach((function(e){at(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):st(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function at(t,e,i){var r;return(e="symbol"==typeof(r=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?r:String(r))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ot(t,e){return console.warn("[Prompt Template] include not implemented"),{filename:t,template:""}}function ct(t){return t}const ht={_,$,toastr,getCharaData:D,getWorldInfoData:y,getQuickReplyData:function(t){var e;const i=null===(e=P.extension_settings.quickReplyV2)||void 0===e?void 0:e.config;if(!i)return null;for(const e of i.setList)if(e.set.name===t||e.set.name.match(t))return e;return null},getWorldInfoActivatedData:async function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=await y(t);return r?b(r,e,i):[]},getEnabledWorldInfoEntries:S,selectActivatedEntries:b,activewi:g,activateWorldInfo:g,getChatMessage:function(e,i){const r=t.chat.filter((t=>!i||"user"===i&&t.is_user||"system"===i&&t.is_system||"assistant"===i&&!t.is_user&&!t.is_system));return H(r[e>-1?e:r.length+e]||"")},getChatMessages:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.chat.length,i=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;if(null==i){if(e>0)return t.chat.slice(0,e).map(H);if(e<0)return t.chat.slice(e).map(H)}else if("string"==typeof i){if(e>0)return t.chat.filter((t=>"user"===i&&t.is_user||"system"===i&&t.is_system||"assistant"===i&&!t.is_user&&!t.is_system)).slice(0,e).map(H);if(e<0)return t.chat.filter((t=>"user"===i&&t.is_user||"system"===i&&t.is_system||"assistant"===i&&!t.is_user&&!t.is_system)).slice(e).map(H)}else if("number"==typeof i){if(e>0)return t.chat.filter((t=>!r||"user"===r&&t.is_user||"system"===r&&t.is_system||"assistant"===r&&!t.is_user&&!t.is_system)).slice(e,i).map(H);if(e<0)return t.chat.filter((t=>!r||"user"===r&&t.is_user||"system"===r&&t.is_system||"assistant"===r&&!t.is_user&&!t.is_system)).slice(e,i).map(H)}return[]},activateRegex:tt,injectPrompt:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";rt.has(t)||rt.set(t,new Map),s=s||(0,it.h64)("".concat(t,"#").concat(e),6532).toString(),rt.get(t).set(s,{prompt:e,order:i,sticky:r,uid:s})},getPromptsInjected:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=rt.get(t);if(!i)return"";let r=Array.from(i.values()).sort(((t,e)=>t.order-e.order)).map((t=>t.prompt)).join("\n");for(const t of e)r=r.replace(t.search,t.replace);return r},activateWorldInfoByKeywords:async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=b(await S(),t,e);return i.forEach((t=>m.set("".concat(t.world,".").concat(t.uid),t))),i},getEnabledLoreBooks:k},lt="\n    ejs.render(\n        content,\n        data,\n        {\n            async: true,\n            escape: escaper,\n            includer: includer,\n            cache: false,\n            context: data,\n            client: false,\n            outputFunctionName: 'print',\n            localsName: 'locals',\n            _with: true,\n            ...options,\n        },\n    );\n";function pt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"escape-ejs";const r=e.openDelimiter||"<",s=e.closeDelimiter||">",n=e.delimiter||"%",a="<"===r&&">"===s?"":"#";return t.replaceAll(new RegExp("".concat(r).concat(a).concat(i).concat(s,"([\\s\\S]*?)").concat(r).concat(a,"/").concat(i).concat(s),"g"),(t=>t.replaceAll("".concat(r).concat(n),"".concat(r).concat(n).concat(n)).replaceAll("".concat(n).concat(s),"".concat(n).concat(n).concat(s))))}async function ut(t,e){var r,n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!=typeof t)return console.error("[Prompt Template] content is not a string"),t;let o="";var c,h;(t=pt(t,a.options||{},a.disableMarkup||"escape-ejs"),t=pt(t,a.options||{},"thinking"),t=pt(t,a.options||{},"think"),t=pt(t,a.options||{},"reasoning"),O.with_context_disabled||!1===(null===(r=a.options)||void 0===r?void 0:r._with))&&(a.options||(a.options={}),a.options._with=!1,null!==(c=a.options)&&void 0!==c&&c.destructuredLocals||(a.options.destructuredLocals=Object.keys(e)));O.cache_enabled&&!1!==(null===(n=a.options)||void 0===n?void 0:n.cache)&&(null!==(h=a.options)&&void 0!==h&&h.filename?a.options.cache=!0:(a.options||(a.options={}),a.options.cache=!0,a.options.filename=(0,it.h64)(t,4919).toString()));try{o=await s().runInNewContext(lt,{ejs:i(),content:t,data:e,escaper:a.escaper||ct,includer:a.includer||ot,options:a.options||{}})}catch(e){var l;if(null===(l=a.logging)||void 0===l||l){if(O.debug_enabled){const e=t.split("\n").map(((t,e)=>"".concat(e,": ").concat(t))).join("\n");console.debug("[Prompt Template] when ".concat(a.when," has errors:\n").concat(e))}e instanceof SyntaxError&&(e.message+=At(t)),console.error(e),toastr.error(e.message,"EJS Template Error",{onclick:()=>navigator.clipboard.writeText(e.message).then((()=>toastr.success("Copied to clipboard!")))})}throw e}return o}async function dt(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=null;var n,a;_.isPlainObject(i)?(s=await x((null===(n=this.world_info)||void 0===n?void 0:n.world)||"",e),_.isPlainObject(i)&&(r=i)):s=await x(e||(null===(a=this.world_info)||void 0===a?void 0:a.world)||"",i);return s?await ut((0,t.substituteParams)(s.content),_.merge(this,r,{world_info:s}),{when:"".concat(s.world,".").concat(s.comment)}):(console.warn("[Prompt Template] worldinfo ".concat(e," or entry ").concat(i," not found")),"")}async function ft(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=M(e);return s?(0,t.substituteParams)(await ut(i,_.merge(this,r,s,{chara_name:s.name}),{when:"".concat(e)}),void 0,s.name,void 0,void 0,!1):(console.warn("[Prompt Template] character ".concat(e," not found")),"")}async function _t(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=function(t){const e=K.oai_settings.prompts.find((e=>e.name===t||e.name.match(t)));return e&&(null==e?void 0:e.content)||null}(e);return r?(0,t.substituteParams)(await ut(r,_.merge(this,i,{prompt_name:e}),{when:"".concat(e)})):(console.warn("[Prompt Template] preset prompt ".concat(e," not found")),"")}let mt={};function gt(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){const i=_.get(mt,t);_.isArray(i)&&_.isArray(e)?e=_.concat(i,e):_.isPlainObject(i)&&_.isPlainObject(e)&&(e=_.mergeWith(i,e,((t,e)=>_.isArray(e)?e:void 0)))}_.set(mt,t,e),_.set(this,t,e)}function vt(t,e){let i={};_.isArray(e)&&(i=[]);for(const[r,s]of _.entries(e))_.isFunction(s)?i[r]=s.bind(t):_.isArray(s)||_.isPlainObject(s)?i[r]=vt(t,s):i[r]=s;return i}async function yt(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=function(t,e){var i;const r=null===(i=P.extension_settings.quickReplyV2)||void 0===i?void 0:i.config;if(!r)return"";const s=_.find(r.setList,(e=>e.set.name===t||e.set.name.match(t)));if(s){const t=_.find(s.set.qrList,(t=>t.label===e||t.label.match(e)));return(null==t?void 0:t.message)||""}return""}(e,i);return s?(0,t.substituteParams)(await ut(s,_.merge(this,r,{qr_name:e,qr_label:i}),{when:"".concat(e,".").concat(i)})):(console.warn("[Prompt Template] quick reply ".concat(e,".").concat(i," not found")),"")}async function xt(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,t.substituteParams)(await ut(e,_.merge(this,i),{when:"evalTemplate",options:r}))}async function bt(){var e;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=B(arguments.length>0&&void 0!==arguments[0]?arguments[0]:65535);V.cache=r;let s=nt(nt(nt({},ht),{},{variables:r,execute:async t=>(await(0,n.executeSlashCommandsWithOptions)(t)).pipe,SillyTavern:SillyTavern.getContext(),faker:Y.faker,userName:t.name1,assistantName:t.name2,chatId:(0,t.getCurrentChatId)(),characterId:t.this_chid,groups:h.groups,groupId:h.selected_group,charaLoreBook:null===(e=t.characters[t.this_chid])||void 0===e||null===(e=e.data)||void 0===e||null===(e=e.extensions)||void 0===e?void 0:e.world,personaLoreBook:o.power_user.persona_description_lorebook,chatLoreBook:t.chat_metadata[a.METADATA_KEY]},i),{},{get vars(){return new WeakRef(V.cache)}});return _.merge(s,nt(nt({getwi:dt.bind(s),getWorldInfo:dt.bind(s),getchr:ft.bind(s),getChara:ft.bind(s),getprp:_t.bind(s),getPresetPrompt:_t.bind(s),define:gt.bind(s),setvar:F.bind(s),setLocalVar:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return F.call(s,t,e,nt(nt({},i),{},{scope:"local"}))},setGlobalVar:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return F.call(s,t,e,nt(nt({},i),{},{scope:"global"}))},setMessageVar:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return F.call(s,t,e,nt(nt({},i),{},{scope:"message"}))},getvar:W.bind(s),getLocalVar:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return W.call(s,t,nt(nt({},e),{},{scope:"local"}))},getGlobalVar:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return W.call(s,t,nt(nt({},e),{},{scope:"global"}))},getMessageVar:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return W.call(s,t,nt(nt({},e),{},{scope:"message"}))},incvar:q.bind(s),incLocalVar:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return q.call(s,t,e,nt(nt({},i),{},{outscope:"local"}))},incGlobalVar:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return q.call(s,t,e,nt(nt({},i),{},{outscope:"global"}))},incMessageVar:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return q.call(s,t,e,nt(nt({},i),{},{outscope:"message"}))},decvar:G.bind(s),decLocalVar:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return G.call(s,t,e,nt(nt({},i),{},{outscope:"local"}))},decGlobalVar:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return G.call(s,t,e,nt(nt({},i),{},{outscope:"global"}))},decMessageVar:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return G.call(s,t,e,nt(nt({},i),{},{outscope:"message"}))},getqr:yt.bind(s),getQuickReply:yt.bind(s),evalTemplate:xt.bind(s)},vt(s,mt)),{},{ref:new WeakRef(s)})),await t.eventSource.emit("prompt_template_prepare",s),O.debug_enabled&&(console.debug("[Prompt Template] context prepared:"),console.debug(s)),s}const wt=/^\s*include\s+(\S+)/;function Et(t){let e="";return t.split("\n").forEach(((t,i)=>{0!==i&&(e+="\n");for(let i=0;i<t.length;i++)e+=" "})),e}function At(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;const r=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new(i().Template)(t,e).parseTemplateText();let s;const n=e.delimiter||"%",a=r.map((t=>{switch(t){case"<".concat(n):case"<".concat(n,"_"):return s=1,Et(t);case"<".concat(n,"="):case"<".concat(n,"-"):return s=2,";".concat(Et(t));case"".concat(n,">"):case"-".concat(n,">"):case"_".concat(n,">"):return t=Et(t)+(2===s?";":""),s=0,t;case(t.match(wt)||{}).input:return e.preprocessorInclude?Et(t):t;default:return s?t:Et(t)}})).join(""),o={allowAwaitOutsideFunction:!!e.await,locations:!0};let c=J()(a,void 0,o);return c&&(c.message+=" at ".concat(t.split("\n")[c.line-1])),c}(t);if(!r)return"";const s=t.split("\n"),n=r.line-1;return e=_.clamp(e,0,s.length),"".concat(s.slice(n-e,n).join("\n"),"\n").concat(s[n],"\n").concat(" ".repeat(r.column-1),"^\n").concat(s.slice(n+1,n+e+1).join("\n"),"\n\nat line: ").concat(n,", column: ").concat(r.column)}const kt=(t=>{var e={};return __webpack_require__.d(e,t),e})({getTokenCountAsync:()=>__WEBPACK_EXTERNAL_MODULE__tokenizers_js_d5863f55__.getTokenCountAsync});function St(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Ct(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?St(Object(i),!0).forEach((function(e){Tt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):St(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Tt(t,e,i){var r;return(e="symbol"==typeof(r=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?r:String(r))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let Pt=0,Nt=!1;const Ot="a8ff1bc7-15f2-4122-b43b-ded692560538";async function Lt(t){if(!1===O.enabled)return;if(t.dryRun)return;if(et(),v(),!1===O.generate_enabled)return;V.isDryRun=!1;const e=Date.now(),i=await bt(65535,{runType:"generate",runID:Pt++,message_id:void 0,swipe_id:void 0,is_last:void 0,is_user:void 0,is_system:void 0,name:void 0,isDryRun:!1}),r=!1===O.generate_loader_enabled?"":await Ft(i,"[GENERATE:BEFORE]");let s=r;for(const[e,r]of t.chat.entries()){const t=!1===O.generate_loader_enabled?"":await Ft(i,"[GENERATE:".concat(e,":BEFORE]"));if("string"==typeof r.content){const n=await Ut(r.content,i,"message #".concat(e+1,"(").concat(r.role,")")),a=!1===O.generate_loader_enabled?"":await Ft(i,"[GENERATE:".concat(e,":AFTER]"),n||"");null!=n&&(r.content=t+n+a,s+=t+n+a)}else if(_.isArray(r.content))for(const n of r.content)if("text"===n.type){const a=await Ut(n.text,i,"message #".concat(e+1,"(").concat(r.role,")")),o=!1===O.generate_loader_enabled?"":await Ft(i,"[GENERATE:".concat(e,":AFTER]"),a||"");null!=a&&(n.text=t+a+o,s+=t+a+o)}}const n=!1===O.generate_loader_enabled?"":await Ft(i,"[GENERATE:AFTER]",s);s+=n,t.chat[0].content=r+t.chat[0].content,t.chat[t.chat.length-1].content+=n;const a=Date.now()-e;console.log("[Prompt Template] processing ".concat(t.chat.length," messages in ").concat(a,"ms")),await z(),Bt(s,"send"),v(),et(),function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;for(const e of Array.from(rt.keys())){const i=rt.get(e);if(!i)continue;const r=[];for(const[e,s]of i.entries()){const i=s.sticky-t;i>=0?s.sticky=i:r.push(e)}if(r.length>0)if(r.length===i.size)rt.delete(e);else{for(const t of r)i.delete(t);0===i.size&&rt.delete(e)}}}()}async function It(t){if(!t.prompt)return;const e={dryRun:t.dryRun,chat:[{role:"",content:t.prompt}]};await Vt(e),await Lt(e),t.prompt=e.chat[0].content}async function Rt(e,i){var r,s,n,a;if(!1===O.enabled)return;if(!1===O.render_enabled)return;if(Nt)return;V.isDryRun=!!i;const o=Date.now();if(""===e||null==e)return void console.warn("chat message message_id is empty");const c=parseInt(e);if(isNaN(c)||c<0||c>=t.chat.length)return void console.warn("chat message #".concat(e," invalid"));const h=t.chat[c];if(!h)return void console.error("chat message #".concat(e," not found"));const l=null===(r=$('div.mes[mesid="'.concat(e,'"]')))||void 0===r?void 0:r.find(".mes_text");var p;if(null==l||!l.text()||h.mes===(null===(s=h.swipes)||void 0===s?void 0:s[h.swipe_id-1]))return null!==(p=h.extra)&&void 0!==p&&p.display_text&&(h.extra.display_text=void 0,(0,t.updateMessageBlock)(c,h,{rerenderMessage:!0})),void console.warn("chat message #".concat(e,".").concat(h.swipe_id," is generating"));!i||null!=h&&null!==(n=h.is_ejs_processed)&&void 0!==n&&n[h.swipe_id||0]||(V.isDryRun=i=!1);const u=await bt(c+Number(!!i),{runType:"render",message_id:c,swipe_id:h.swipe_id,runID:Pt++,is_last:c>=t.chat.length-1,is_user:h.is_user,is_system:h.is_system,name:h.name,isDryRun:i});let d=!1;function f(e){return d=!0,(0,t.messageFormatting)(e,h.name,h.is_system,h.is_user,c)}const _=!1===O.render_loader_enabled?"":await Ft(u,"[RENDER:BEFORE]","",{escaper:f});if(!i&&O.raw_message_evaluation_enabled){var m;u.runType="render_permanent";const e=await Ut(h.mes,u,"chat #".concat(c,".").concat(h.swipe_id," raw"));u.runType="render",null!=e?(h.extra||(h.extra={}),h.extra.display_text=e,(0,t.updateMessageBlock)(c,h,{rerenderMessage:!0})):null!==(m=h.extra)&&void 0!==m&&m.display_text&&(h.extra.display_text=void 0,(0,t.updateMessageBlock)(c,h,{rerenderMessage:!0}))}else null!==(a=h.extra)&&void 0!==a&&a.display_text&&(h.extra.display_text=void 0,(0,t.updateMessageBlock)(c,h,{rerenderMessage:!0}));const g=l.html(),v=!1===O.code_blocks_enabled?function(t){return t.replace(/(<pre\b[^>]*>)([\s\S]*?)(<\/pre>)/gi,((t,e,i,r)=>e+i.replace(/&lt;/g,"#lt#").replace(/&gt;/g,"#gt#")+r))}(g):function(t){return t.replace(/<pre\b[^>]*>([\s\S]*?)<\/pre>/gi,((t,e)=>{const i=e.replace(/&lt;%([\s\S]*?)%&gt;/g,((t,e)=>"&lt;%".concat(e.replace(/<[^>]+>/g,""),"%&gt;")));return"<pre>".concat(i,"</pre>")}))}(g);let y=await Ut(function(t){const e=t.replace(/&lt;%((?:[^%]|%[^>])*)%&gt;/g,((t,e)=>{const i=e.replace(/<[^>]+>/g,"");return"&lt;%".concat(i,"%&gt;")}));return e}(v),u,"chat #".concat(c,".").concat(h.swipe_id),{escaper:f,options:{openDelimiter:"&lt;",closeDelimiter:"&gt;"}});var x,b;!1===O.code_blocks_enabled&&(y=null!==(x=null===(b=y)||void 0===b?void 0:b.replace(/(<pre\b[^>]*>)([\s\S]*?)(<\/pre>)/gi,((t,e,i,r)=>e+i.replace(/#lt#/g,"&lt;").replace(/#gt#/g,"&gt;")+r)))&&void 0!==x?x:null);const w=!1===O.render_loader_enabled?"":await Ft(u,"[RENDER:AFTER]",y||"",{escaper:f});null!=y&&(y=_+y+w),y&&y!==v&&l.empty().append(y),d&&i&&(Nt=!0,console.debug("[HTML] rendering #".concat(c," messages")),h.is_user?await t.eventSource.emit(t.event_types.USER_MESSAGE_RENDERED,c):h.is_system||await t.eventSource.emit(t.event_types.CHARACTER_MESSAGE_RENDERED,c),Nt=!1),h.is_ejs_processed||(h.is_ejs_processed=[]),h.is_ejs_processed[h.swipe_id||0]=!0;const E=Date.now()-o;console.log("[Prompt Template] processing #".concat(c," messages in ").concat(E,"ms")),await z(),i||Bt(l.text(),"receive")}async function Dt(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!1===O.enabled)return;if(et(),v(),!1===O.preload_worldinfo_enabled&&!i)return;if(!e&&!i)return;V.isDryRun=!0;const r=Date.now(),s=(await S()).filter((t=>!t.disable)),n=await bt(65535,{runType:"preparation",runID:Pt++,message_id:void 0,swipe_id:void 0,is_last:void 0,is_user:void 0,is_system:void 0,name:void 0,isDryRun:!0});let a="";O.generate_loader_enabled&&(a+=await Ft(n,"[GENERATE:BEFORE]"));for(const e of s)a+=await Ut((0,t.substituteParams)(e.content),_.merge(n,{world_info:e}),"worldinfo ".concat(e.world,".").concat(e.comment),{options:{cache:!1}});const o=M();if(null!=o&&o.description||null!=o&&o.scenario){const t=(o.description||"")+"\n---\n"+(o.scenario||"");a+=await Ut(t,n,"character ".concat(o.name))}O.generate_loader_enabled&&await Ft(n,"[GENERATE:AFTER]",a);const c=Date.now()-r;console.log("[Prompt Template] processing ".concat(s.length," world info in ").concat(c,"ms")),console.log("[Prompt Template] *** UPDATE ALL MESSAGES ***");for(const t of $("div.mes[mesid]")){const e=$(t).attr("mesid");e&&await Rt(e,!0)}}async function jt(e,i){if(!1===O.enabled)return;if(!1===O.preload_worldinfo_enabled)return;if(!t.this_chid)return;const r=Date.now();if(!k().includes(e))return;const s=Object.values(i.entries).filter((t=>!t.disable)),n=await bt(65535,{runType:"preparation",runID:Pt++,message_id:void 0,swipe_id:void 0,is_last:void 0,is_user:void 0,is_system:void 0,name:void 0,isDryRun:!0});let a="";O.generate_loader_enabled&&(a+=await Ft(n,"[GENERATE:BEFORE]"));for(const e of s)a+=await Ut((0,t.substituteParams)(e.content),_.merge(n,{world_info:e}),"worldinfo ".concat(e.world,".").concat(e.comment),{options:{cache:!1}});O.generate_loader_enabled&&await Ft(n,"[GENERATE:AFTER]",a);const o=Date.now()-r;console.log("[Prompt Template] processing ".concat(s.length," world info in ").concat(o,"ms"))}async function Mt(e,i,r){!1!==O.enabled&&(r||await async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];await t.eventSource.emit(t.event_types.WORLDINFO_FORCE_ACTIVATE,m.values()),e&&v()}(!0))}async function Vt(t){if(!1===O.enabled)return;if(!1===O.world_active_enabled)return;if(!t.dryRun)return;V.isDryRun=!0;const e=Date.now(),i=await bt(65535,{runType:"preparation",runID:Pt++,message_id:void 0,swipe_id:void 0,is_last:void 0,is_user:void 0,is_system:void 0,name:void 0,isDryRun:!0});let r=!1===O.generate_loader_enabled?"":await Ft(i,"[GENERATE:BEFORE]");for(const[e,s]of t.chat.entries()){const t=!1===O.generate_loader_enabled?"":await Ft(i,"[GENERATE:".concat(e,":BEFORE]"));if("string"==typeof s.content){const n=await Ut(s.content,i,"message #".concat(e+1,"(").concat(s.role,")"));r+=t+(n||"")+(!1===O.generate_loader_enabled?"":await Ft(i,"[GENERATE:".concat(e,":AFTER]"),n||""))}else if(_.isArray(s.content))for(const n of s.content)if("text"===n.type){const a=await Ut(n.text,i,"message #".concat(e+1,"(").concat(s.role,")"));r+=t+(a||"")+(!1===O.generate_loader_enabled?"":await Ft(i,"[GENERATE:".concat(e,":AFTER]"),a||""))}}O.generate_loader_enabled&&await Ft(i,"[GENERATE:AFTER]",r);const s=Date.now()-e;console.log("[Prompt Template] processing ".concat(t.chat.length," messages in ").concat(s,"ms"))}function Bt(t,e){window.setTimeout((()=>{(0,kt.getTokenCountAsync)(t).then((i=>{switch(console.log("[Prompt Template] processing ".concat(e," result: ").concat(i," tokens and ").concat(t.length," chars")),e){case"send":P.extension_settings.variables.global.LAST_SEND_TOKENS=i,P.extension_settings.variables.global.LAST_SEND_CHARS=t.length;break;case"receive":P.extension_settings.variables.global.LAST_RECEIVE_TOKENS=i,P.extension_settings.variables.global.LAST_RECEIVE_CHARS=t.length}}))}))}async function Ut(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{var s,n;return await ut(t,e,Ct(Ct({},r),{},{logging:!1,options:Ct({strict:null!==(s=O.with_context_disabled)&&void 0!==s&&s,debug:null!==(n=O.debug_enabled)&&void 0!==n&&n},r.options||{})}))}catch(e){if(O.debug_enabled){const e=t.split("\n").map(((t,e)=>"".concat(e,": ").concat(t))).join("\n");console.debug("[Prompt Template] handling ".concat(i," errors:\n").concat(e))}e instanceof SyntaxError&&(e.message+=At(t)),console.error(e),toastr.error(e.message,"EJS Error",{onclick:()=>navigator.clipboard.writeText(e.message).then((()=>toastr.success("Copied to clipboard!")))})}return null}async function Ft(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=b((await S()).filter((t=>t.comment.startsWith(i))),r,{withConstant:!0,withDisabled:!0,onlyDisabled:!0});let a="";for(const i of n){const r=await Ut((0,t.substituteParams)(i.content),_.merge(e,{world_info:i}),"worldinfo ".concat(i.world,".").concat(i.comment),s);null!=r&&(a+=r)}return a}async function Wt(t,e,i){if(!1===O.enabled)return;if(i)return;const r=P.extension_settings.regex.findIndex((t=>t.id===Ot));O.filter_message_enabled&&-1===r?(tt("/<%(?![%])([\\s\\S]*?)(?<!%)%>/g","",{uuid:Ot}),console.debug("[Prompt Template] inject regex filter")):!O.filter_message_enabled&&r>-1&&(et(Ot),console.debug("[Prompt Template] remove regex filter"))}const qt=[t.event_types.MESSAGE_UPDATED,t.event_types.MESSAGE_SWIPED,t.event_types.CHARACTER_MESSAGE_RENDERED,t.event_types.USER_MESSAGE_RENDERED];const Gt=(t=>{var e={};return __webpack_require__.d(e,t),e})({SlashCommand:()=>__WEBPACK_EXTERNAL_MODULE__slash_commands_SlashCommand_js_1b0d5616__.SlashCommand});const zt=(t=>{var e={};return __webpack_require__.d(e,t),e})({ARGUMENT_TYPE:()=>__WEBPACK_EXTERNAL_MODULE__slash_commands_SlashCommandArgument_js_a42b9371__.ARGUMENT_TYPE,SlashCommandArgument:()=>__WEBPACK_EXTERNAL_MODULE__slash_commands_SlashCommandArgument_js_a42b9371__.SlashCommandArgument,SlashCommandNamedArgument:()=>__WEBPACK_EXTERNAL_MODULE__slash_commands_SlashCommandArgument_js_a42b9371__.SlashCommandNamedArgument});const Kt=(t=>{var e={};return __webpack_require__.d(e,t),e})({SlashCommandParser:()=>__WEBPACK_EXTERNAL_MODULE__slash_commands_SlashCommandParser_js_42c8b851__.SlashCommandParser});function Xt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Ht(t,e,i){var r;return(e="symbol"==typeof(r=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?r:String(r))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}async function $t(){globalThis.EjsTemplate={evalTemplate:async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return V.isDryRun=!1,await ut(t,e,{logging:!1,options:i})},prepareContext:async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:65535;return await bt(e,t)},getSyntaxErrorInfo:At,setFeatures:t=>{!function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(const[e,i]of Object.entries(N))void 0!==t[i.name]&&(O[i.name]=t[i.name],P.extension_settings.EjsTemplate[i.name]=t[i.name],$(e).prop("checked",t[i.name]))}(t)},allVariables:B,resetFeatures:()=>L(!0)}}async function Yt(){await async function(){t.eventSource.makeFirst(t.event_types.CHAT_CHANGED,Dt),t.eventSource.on(t.event_types.GENERATION_AFTER_COMMANDS,Mt),t.eventSource.on(t.event_types.CHAT_COMPLETION_PROMPT_READY,Lt),t.eventSource.on(t.event_types.CHAT_COMPLETION_PROMPT_READY,Vt),t.eventSource.on(t.event_types.GENERATE_AFTER_COMBINE_PROMPTS,It),t.eventSource.on(t.event_types.GENERATION_AFTER_COMMANDS,Wt),t.eventSource.on(t.event_types.WORLDINFO_UPDATED,jt),qt.forEach((e=>t.eventSource.on(e,Rt)))}(),await async function(){}(),await async function(){$("#extensions_settings").append(await(0,P.renderExtensionTemplateAsync)("third-party/ST-Prompt-Template","settings"));for(const[e,i]of Object.entries(N))$(e).off("click").on("click",(()=>{var r,s;P.extension_settings.EjsTemplate||(P.extension_settings.EjsTemplate={}),P.extension_settings.EjsTemplate[i.name]=null!==(r=$(e).prop("checked"))&&void 0!==r?r:i.value,O[i.name]=null!==(s=$(e).prop("checked"))&&void 0!==s?s:i.value,console.debug("[Prompt Template] setting ".concat(i.name," changed to ").concat(P.extension_settings.EjsTemplate[i.name])),(0,t.saveSettingsDebounced)()}));P.extension_settings.EjsTemplate||(P.extension_settings.EjsTemplate={},L(!0)),t.eventSource.on(t.event_types.SETTINGS_LOADED,I),t.eventSource.on(t.event_types.SETTINGS_UPDATED,R),I(),$("#pt_reset").click((function(){confirm("Reset all prompt template settings?")&&globalThis.EjsTemplate.resetFeatures()}))}(),await $t(),console.log("ST-Prompt-Template initialized")}Kt.SlashCommandParser.addCommandObject(Gt.SlashCommand.fromProps({name:"ejs",callback:async(t,e)=>{V.isDryRun=!1;const i=JSON.parse(t.ctx||"{}");t.block&&(e="<%= ".concat(e," %>"));const r=await bt(65535,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(i),!0).forEach((function(e){Ht(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Xt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({runType:"command",runID:-1,isDryRun:!1},i));O.debug_enabled&&console.debug("execute template code: ".concat(e));try{return await ut(e,r,{logging:!1})}catch(t){throw t instanceof SyntaxError&&(t.message+=At(e)),console.error(t),t}finally{await z()}},namedArgumentList:[zt.SlashCommandNamedArgument.fromProps({name:"ctx",description:"Execute context, eg. {a : 1, b: 2}",typeList:[zt.ARGUMENT_TYPE.DICTIONARY],isRequired:!1}),zt.SlashCommandNamedArgument.fromProps({name:"block",description:"Treat as a whole code block, eg. <%= code %>",typeList:[zt.ARGUMENT_TYPE.DICTIONARY],isRequired:!1})],unnamedArgumentList:[zt.SlashCommandArgument.fromProps({description:"code",typeList:[zt.ARGUMENT_TYPE.STRING],isRequired:!0})],helpString:"Execute template code",returns:"string"})),Kt.SlashCommandParser.addCommandObject(Gt.SlashCommand.fromProps({name:"ejs-refresh",callback:async(e,i)=>{await Dt((0,t.getCurrentChatId)(),!0),toastr.success("Preload world info success")},helpString:"Preload world info"}));const Qt={init:Yt,exit:async function(){await async function(){t.eventSource.removeListener(t.event_types.CHAT_CHANGED,Dt),t.eventSource.removeListener(t.event_types.GENERATION_AFTER_COMMANDS,Mt),t.eventSource.removeListener(t.event_types.CHAT_COMPLETION_PROMPT_READY,Lt),t.eventSource.removeListener(t.event_types.CHAT_COMPLETION_PROMPT_READY,Vt),t.eventSource.removeListener(t.event_types.GENERATE_AFTER_COMBINE_PROMPTS,It),t.eventSource.removeListener(t.event_types.GENERATION_AFTER_COMMANDS,Wt),t.eventSource.removeListener(t.event_types.WORLDINFO_UPDATED,jt),qt.forEach((e=>t.eventSource.removeListener(e,Rt)))}(),await async function(){}(),await async function(){$("#extensions_settings").remove("#prompt_template_settings"),t.eventSource.removeListener(t.event_types.SETTINGS_LOADED,I),t.eventSource.removeListener(t.event_types.SETTINGS_UPDATED,R)}(),await async function(){delete globalThis.EjsTemplate}(),console.log("ST-Prompt-Template exited")},info:{id:"ST-Prompt-Template",name:"Prompt Template",description:""}};$((async()=>{await Yt()}))})(),__webpack_exports__=__webpack_exports__.default;var __webpack_exports__default=__webpack_exports__.default,__webpack_exports__exit=__webpack_exports__.false,__webpack_exports__info=__webpack_exports__.false,__webpack_exports__init=__webpack_exports__.false;export{__webpack_exports__default as default,__webpack_exports__exit as exit,__webpack_exports__info as info,__webpack_exports__init as init};
//# sourceMappingURL=index.js.map